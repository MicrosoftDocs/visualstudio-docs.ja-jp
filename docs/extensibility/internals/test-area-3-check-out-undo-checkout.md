---
title: テストエリア3:チェックアウト/チェックアウトの取り消し |マイクロソフトドキュメント
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- source control plug-ins, checkout
- source control plug-ins, undo checkout
- source control [Visual Studio SDK], checking out
- source control [Visual Studio SDK], undo checkout
ms.assetid: ce00c5a5-d472-4f45-8776-d77a1fbe9d37
author: acangialosi
ms.author: anthc
manager: jillfra
ms.workload:
- vssdk
ms.openlocfilehash: 5365da1e342df5aea9c1b1cd2ae5a446baea57f1
ms.sourcegitcommit: 16a4a5da4a4fd795b46a0869ca2152f2d36e6db2
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/06/2020
ms.locfileid: "80704616"
---
# <a name="test-area-3-check-outundo-checkout"></a>テスト領域 3: チェックアウト/チェックアウトの取り消し
このソース管理プラグインのテスト領域では、[チェックアウト] コマンドと [**チェックアウト**の取り消し] コマンドを使用して、バージョン ストアの項目の編集と**取り消し**を行います。

**チェックアウト**: バージョン ストア内の項目をチェックアウト済みとしてマークし、ローカル コピーを読み取り/書き込みに変更します。

**チェックアウトの取り消し**: バージョン ストア内の項目をチェックイン済みとしてマークし、ローカル コピーをチェックアウト前の状態に戻します (オプションに応じて)。

## <a name="command-menu-access"></a>コマンド メニューへのアクセス

テスト[!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)]ケースでは、次の統合開発環境メニュー パスが使用されます。

##### <a name="check-out"></a>チェックアウト:

- **ファイル**、**ソース管理**、**チェックアウト**。

- **ファイル**、**チェックアウト**.

- ショートカット メニューの **[チェックアウト]** をクリックします。

- チェックアウトの取り消し:**ファイル**、**ソース管理**、**チェックアウトの取り消し**

## <a name="common-expected-behavior"></a>一般的な予期される動作

- チェックアウト操作の後、ターゲット ファイルまたはフォルダはバージョン ストアでチェックアウト済みとしてマークされます。

- バージョン ストアは、チェックアウトを適切なユーザーに帰属します。

- チェックアウトの日時は、ユーザーの設定に従って正しい時刻です。

## <a name="test-cases"></a>テスト ケース

チェックアウト/チェックアウトの取り消しテスト領域の具体的なテストケースを次に示します。

### <a name="case-3a-check-out"></a>ケース 3a: チェックアウト

このセクションでは、チェックアウト コマンドの操作について説明します。

|アクション|テストステップ|検証する期待される結果|
|------------|----------------|--------------------------------|
|クライアント プロジェクトの排他 (COE) をチェックアウトする|1. クライアント プロジェクトを作成します。<br />2. ソリューションをソース管理に追加します。<br />3. プロジェクト全体を排他的にチェックアウトします (**ファイル**、**チェックアウト**)。|チェックアウトが発生します。|
|ファイル システムまたはローカル IIS Web プロジェクトの排他 (COE) をチェックアウトする|1.**ツール**、**オプション**、**プロジェクト**、 Web 設定 で Web サーバー接続をファイル共有に**設定します**。<br />2. Web プロジェクトを作成します。<br />3. ソース管理にソリューションを追加します。<br />4. プロジェクト全体を排他的にチェックアウトします (**ファイル**、**ソース管理**、**チェックアウト**)。|チェックアウトが発生します。|
|ソリューション内のソリューション項目をチェックアウトする (他のファイルを処理するための新しい方法)|1. 空のソリューションを作成します。<br />2. ソリューションをソース管理に追加します。<br />3. ソリューションをチェックします。<br />4. 複数のソリューション項目を追加します。<br />5. 新しく追加されたすべての項目をチェックインします。<br />6. 複数のソリューション項目を選択します。<br />7. 選択した項目をチェックアウトします (ショートカットメニュー、**チェックアウト**)。|選択したファイルはチェックアウトされます。|
|ローカル バージョンのチェックアウト (テスト対象のプラグインがこの機能をサポートしている場合)|1. ユーザー 1: クライアント プロジェクトを作成します。<br />2. ユーザー 1: ソース管理にソリューションを追加します。<br />3. ユーザー 2: ソース管理から別の場所にソリューションを開きます。<br />4. ユーザー 2: ファイルをチェックアウトします。<br />5. ユーザー 2: ファイルを変更します。<br />6. ユーザー 2: ファイルをチェックインします。<br />7. ユーザー 1: ファイルのローカル バージョンをチェックアウトします ([チェックアウト] ダイアログ ボックスの **[ローカル バージョン**の詳細をチェック] オプションを**確認**します)。|ファイルのローカル バージョンがチェックアウトされています。<br /><br /> ユーザー 2 による変更は、ユーザー 1 ファイルには適用されません。|

### <a name="case-3b-disconnected-check-out"></a>ケース 3b: オフラインチェックアウト

非接続モードで動作すると、ユーザーはバージョン ストアに直接アタッチされていない場合に、ある程度のソース管理サポートを継続できます。 これは、参加しているソリューションとプロジェクトに関するすべての関連情報をローカルにキャッシュすることによって行われます。

排他的チェックアウト操作は、ソース管理ストアに接続されている間のみ実行できます。 共有チェックアウト操作は、接続または切断のどちらであっても、いつでも実行できます。 したがって、バージョン ストアから切断された場合は、[**共有のチェックアウト**(COS)] コマンドのみが有効になります。 切断中は、元に**戻すチェックアウト**は、古いバージョンを取得してユーザーが行った変更を置き換えることができないため、無効になります。

ユーザーがバージョン ストアに再接続すると、参加しているすべてのソリューションとプロジェクトのチェックアウト状態が同期されます。 これにより、ユーザーが実行したチェックアウトに必要な更新がストアに行われます。 同期が行われた後、ユーザーは通常の (接続) として作業を続行できます。

#### <a name="expected-behavior"></a>想定されている動作

- バージョン ストアから切断されている間は **、[排他的にチェックアウト**] コマンドを使用できません。

- バージョン ストアから切断されているときに **[チェックアウトの取り消し**]コマンドを使用できません。

- **共有チェックアウトコマンドが**動作します。

|アクション|テストステップ|検証する期待される結果|
|------------|----------------|--------------------------------|
|切断中にファイルをチェックアウトし、接続して同期|1. [ソース管理の変更] ダイアログ ボックス **([ファイル**]、[**ソース管理]、[ソース管理**の変更] ) を使用して、管理されているプロジェクト**を**切断します。<br />2. ファイルをチェックアウトします。<br />3. 警告ダイアログボックスで[チェックアウト(切断)]をクリックします。<br />4. ファイルを編集します。<br />5. [ソース管理の変更] ダイアログ ボックスを使用して接続します。<br />6. 編集したファイルの最新バージョンを取得します。|一般的な予期される動作|

### <a name="case-3c-query-editquery-save-qeqs"></a>ケース 3c: クエリ編集/クエリ保存 (QEQS)
 ソース管理下の項目は、ユーザーがファイルを簡単に管理できるように、編集、変更、保存のために追跡されます。 「チェックイン済み」の制御項目が編集されると、QEQS は、編集を試行した項目をインターセプトし、ファイルをチェックアウトして編集するかどうかをユーザーに確認します。 **[ツール**] の **[オプション] 設定**に応じて、ユーザーは編集のためにファイルを強制的にチェックアウトするか、またはメモリ内のコピーを編集して後でチェックアウトすることができます。 ユーザーの**ツール**の**オプション**設定がチェック アウト ダイアログ ボックスを表示し、それをチェックアウトするように設定されていない場合、ユーザーが編集を行うと、可能な限りファイルが自動的にチェックアウトされます。

#### <a name="expected-behavior"></a>想定されている動作

- チェックアウト操作の後、ターゲット ファイルまたはフォルダはバージョン ストアでチェックアウト済みとしてマークされます。

- バージョン ストアは、正しいユーザーにチェックアウトを属性します。

- チェックアウトの日時は、ユーザーの設定に従って正しい時刻です。

- ターゲット ファイルまたはフォルダのローカル コピーは書き込み可能です。

|アクション|テストステップ|検証する期待される結果|
|------------|----------------|--------------------------------|
|チェックインされているテキスト ファイルを編集する|1. テキスト ファイルを含む新しいプロジェクトを作成します。<br />2. ソリューションをソース管理に追加します。<br />3.**ツール**、**オプション**、**ソース管理**、**ディスク上で読み取り専用のファイルの編集を許可**するをオフにします。<br />4.**設定ツール**、**オプション**、**ソース管理**、**チェックインしたファイルが編集された場合**の**チェックアウトを促す**コンボボックス。<br />5.**設定ツール**,**オプション**,**ソース管理**,**チェックインされたファイルが保存されたときに****チェックアウトを求める**コンボボックス.<br />6. エディタでテキストファイルを開き、ファイルに新しいテキストを入力します。 このステップが成功した場合は、次のステップに進みます。<br />7. **[編集用のチェックアウト**]ダイアログ ボックスで[**キャンセル**]をクリックします。 このステップが成功した場合は、次のステップに進みます。<br />8.**ツール**、**オプション**、**ソース管理**、**ディスク上で読み取り専用のファイルの編集を許可**する チェックを行う。<br />9. エディタでプロジェクトファイルを開き、ファイルに新しいテキストを入力します。 このステップが成功した場合は、次のステップに進みます。<br />10. **[編集**用のチェックアウト] ダイアログ ボックスで [**編集**] をクリックします。 このステップが成功した場合は、次のステップに進みます。<br />11. テキストファイルを編集し、保存を試みます。|`Result of step 6:`<br /><br /> [編集用にチェックアウト] ダイアログ ボックスが表示されます。<br /><br /> `Result of step 7:`<br /><br /> ファイルは変更されません。<br /><br /> `Result of step 9:`<br /><br /> [編集用にチェックアウト] ダイアログ ボックスが表示されます。<br /><br /> `Result of step 10:`<br /><br /> メモリ内のプロジェクト ファイルを編集できます。<br /><br /> `Result of step 11:`<br /><br /> 保存時に、[保存時にチェックアウト] ダイアログ ボックスが表示されます。|
|チェックインされているソリューション ファイルを編集する|前のテストで説明した手順を繰り返しますが、テキスト ファイルを変更する代わりに、ソリューションのプロパティを変更してソリューションを変更します。|前回のテストと同じ|
|チェックインされているプロジェクト ファイルを編集する|前のテストで説明した手順を繰り返しますが、テキスト ファイルを変更する代わりに、プロジェクトのプロパティを変更してプロジェクトを変更します。|前回のテストと同じです。|

### <a name="case-3d-silent-check-out"></a>ケース 3d: サイレントチェックアウト
 このサブエリアには、ユーザーの **[ツール]、[****オプション]、[****ソース管理設定**] の各ユーザーごとに [**チェックアウト**] ダイアログ ボックスが表示されないチェックアウト シナリオが含まれます。

#### <a name="expected-behavior"></a>想定されている動作

- チェックアウト操作の後、ターゲット ファイルまたはフォルダはバージョン ストアでチェックアウト済みとしてマークされます。

- バージョン ストアは、正しいユーザーにチェックアウトを属性します。

- チェックアウトの日時が正しい (ユーザーの設定に従って)

- ターゲット ファイルまたはフォルダのローカル コピーは書き込み可能です。

|アクション|テストステップ|検証する期待される結果|
|------------|----------------|--------------------------------|
|ファイルのサイレント チェックアウト|1.**ツール**の設定,**オプション**,**ソース管理**は **、編集時に自動的にファイルをチェックアウト**します.<br />2. ファイルを使用して新しいプロジェクトを作成します。<br />3. ソース管理にソリューションを追加します。<br />4. ファイルをチェックアウトします。|ファイルはサイレント アウトされます (UI はありません)。|
|プロジェクトのサイレント チェックアウト|1.**ツール**の設定,**オプション**,**ソース管理**は **、編集時に自動的にファイルをチェックアウト**します.<br />2. 新しいプロジェクトを作成します。<br />3. ソース管理にソリューションを追加します。<br />4. プロジェクトをチェックアウトします。|ファイルはサイレント アウトされます (UI はありません)。|

### <a name="case-3e-undo-check-out"></a>ケース 3e: チェックアウトを取り消す
 **チェックアウトを取り消**すと、ファイルのチェックアウトステータスがキャンセルされ、ファイルに加えられた変更がチェックインされないようになります。

#### <a name="expected-behavior"></a>想定されている動作

- デフォルトは、ユーザーのローカル バージョンの**チェックアウト設定に**基づいています。 ユーザーがローカル バージョンをチェックアウトすることを選択した場合、チェックアウトの取り消しの既定値は、常にチェックアウトされたバージョンに戻ります。

- 元に戻す操作を承諾すると、**ソリューション エクスプローラー**のアイコンは影響を受けるファイルに対して更新され、アイテムは **[保留中のチェックイン**] ウィンドウから削除されます。

|アクション|テストステップ|検証する期待される結果|
|------------|----------------|--------------------------------|
|排他的にチェックアウトされている単一のファイルのチェックアウトを元に戻す|1. クライアント プロジェクトを作成します。<br />2. ソリューションをソース管理に追加します。<br />3. ファイルを排他的にチェックアウトします。<br />4. ファイルを変更します。<br />5. チェックアウトの取り消し (**ファイル**、**ソース管理**、**チェックアウトの取り消し**)|一般的な予期される動作。|
|共有済みチェックアウトされている 1 つのファイルのチェックアウトを取り消す|1. クライアント プロジェクトを作成します。<br />2. ソリューションをソース管理に追加します。<br />3. 共有ファイルをチェックアウトします。<br />4. ファイルを変更します。<br />5. チェックアウトの取り消し (**ファイル**、**ソース管理**、**チェックアウトの取り消し**)|一般的な予期される動作。|
|ファイルをプロジェクトに追加した後にプロジェクトのチェックアウトを取り消す|1. 新しいプロジェクトを作成し、ソース管理に追加します。<br />2. プロジェクトをチェックアウトします。<br />3. プロジェクトにファイルを追加します。<br />4. プロジェクトのチェックアウトを取り消します。|追加されたファイルは、ソリューション エクスプローラーでプロジェクトから削除されます。<br /><br /> プロジェクトはチェックアウトされていません。|
|プロジェクトからファイルを削除した後にプロジェクトのチェックアウトを取り消す|1. 新しいプロジェクトを作成し、ソース管理に追加します。<br />2. プロジェクトをチェックアウトします。<br />3. プロジェクトからファイルを削除します。<br />4. プロジェクトのチェックアウトを取り消します。|ソリューション エクスプローラーのプロジェクトの下に、削除されたファイルが表示されます。<br /><br /> プロジェクトはチェックアウトされていません。|

## <a name="see-also"></a>関連項目
- [ソース管理プラグイン向けのテスト ガイド](../../extensibility/internals/test-guide-for-source-control-plug-ins.md)
