---
title: イメージ ライブラリ ビューア |マイクロソフトドキュメント
ms.date: 11/04/2016
ms.topic: conceptual
ms.assetid: 9d9c7fbb-ebae-4b20-9dd8-3c9070c0d0d1
author: acangialosi
ms.author: anthc
manager: jillfra
ms.workload:
- vssdk
ms.openlocfilehash: a7c5eda24c235cddec99cb5177c6ed315978bc6f
ms.sourcegitcommit: 16a4a5da4a4fd795b46a0869ca2152f2d36e6db2
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/06/2020
ms.locfileid: "80707745"
---
# <a name="image-library-viewer"></a>イメージ ライブラリ ビューア
Visual Studio イメージ ライブラリ ビューアー ツールは、イメージ マニフェストを読み込んで検索できるため、ユーザーは Visual Studio と同じ方法でイメージ マニフェストを操作できます。 ユーザーは、背景、サイズ、DPI、ハイコントラスト、およびその他の設定を変更できます。 また、このツールは、各イメージ マニフェストの読み込み情報を表示し、イメージ マニフェスト内の各イメージのソース情報を表示します。 このツールは、次の場合に便利です。

1. エラーの診断

2. カスタム イメージ マニフェストで属性が正しく設定されていることを確認する

3. Visual Studio の拡張機能が Visual Studio のスタイルに合ったイメージを使用できるように、Visual Studio イメージ カタログ内のイメージを検索します。

   ![イメージ ライブラリ ビューアーのヒーロー](../../extensibility/internals/media/image-library-viewer-hero.png "イメージ ライブラリ ビューアーのヒーロー")

   **イメージ モニカー**

   イメージ モニカー (略してモニカー) は、イメージ ライブラリ内のイメージ アセットまたはイメージ リスト アセットを一意に識別する GUID:ID ペアです。

   **イメージ マニフェスト ファイル**

   イメージ マニフェスト (.imagemanifest) ファイルは、イメージ アセットのセット、それらのアセットを表すモニカー、および各アセットを表す実際のイメージを定義する XML ファイルです。 イメージ マニフェストは、従来の UI サポート用のスタンドアロン イメージまたはイメージ リストを定義できます。 また、アセットまたは各アセットの背後にある個々のイメージに設定して、アセットの表示時期と表示方法を変更できる属性もあります。

   **イメージ マニフェスト スキーマ**

   完全なイメージ マニフェストは次のようになります。

```xml
<ImageManifest>
      <!-- zero or one Symbols elements -->
      <Symbols>
        <!-- zero or more Guid, ID, or String elements -->
      </Symbols>
      <!-- zero or one Images elements -->
      <Images>
        <!-- zero or more Image elements -->
      </Images>
      <!-- zero or one ImageLists elements -->
      <ImageLists>
        <!-- zero or more ImageList elements -->
      </ImageLists>
</ImageManifest>
```

 **Symbols**

 イメージ マニフェストは、読みやすさと保守の助けとして、属性値のシンボルを使用できます。 シンボルは次のように定義されます。

```xml
<Symbols>
      <Import Manifest="manifest" />
      <Guid Name="ShellCommandGuid" Value="8ee4f65d-bab4-4cde-b8e7-ac412abbda8a" />
      <ID Name="cmdidSaveAll" Value="1000" />
      <String Name="AssemblyName" Value="Microsoft.VisualStudio.Shell.UI.Internal" />
</Symbols>
```

|||
|-|-|
|**サブ要素**|**定義**|
|[インポート]|現在のマニフェストで使用するために、指定されたマニフェスト ファイルのシンボルをインポートします。|
|Guid|シンボルは GUID を表し、GUID の書式設定と一致する必要があります。|
|id|シンボルは ID を表し、負でない整数である必要があります。|
|String|シンボルは任意の文字列値を表します。|

 シンボルは大文字と小文字を区別し、$(symbol-name) 構文を使用して参照されます。

```xml
<Image Guid="$(ShellCommandGuid)" ID="$(cmdidSaveAll)" >
      <Source Uri="/$(AssemblyName);Component/Resources/image.xaml" />
</Image>
```

 一部のシンボルは、すべてのマニフェストに対して事前定義されています。 これらは、\<ソース>または\<インポート>要素の Uri 属性でローカル コンピューター上のパスを参照するために使用できます。

|||
|-|-|
|**シンボル**|**説明**|
|CommonProgramFiles|環境変数の値|
|ローカルアプリケーションデータ|環境変数 %LocalAppData% の値|
|マニフェストフォルダー|マニフェスト ファイルを含むフォルダー|
|マイドキュメント|現在のユーザーのマイ ドキュメント フォルダの完全パス|
|ProgramFiles|環境変数 %ProgramFiles% の値|
|システム|ウィンドウズ\システム32フォルダ|
|Windir|%WinDir% 環境変数の値|

 **イメージ**

 イメージ\<>要素は、モニカーによって参照できるイメージを定義します。 GUID と ID は、イメージ モニカーを形成します。 イメージのモニカーは、イメージ ライブラリ全体で一意である必要があります。 複数のイメージに特定のモニカーがある場合、ライブラリのビルド中に最初に検出されたイメージは保持されます。

 少なくとも 1 つのソースが含まれている必要があります。 サイズに依存しないソースは、サイズの広い範囲にわたって最良の結果を提供しますが、必要ではありません。 サービスが Image> 要素で定義されていないサイズのイメージを\<要求され、サイズに依存しないソースがない場合、サービスは最適なサイズ固有のソースを選択し、要求されたサイズにスケーリングします。

```xml
<Image Guid="guid" ID="int" AllowColorInversion="true/false">
      <Source ... />
      <!-- optional additional Source elements -->
</Image>
```

|||
|-|-|
|**属性**|**定義**|
|Guid|[必須]イメージ モニカーの GUID 部分|
|id|[必須]イメージ モニカーの ID 部分|
|許可色反転|[オプション、デフォルトは true]暗い背景で使用する場合、イメージの色をプログラムによって反転できるかどうかを示します。|

 **ソース**

 ソース\<>要素は、単一のイメージ ソース アセット (XAML および PNG) を定義します。

```xml
<Source Uri="uri" Background="background">
      <!-- optional NativeResource element -->
 </Source>
```

|||
|-|-|
|**属性**|**定義**|
|Uri|[必須]イメージの読み込み元を定義する URI。 次のいずれかを指定できます。<br /><br /> - application:///権限を使用する[パック URI](/dotnet/framework/wpf/app-development/pack-uris-in-wpf)<br /><br /> - 絶対コンポーネントリソース参照<br /><br /> - ネイティブ リソースを含むファイルへのパス|
|バックグラウンド|[オプション]ソースが使用される背景の種類を示します。<br /><br /> 次のいずれかを指定できます。<br /><br /> - *ライト*: 光源は、明るい背景に使用できます。<br /><br /> - *暗い*: ソースは暗い背景で使用できます。<br /><br /> - *ハイコントラスト*: ソースはハイコントラスト モードの任意の背景で使用できます。<br /><br /> - *ハイコントラストライト*: 光源はハイコントラストモードの明るい背景で使用できます。<br /><br /> -*ハイコントラストダーク*: ソースはハイコントラストモードで暗い背景に使用することができます。<br /><br /> **背景**属性を省略すると、任意のバックグラウンドでソースを使用できます。<br /><br /> **背景**が*明るい*、*暗い*、*ハイコントラストライト*、または*ハイコントラストダーク*の場合、ソースの色は反転しません。 **背景**を省略するか *、ハイコントラスト*に設定すると、ソースの色の反転はイメージの**AllowColorInversion**属性によって制御されます。|

 \<ソース>要素は、次のオプションのサブ要素のうち 1 つだけを持つことができます。

||||
|-|-|-|
|**要素**|**属性 (すべて必須)**|**定義**|
|\<サイズ>|[値]|ソースは、指定されたサイズのイメージ (デバイス単位) に使用されます。 画像は正方形になります。|
|\<サイズ範囲>|最小サイズ、最大サイズ|ソースは、MinSize から MaxSize (デバイス単位) までのイメージに使用されます。 画像は正方形になります。|
|\<分析コード>|Width、Height|ソースは、指定された幅と高さのイメージ (デバイス単位) に使用されます。|
|\<ディメンション範囲>|最小幅、最小高さ、<br /><br /> 最大幅、最大高さ|ソースは、最小幅/高さから最大幅/高さ (デバイス単位) までの画像に使用されます。|

 ソース>要素には、マネージ アセンブリ\<ではなくネイティブ アセンブリから読み込まれる\<ソース>を定義するオプションの NativeResource> サブ要素を含めることもできます。 \<

```xml
<NativeResource Type="type" ID="int" />
```

|||
|-|-|
|**属性**|**定義**|
|種類|[必須]ネイティブ リソースの種類 (XAML または PNG)|
|id|[必須]ネイティブ リソースの整数 ID 部分|

 **Imagelist**

 ImageList>要素は\<、単一のストリップで返すことができるイメージのコレクションを定義します。 ストリップは必要に応じて、オンデマンドで構築されます。

```xml
<ImageList>
      <ContainedImage Guid="guid" ID="int" External="true/false" />
      <!-- optional additional ContainedImage elements -->
 </ImageList>
```

|||
|-|-|
|**属性**|**定義**|
|Guid|[必須]イメージ モニカーの GUID 部分|
|id|[必須]イメージ モニカーの ID 部分|
|外部|[オプション、デフォルトの false]イメージ モニカーが現在のマニフェスト内のイメージを参照するかどうかを示します。|

 含まれているイメージのモニカーは、現在のマニフェストで定義されているイメージを参照する必要はありません。 含まれているイメージがイメージ ライブラリに見つからない場合は、その場所に空白のプレースホルダー イメージが使用されます。

## <a name="how-to-use-the-tool"></a>ツールの使用方法
 **カスタム イメージ マニフェストの検証**

 カスタム マニフェストを作成するには、マニフェストを自動生成するマニフェストのリソース ツールを使用することをお勧めします。 カスタム マニフェストを検証するには、イメージ ライブラリ ビューアーを起動し、[ファイル] > [パスを設定] を選択します。をクリックして、[ディレクトリの検索]ダイアログを開きます。 このツールは検索ディレクトリを使用してイメージ マニフェストを読み込みますが、マニフェストにイメージを含む .dll ファイルを見つけるために使用するので、このダイアログボックスにはマニフェストと DLL ディレクトリの両方を含める必要があります。

 ![イメージ ライブラリ ビューアーの検索](../../extensibility/internals/media/image-library-viewer-search.png "イメージ ライブラリ ビューアーの検索")

 [**追加.** ] をクリックして、マニフェストとそれに対応する DLL を検索する新しい検索ディレクトリを選択します。 ツールはこれらの検索ディレクトリを記憶し、ディレクトリをオンまたはオフにすることでオンまたはオフにすることができます。

 既定では、ツールは Visual Studio のインストール ディレクトリを検索し、それらのディレクトリを検索ディレクトリの一覧に追加しようとします。 ツールが見つけられないディレクトリを手動で追加できます。

 すべてのマニフェストが読み込まれると、このツールを使用して、**background**イメージの背景色 **、DPI、****ハイ コントラスト**、または**グレースケーリング**を切り替えることができます。

 ![イメージ ライブラリ ビューアーの背景](../../extensibility/internals/media/image-library-viewer-background.png "イメージ ライブラリ ビューアーの背景")

 背景色は、明るい、暗い、またはカスタム値に設定できます。 [カスタム色] を選択すると、色選択ダイアログが開き、後で簡単に呼び出しできるように、そのカスタム色を背景コンボボックスの下部に追加します。

 ![イメージ ライブラリ ビューアーのカスタム色](../../extensibility/internals/media/image-library-viewer-custom-color.png "イメージ ライブラリ ビューアーのカスタム色")

 イメージ モニカーを選択すると、そのモニカーの背後にある各実際のイメージの情報が右側の [イメージの詳細] ペインに表示されます。 このペインでは、名前または生の GUID:ID 値でモニカーをコピーすることもできます。

 ![イメージ ライブラリ ビューアーのイメージの詳細](../../extensibility/internals/media/image-library-viewer-image-details.png "イメージ ライブラリ ビューアーのイメージの詳細")

 各画像ソースに表示される情報には、表示する背景の種類、テーマを設定できるかどうか、ハイ コントラストをサポートするかどうか、その画像が有効なサイズかどうか、サイズに依存しないかどうか、ネイティブ アセンブリからイメージが取得されるかどうかなどが含まれます。

 ![イメージ ライブラリ ビューアーにテーマを設定可能](../../extensibility/internals/media/image-library-viewer-can-theme.png "イメージ ライブラリ ビューアーにテーマを設定可能")

 イメージ マニフェストを検証する場合は、マニフェストとイメージ DLL を実際の場所に配置することをお勧めします。 これにより、相対パスが正しく機能していること、およびイメージ ライブラリがマニフェストとイメージ DLL を見つけて読み込むことができることを確認します。

 **イメージ カタログの検索既知のモニカー**

 Visual Studio のスタイル設定に合わせて、Visual Studio 拡張機能は、独自のイメージを作成して使用するのではなく、Visual Studio イメージ カタログ内のイメージを使用できます。 この方法では、これらのイメージを維持する必要がないため、イメージに高 DPI バッキング イメージが含まれるため、Visual Studio でサポートされているすべての DPI 設定で正しく表示される必要があります。

 イメージ ライブラリ ビューアーを使用すると、ユーザーがイメージ アセットを表すモニカーを見つけ、そのモニカーをコードで使用できるように、マニフェストを検索できます。 画像を検索するには、検索ボックスに目的の検索語を入力し、Enter キーを押します。 下部のステータス バーには、すべてのマニフェストの画像全体から見つかった一致の数が表示されます。

 ![イメージ ライブラリ ビューアーのフィルター](../../extensibility/internals/media/image-library-viewer-filter.png "イメージ ライブラリ ビューアーのフィルター")

 既存のマニフェストでイメージ モニカーを検索する場合は、Visual Studio イメージ カタログのモニカー、その他の意図的にパブリックにアクセス可能なモニカー、または独自のカスタム モニカーのみを検索して使用することをお勧めします。 非パブリック モニカーを使用すると、非パブリック モニカーやイメージが変更または更新された場合、カスタム UI が破損したり、イメージが予期しない方法で変更されたりすることがあります。

 さらに、GUID による検索も可能です。 この種類の検索は、リストを 1 つのマニフェストにフィルター処理する場合や、マニフェストに複数の GUID が含まれている場合はマニフェストの単一サブセクションにフィルター処理するのに役立ちます。

 ![イメージ ライブラリ ビューアーのフィルター GUID](../../extensibility/internals/media/image-library-viewer-filter-guid.png "イメージ ライブラリ ビューアーのフィルター GUID")

 最後に、IDによる検索も可能です。

 ![イメージ ライブラリ ビューアーのフィルター ID](../../extensibility/internals/media/image-library-viewer-filter-id.png "イメージ ライブラリ ビューアーのフィルター ID")

## <a name="notes"></a>Notes

- 既定では、Visual Studio のインストール ディレクトリに存在するいくつかのイメージ マニフェストがツールによってプルされます。 公に消費可能なモニカーを持っている唯一のものは、**マニフェスト**です。 GUID: ae27a6b0-e345-4288-96df-5eaf394ee369 (カスタム マニフェストでこの GUID をオーバーライド**しない**) 型: 既知の Monikers

- ツールは、起動時に検出されたすべてのイメージ マニフェストを読み込もうとするため、アプリケーションが実際に表示されるまでに数秒かかる場合があります。 マニフェストの読み込み中に、遅い場合や応答しない場合もあります。

## <a name="sample-output"></a>サンプル出力
 このツールは出力を生成しません。
