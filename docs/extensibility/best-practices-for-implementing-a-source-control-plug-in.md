---
title: "ソース管理プラグインを実装するためのベスト プラクティス | Microsoft Docs"
ms.custom: ""
ms.date: "12/15/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-sdk"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "ソース管理プラグイン、ベスト プラクティスします。"
  - "ソース管理プラグインのベスト プラクティス"
  - "プラグインのソース管理 [Visual Studio SDK]"
ms.assetid: 85e73b73-29dc-464f-8734-ed308742c435
caps.latest.revision: 17
caps.handback.revision: 17
ms.author: "gregvanl"
manager: "ghogen"
---
# ソース管理プラグインを実装するためのベスト プラクティス
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

次の技術的な詳細を使用して、ソース管理のプラグインを確実に実装できる [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)]です。  
  
## メモリ管理に関する問題  
 ほとんどの場合、呼び出し元では、統合開発環境 \(IDE\) は解放し、メモリを割り当てます。 ソース管理プラグインでは、呼び出し元が割り当てたバッファーに文字列およびその他の項目を返します。 例外は、発生した特定の関数の説明に記録されます。  
  
## ファイル名の配列  
 ファイルの配列が渡されるときに、連続したファイル名の配列としては渡されません。 ファイル名へのポインターの配列として渡されます。 など、 [SccGet](../extensibility/sccget-function.md), 、によって、ファイル名が渡される、 `lpFileNames` パラメーター、場所 `lpFileNames` へのポインターでは実際には、 `char **`です。`lpFileNames`\[0\]、名へのポインターは、 `lpFileNames`\[1\] と 2 番目の名前へのポインターです。  
  
## 大規模なモデル  
 すべてのポインターは、16 ビットのオペレーティング システムであっても、32 ビットです。  
  
## 完全修飾パス  
 場所のファイル名またはディレクトリが引数として指定され、完全修飾パスまたは UNC パス、最後の円記号なしでする必要があります。 ソース管理の場合は、基になるソース管理システムの要件は、相対パスに変換するプラグインの役目です。  
  
## 登録済みの DLL の完全修飾パスを指定します。  
 IDE では、相対パス \(たとえば、.\\NewProvider.dll\) からの Dll が読み込まれない。 \(たとえば、C:\\Providers\\NewProvider.dll\) DLL の完全なパスを指定する必要があります。 この要件は、承認されていないか、権限を借用したソース管理 Dll の読み込みを実行できないようにして、IDE のセキュリティを強化します。  
  
## ソース管理プラグインをインストールするときに、既存の VSSCI プラグインの確認します。  
 ソース管理プラグインをインストールすることを計画したユーザーが、既存のソース管理プラグイン、コンピューターにインストールされている既にあります。 インストール \(セットアップ\) プログラム プラグインを作成する必要がありますを決定する、関連するレジストリ キーの既存の値があるかどうか。 これらのキーが設定されている場合、インストール プログラムする必要があります、ユーザーに求めます既定のソース管理プラグインとプラグインの登録し、既にインストールされている 1 つを置換するかどうか。  
  
## 結果のエラー コードとレポート  
 `SCC_OK` 制御を返すソース制御関数のコードは、すべてのファイルの操作が成功したことを示します。 操作が失敗すると、発生した最後のエラー コードを返すことが期待されます。  
  
 レポートのルールでは、IDE でエラーが発生した場合、IDE をレポートします。 ソース管理システムでエラーが発生した場合は、ソース管理プラグインをレポートする担当します。 たとえば、「ファイルが現在選択されていません」が報告されます、IDE でプラグインによって報告される「このファイルは既にチェック アウト」が。  
  
## Context 構造体  
 呼び出し時に、 [SccInitialize](../extensibility/sccinitialize-function.md), 、呼び出し元のパス、 `ppvContext` void を初期化されていないハンドルのパラメーターです。 ソース管理プラグインは、このパラメーターを無視できますか、どのような構造体に割り当てる渡されたポインターにすることで、ポインターを置きます。 IDE では、この構造体を認識しませんが、プラグインで他のすべての呼び出しにこの構造体へのポインターを渡します。 これにより、グローバル変数を使用することがなく関数の呼び出し間で永続化されるグローバル状態情報を維持するために使用できるプラグインに役に立つコンテキスト キャッシュ情報です。 プラグインへの呼び出しにある構造体を解放する、 [SccUninitialize](../extensibility/sccuninitialize-function.md)です。  
  
 場合プラグインのセット、 `SCC_CAP_REENTRANT` 内のビット、 [SccInitialize](../extensibility/sccinitialize-function.md) \(具体的には、 `lpSccCaps` パラメーター\)、開かれているすべてのプロジェクトを追跡する複数の context 構造体を使用します。  
  
## ビットフラグおよびその他のコマンド オプション  
 各コマンドに対してなど、 [SccGet](../extensibility/sccget-function.md), 、IDE は、コマンドの動作を変更する多くのオプションを指定できます。  
  
 API は、特定のオプションを使用して、IDE での設定を使用して、 `fOptions` パラメーター。 これらのオプションの説明を [特定のコマンドで使用されるビットフラグ](../extensibility/bitflags-used-by-specific-commands.md) に影響が及ぶコマンドと共に示します。 一般に、これらは、オプションをユーザーは省略されますです。  
  
 ソース管理プラグインの間で大きく異なるために、この方法で最もユーザー構成可能なオプションの設定は定義されていません。 そのため、推奨されるメカニズムは、 **詳細** \] ボタンをクリックします。 などの **取得** \] ダイアログ ボックスで、IDE を表示情報のみを認識しているが、表示することも、 **詳細** 場合は、プラグインがあるこのコマンドのオプション ボタンをクリックします。 ユーザーがクリックしたとき、 **詳細** \] ボタン、IDE の呼び出し、 [SccGetCommandOptions](../extensibility/sccgetcommandoptions-function.md) ビットフラグまたは日付\/時刻などの情報のユーザー入力を求めるプラグインのソース管理を有効にします。 プラグインに行っている間に渡される構造にこの情報を返す、 `SccGet` コマンドです。  
  
## 参照  
 [ソース管理プラグイン](../extensibility/source-control-plug-ins.md)   
 [ソース管理プラグインの作成](../extensibility/internals/creating-a-source-control-plug-in.md)