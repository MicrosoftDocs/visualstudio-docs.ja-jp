---
title: 発行するファイルを指定する (ClickOnce)
description: ファイルを除外する方法、データ ファイルまたは前提条件としてファイルにマーク付けする方法、ClickOnce アプリケーションの条件付きインストールのためにグループを作成する方法について説明します。
ms.custom: SEO-VS-2020
ms.date: 11/04/2016
ms.topic: how-to
f1_keywords:
- Microsoft.VisualStudio.Publish.BaseProvider.Dialog.File
dev_langs:
- VB
- CSharp
- C++
helpviewer_keywords:
- ClickOnce deployment, file exclusion
- files, publishing via ClickOnce
ms.assetid: 579c134a-d50f-4e0c-8e05-2a4ff654896a
author: mikejo5000
ms.author: mikejo
manager: jmartens
ms.workload:
- multiple
ms.openlocfilehash: d093438dc30bee08abbc45c6cf3c2555fbe208c6
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/08/2021
ms.locfileid: "99887485"
---
# <a name="how-to-specify-which-files-are-published-by-clickonce"></a>方法: ClickOnce で発行されるファイルを指定する
[!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] アプリケーションを発行するときには、プロジェクト内のコード以外のすべてのファイルがアプリケーションと共に配置されます。 場合によっては、特定のファイルを公開したくない、またはする必要がないことも、条件に基づいて特定のファイルをインストールしたいこともあります。 Visual Studio には、ファイルの除外、データ ファイルまたは前提条件としてのファイルへのマーク付け、条件付きインストールのためのファイル グループの作成を行う機能が用意されています。

 [!INCLUDE[ndptecclick](../deployment/includes/ndptecclick_md.md)] アプリケーションのファイルは、 **[プロジェクト デザイナー]** の **[発行]** ページからアクセスできる **[アプリケーション ファイル]** ダイアログ ボックスで管理されます。

 最初に、 **(必須)** という名前の 1 つのファイル グループがあります。 追加のファイル グループを作成し、そこにファイルを割り当てることができます。 アプリケーションを実行するために必要なファイルの **ダウンロード グループ** は変更できません。 たとえば、アプリケーションの .exe やデータ ファイルとしてマークされているファイルは、 **(必須)** グループに属している必要があります。

 ファイルの既定の発行状態値には、 **(自動)** とタグが付けられます。 たとえば、アプリケーションの .exe の発行状態は、既定で **インクルード (自動)** になります。

 **[ビルド アクション]** プロパティが **[コンテンツ]** に設定されているファイルは、アプリケーション ファイルとして指定されて、既定でインクルードされるとマークされます。 これらは、データ ファイルとしてインクルード、除外、またはマークすることができます。 ただし、次のような例外があります。

- SQL Database ( *.mdf* および *.mdb*) ファイルや XML ファイルなどのデータ ファイルは、既定でデータ ファイルとしてマークされます。

- 参照を追加すると、アセンブリ ( *.dll* ファイル) への参照は次のように指定されます。 **[ローカルにコピー]** が **[False]** の場合、既定では、アプリケーションがインストールされる前に GAC 内に存在する必要がある前提条件アセンブリ (**前提条件 (自動)** ) としてマークされます。 **[ローカルにコピー]** が **[True]** の場合、アセンブリは既定でアプリケーション アセンブリ (**インクルード (自動)** ) としてマークされて、インストール時にアプリケーション フォルダーにコピーされます。 **[アプリケーション ファイル]** ダイアログ ボックスに COM 参照が ( *.ocx* ファイルとして) 表示されるのは、その **[分離]** プロパティが **[True]** に設定されている場合のみです。 既定では、これはインクルードされます。

### <a name="to-add-files-to-the-application-files-dialog-box"></a>[アプリケーション ファイル] ダイアログ ボックスにファイルを追加するには

1. **[ソリューション エクスプローラー]** でデータ ファイルを選択します。

2. プロパティ ウィンドウで **[ビルド アクション]** プロパティを **[コンテンツ]** 値に変更します。

### <a name="to-exclude-files-from-clickonce-publishing"></a>ClickOnce 発行からファイルを除外するには

1. **ソリューション エクスプローラー** でプロジェクトを選択し、 **[プロジェクト]** メニューの **[プロパティ]** をクリックします。

2. **[公開]** タブをクリックします。

3. **[アプリケーション ファイル]** ボタンをクリックして **[アプリケーション ファイル]** ダイアログ ボックスを開きます。

4. **[アプリケーション ファイル]** ダイアログ ボックスで、除外するファイルを選択します。

5. **[発行の状態]** フィールドで、ドロップダウン リストから **[除外]** を選択します。

### <a name="to-mark-files-as-data-files"></a>ファイルをデータ ファイルとしてマークするには

1. **ソリューション エクスプローラー** でプロジェクトを選択し、 **[プロジェクト]** メニューの **[プロパティ]** をクリックします。

2. **[公開]** タブをクリックします。

3. **[アプリケーション ファイル]** ボタンをクリックして **[アプリケーション ファイル]** ダイアログ ボックスを開きます。

4. **[アプリケーション ファイル]** ダイアログ ボックスで、データとしてマークするファイルを選択します。

5. **[発行の状態]** フィールドで、ドロップダウン リストから **[データ ファイル]** を選択します。

### <a name="to-mark-files-as-prerequisites"></a>ファイルを前提条件としてマークするには

1. **ソリューション エクスプローラー** でプロジェクトを選択し、 **[プロジェクト]** メニューの **[プロパティ]** をクリックします。

2. **[公開]** タブをクリックします。

3. **[アプリケーション ファイル]** ボタンをクリックして **[アプリケーション ファイル]** ダイアログ ボックスを開きます。

4. **[アプリケーション ファイル]** ダイアログ ボックスで、前提条件としてマークするアプリケーション アセンブリ ( *.dll* ファイル) を選択します。 一覧にアプリケーション アセンブリが表示されるためには、アプリケーションにそのアプリケーション アセンブリへの参照が必要であることに注意してください。

5. **[発行の状態]** フィールドで、ドロップダウン リストから **[前提条件]** を選択します。

### <a name="to-add-a-new-file-group"></a>新しいファイル グループを追加するには

1. **ソリューション エクスプローラー** でプロジェクトを選択し、 **[プロジェクト]** メニューの **[プロパティ]** をクリックします。

2. **[公開]** タブをクリックします。

3. **[アプリケーション ファイル]** ボタンをクリックして **[アプリケーション ファイル]** ダイアログ ボックスを開きます。

4. **[アプリケーション ファイル]** ダイアログ ボックスで、新しいグループに含めるファイルの **[グループ]** フィールドを選択します。

    > [!NOTE]
    > **[アプリケーション ファイル]** ダイアログ ボックスにファイル名が表示されるようにするには、ファイルの **[ビルド アクション]** プロパティを **[コンテンツ]** に設定しておく必要があります。

5. **[ダウンロード グループ]** フィールドで、ドロップダウン リストから **[\<New...>]** を選択します。

6. **[新しいグループ]** ダイアログ ボックスで、グループの名前を入力し、 **[OK]** をクリックします。

### <a name="to-add-a-file-to-a-group"></a>グループにファイルを追加するには

1. **ソリューション エクスプローラー** でプロジェクトを選択し、 **[プロジェクト]** メニューの **[プロパティ]** をクリックします。

2. **[公開]** タブをクリックします。

3. **[アプリケーション ファイル]** ボタンをクリックして **[アプリケーション ファイル]** ダイアログ ボックスを開きます。

4. **[アプリケーション ファイル]** ダイアログ ボックスで、新しいグループに含めるファイルの **[グループ]** フィールドを選択します。

5. **[ダウンロード グループ]** フィールドで、ドロップダウン リストからグループを選択します。

    > [!NOTE]
    > アプリケーションを実行するために必要なファイルの **ダウンロード グループ** は変更できません。

## <a name="see-also"></a>関連項目
- [ClickOnce アプリケーションの発行](../deployment/publishing-clickonce-applications.md)
- [方法: 発行ウィザードを使用して ClickOnce アプリケーションを発行する](../deployment/how-to-publish-a-clickonce-application-using-the-publish-wizard.md)