---
title: Visual Studio のデバッグの概要 | Microsoft Docs
ms.custom: ''
ms.date: 12/14/2017
ms.technology:
- vs-ide-debug
ms.topic: conceptual
ms.assetid: c3a14d28-d811-4ff3-bd09-21dce14025ca
author: mikejo5000
ms.author: mikejo
manager: douge
ms.workload:
- multiple
ms.openlocfilehash: 085ea00f95124eb6ae2ed7ccc96eed692be0d649
ms.sourcegitcommit: 6a9d5bd75e50947659fd6c837111a6a547884e2a
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/16/2018
---
# <a name="get-started-with-debugging-in-visual-studio"></a>Visual Studio のデバッグの概要
Visual Studio は、プロジェクトのビルドとデバッグ ツールの強力な統合セットを提供します。 このトピックでは、デバッグ UI 機能の最も基本的なセットの使用を開始する方法が説明されます。  

Visual Studio をまだインストールしていない場合は、[Visual Studio のダウンロード](https://aka.ms/vsdownload?utm_source=mscom&utm_campaign=msdocs) ページに移動し、無料試用版をインストールしてください。

## <a name="my-code-doesnt-work-help-me-visual-studio"></a>コードが機能しません。 Visual Studio の助けが必要です。  
 エディターを見つけ、コードをいくらか作成しました。 これから、そのコードのデバッグを開始します。 ほとんどの IDE と同じように、Visual Studio には、2 つのデバッグ フェーズがあります。1 つは、コードをビルドして、プロジェクト エラーとコンパイラ エラーをキャッチして解決するフェーズです。もう 1 つは、環境でそのコードを実行し、実行時エラーと動的エラーをキャッチして解決するフェーズです。  

### <a name="build-your-code"></a>コードをビルドする  
 ビルドの構成には、**デバッグ**と**リリース** の 2 つの基本的な種類があります。 最初の構成では、より低速で大きな実行可能ファイルが生成されます。対話型の実行時デバッグ機能はより豊富ですが、これが出荷されることはありません。 2 つ目のビルドはより高速で、より最適化された実行可能ファイルです。(少なくともコンパイラの観点から) このビルドが出荷に適しています。 既定のビルド構成は、**デバッグ**です。

プロジェクトをビルドする最も簡単な方法は **F7** キーを押す方法ですが、メイン メニューから **[ビルド]、[ソリューションのビルド]** の順に選択してビルドを開始することもできます。  

 ![Visual Studio ビルド プロジェクト メニューの選択](../ide/media/vs_ide_gs_debug_build_menu_item.png "Vs_ide_gs_debug_build_menu_item")  

 ビルド プロセスは、Visual Studio UI の下部にある **[出力]** 状況ウィンドウで監視できます。 エラー、警告、ビルド操作がここに表示されます。 エラーがあると (または構成されたレベルより上の警告があると)、ビルドは失敗します。 エラーと警告をクリックすると、それが発生した行に移動できます。 **F7** をもう一度押すか (エラーがあるファイルのみを再コンパイルする場合)、**Ctrl + Alt + F7** を押してプロジェクトを再ビルドします (クリーンかつ完全な再ビルドの場合)。  

 エディターの下の結果ウィンドウに 2 つのビルド用のタブ付きウィンドウが表示されます。1 つは [**出力]** ウィンドウで、このウィンドウには生のコンパイラの出力が表示されます (エラー メッセージを含む)。もう 1 つは **[エラー一覧]** ウィンドウで、このウィンドウにはすべてのエラーと警告の、ソートおよびフィルターが可能な一覧が表示されます。  

 成功すると、**[出力]** ウィンドウに次のような結果が表示されます。  

 ![Visual Studio の成功したビルドの出力](../ide/media/vs_ide_gs_debug_success_build.PNG "vs_ide_gs_debug_success_build")  

### <a name="review-the-error-list"></a>エラー一覧の確認  
 前にコンパイルが成功したコードに変更を加えた場合、エラーが出ることが少なくありません。 コーディングに不慣れな場合には、その可能性が高くなります。 エラーは、単純な構文エラーや変数名の間違いのようにわかりやすいものもあれば、手がかりが暗号のようなコードしかないようなわかりにくい場合もあります。 問題を見やすくするには、**[出力]** ウィンドウの下部に移動し、**[エラー一覧]** タブをクリックします。これにより、プロジェクトのエラーと警告がより整理されて見やすくなり、いくつかの追加オプションも表示されます。  

 ![Visual Studio の出力とエラーの一覧](../ide/media/vs_ide_gs_debug_bad_build_error_list.PNG "Vs_ide_gs_debug_bad_build_error_list")  

 **[エラー一覧]** ウィンドウのエラー行をクリックし、エラーが発生した行にジャンプします。 (右上の **[クイック起動]** バーをクリックし、そこに "行番号" を入力し、**Enter** キーを押して、行番号をオンにします。 これは、**[オプション]** ウィンドウ エントリを表示する最も簡単な方法です。そのウィンドウで行番号をオンにすることができます。 **[クイック起動]** バーの使用について学ぶと、UI をクリックする回数を減らすことができます。)  

 ![Visual Studio の行番号を含むエディター](../ide/media/vs_ide_gs_debug_line_numbers.png "Vs_ide_gs_debug_line_numbers")  

 ![Visual Studio の行番号オプション](../ide/media/vs_ide_gs_debug_options_line_numbers.png "Vs_ide_gs_debug_options_line_numbers")  

 **Ctrl キーを押しながら G キー**を押すと、エラーが発生した行番号にすぐにジャンプできます。  

 エラーは、赤い "波線" の下線によって示されます。 その上に移動すると、追加の詳細が表示されます。 修正を加え (これによって新たなエラーが入り込む可能性はあります)、別の場所に移動します。 (これを "回帰" と呼びます。)  

 ![Visual Studio のエラー ホバー](../ide/media/vs_ide_gs_debug_error_hover1.png "Vs_ide_gs_debug_error_hover1")  

 エラー一覧を確認し、コード内のすべてのエラーを解決します。  

 ![Visual Studio の [デバッグ エラー] ウィンドウ](../ide/media/vs_ide_gs_debug_error_list.PNG "Vs_ide_gs_debug_error_list")  

### <a name="review-errors-in-detail"></a>エラーの詳細の確認  
 コンパイラの観点からすると、多くのエラーはあまり意味がない可能性があります。 その場合、追加情報が必要です。 **[エラー一覧]** ウィンドウから、対応する入力行を右クリックし、コンテキスト メニューから **[エラーのヘルプを表示**] 選択することで、Bing の自動検索を実行して、エラー (または警告) に関する詳細を入手することができます。  

 ![Visual Studio のエラー一覧の Bing 検索](../ide/media/vs_ide_gs_debug_error_list_error_help.png "Vs_ide_gs_debug_error_list_error_help")  

 これにより、エラー コードとテキストの Bing 検索の結果をホストするタブが Visual Studio 内で起動します。 インターネット上の異なるさまざまなソースからの結果を入手できますが、すべてが役立つ情報であるとは限りません。  

 **[エラー一覧]** の **[コード]** 列のハイパーリンク付きのエラー コード値をクリックすることもできます。 これにより、エラー コードだけを探す Bing 検索が起動します。  

### <a name="use-light-bulbs-to-fix-or-refactor-code"></a>電球を使用したコードの修正またはリファクタリング  
 電球は、Visual Studio の新しい機能です。電球を使用すると、コード インラインをリファクタリングできます。 これは、一般的な警告を迅速かつ効率的に修正する簡単な方法です。 電球にアクセスするには、警告の波線を右クリックします (または、**Ctrl キーを押しながら**警告の波線をクリックします)。 その後、**[クイック操作]** を選択します。  

 ![Visual Studio 電球クイック オプション](../ide/media/vs_ide_gs_debug_light_bulb1.png "Vs_ide_gs_debug_light_bulb1")  

 そのコード行に適用できる修正またはリファクタの一覧が表示されます。  

 ![Visual Studio 電球プレビュー](../ide/media/vs_ide_gs_debug_light_bulb_preview_changes.PNG "Vs_ide_gs_debug_light_bulb_preview_changes")  

 電球は、コード アナライザーが、コードの修正、リファクタリング、改善の機会があると判断したときはいつでも使用できます。 任意のコード行をクリックし、右クリックしてコンテキスト メニューを開き、**[クイック オプション]** を選択します (効率的な方法としては、**Ctrl キーを押しながら**クリックする方法もあります)。 リファクタリングまたは改善の選択肢がある場合は表示されます。ない場合は、IDE の左下にメッセージ "`No quick options available here`" が表示されます。  

 ![Visual Studio 電球 'オプションなし' text](../ide/media/vs_ide_gs_debug_light_bulb_no_options.PNG "Vs_ide_gs_debug_light_bulb_no_options")  

 慣れてくれば、矢印キーと **Ctrl キーを押しながら**のキー操作で簡単に操作できます。 を使用して、クイック オプションのリファクタリング機会をチェックし、コードをクリーンアップできます。  

 電球の詳細については、「[電球を使ってクイック操作をする](../ide/perform-quick-actions-with-light-bulbs.md)」を参照してください。  

### <a name="debug-your-running-code"></a>実行されているコードのデバッグ  
 これでコードが正常にビルドされ、クリーンアップが実行されたので、次に、**F5 キー**を押すか **[デバッグ]、[デバッグの開始]** の順に選択してコードを実行します。 これにより、デバッグ環境でアプリが開始され、その動作を詳しく監視できるようになります。 Visual Studio IDE は、アプリの実行中に変更されます。**[出力]** ウィンドウは、2 つの新しいウィンドウに置き換えられます (既定のウィンドウ構成)。その 1 つは **[自動変数/ローカル/ウォッチ]** タブ付きウィンドウで、もう 1 つは **[呼び出し履歴/ブレークポイント/例外設定/出力]** タブ付きウィンドウです。 これらのウィンドウには複数のタブがあり、そのタブでアプリの変数、スレッド、呼び出し履歴、その他さまざまな動作を実行と同時に調べ、評価することができます。  

 ![Visual Studio の自動変数ウィンドウと呼び出し履歴ウィンドウ](../ide/media/vs_ide_gs_debug_autos_and_call_stack.PNG "Vs_ide_gs_debug_autos_and_call_stack")  

 **Shift キーを押しながら F5 キー**を押すか、**[停止]** ボタンをクリックすると、アプリを一時停止できます。 あるいは、単にアプリのメイン ウィンドウを閉じます (またはコマンド ライン ダイアログ)。  

 コードが完璧に、予想通りに実行されれば、成功です。 ただし、ハングまたはクラッシュする場合、あるいは予期しない結果になる場合、問題の原因を見つけ、バグを修正する必要があります。  

### <a name="set-simple-breakpoints"></a>単純なブレークポイントの設定  
 ブレークポイントは、信頼できるデバッグの最も基本的で重要な機能です。 ブレークポイントは、Visual Studio が実行コードを中断する場所を示します。これにより、変数の値またはメモリの動作を確認したり、コードの分岐が実行されるかどうかを確認したりすることができます。 ブレークポイントを設定して削除した後、プロジェクトを再ビルドする必要はありません。  

 中断させたい場所の行の外側の余白をクリックするか、**F9 キー**を押して、コードの現在の行にブレークポイントを設定します。 コードを実行すると、このコード行の命令が実行される前に一時停止 (*中断*) します。  

 ![Visual Studio ブレークポイント](../ide/media/vs_ide_gs_debug_breakpoint1.png "Vs_ide_gs_debug_breakpoint1")   

 ブレークポイントの一般的な使用は、次のとおりです。  

1.  クラッシュまたはハングの原因を絞り込み、失敗の原因になっていると思われるメソッド呼び出しのコード全体またはその周辺に散布する。 デバッガーでコードを実行するときは、問題の原因になっているコード行が見つかるまで、そこに近づくよう、コードのブレークポイントを削除してリセットしていきます。  デバッガーでコードを実行する方法については、次のセクションを参照してください。

2.  新しいコードを導入する際、その先頭にブレークポイントを設定し、コードを実行し、予想どおり動作するかを確かめます。

3.  複雑な動作を実装している場合は、プログラムが中断したときに変数の値やデータを調べることができるよう、アルゴリズムのコードに対してブレークポイントを設定します。  

4.  C または C++ コードを作成している場合、ブレークポイントを使用してコードを停止します。これにより、メモリに関連した障害をデバッグするときに、アドレス値 (NULL の検索) および参照カウントを調べることができます。  

 ブレークポイントの詳細については、「[ブレークポイントの使用](../debugger/using-breakpoints.md)」を参照してください。  

### <a name="inspect-your-code-at-run-time"></a>実行時のコードの検査  
 実行中のコードがブレークポイントに達して一時停止するとき、黄色でマークされたコード行 (現在のステートメント) はまだ実行されていません。 この時点で、現在のステートメントを実行し、変更された値を確認することができます。 いくつかの*ステップ* コマンドを使用して、デバッガーでコードを実行することができます。 マークされているコードがメソッド呼び出しの場合、**F11 キー**を押してステップ インすることができます。 **F10 キー**を押して、コード行を "*ステップ オーバー*" することもできます。 コードをステップ実行するその他のコマンドと詳細については、「[Navigate code with the debugger](../debugger/navigating-through-code-with-the-debugger.md)」(デバッガーによるコードの操作) を参照してください。

 ![Visual Studio の実行時の値の検査](../ide/media/vs_ide_gs_debug_hit_breakpoint.PNG "vs_ide_gs_debug_inspect_value")

 前の図では、**F10 キー**または **F11 キー**を押してデバッガーの 1 つのステートメントを進めることができます (この例ではメソッドの呼び出しがないため、両方のコマンドが同じ結果になります)。

 デバッガーが一時停止されている間は、変数と呼び出し履歴を調べ、内容を確認することができます。 範囲内の値は、予期していたとおりのものですか。 呼び出しの順序は正しいですか。  

 ![Visual Studio の実行時の値の検査](../ide/media/vs_ide_gs_debug_inspect_value.PNG "vs_ide_gs_debug_inspect_value")  

 変数の上に移動し、その変数に現在格納されている値と参照を確認します。 表示される値が、予期していたものと異なる場合、先行するコード行または呼び出しているコード行にバグがある可能性があります。  詳細については、[デバッガーの使用方法の詳細に関するページ](../debugger/getting-started-with-the-debugger.md)を参照してください。

 さらに、Visual Studio では **[診断ツール]** ウィンドウが表示されます。このウィンドウで、時間の経過に伴うアプリの CPU 使用率とメモリ使用量の変化を監視できます。 後でアプリケーションの開発時に、CPU 使用量やメモリの割り当てが予想外に多くなった場合に、これらのツールを使用して調べることができます。 これを **[ウォッチ]** ウィンドウおよびブレークポイントとともに使用して、予期していなかった多量の使用の原因となっているもの、または解放されていないリソースを特定します。  詳細については、「[プロファイリング機能ツアー](../profiling/profiling-feature-tour.md)」を参照してください。

### <a name="run-unit-tests"></a>単体テストを実行する  
 単体テストは、コードのバグに対する保護の最前線です。単体テストを正しく実行すると、コードの単一の "ユニット" (通常は 1 つの関数) がテストされるので、通常はプログラム全体をデバッグするよりもはるかに簡単です。 Visual Studio は、マネージ コードおよびネイティブ コード用の Microsoft 単体テスト フレームワークをインストールします。 単体テスト フレームワークを使用して、単体テストを作成して実行し、そのテストの結果を報告します。 変更を加えたときは単体テストを再実行し、コードが正しく機能するかテストします。 Visual Studio Enterprise Edition を使用すると、ビルドの後でテストを自動的に実行できます。  

 最初に、「[IntelliTest でのコードの単体テストの生成](../test/generate-unit-tests-for-your-code-with-intellitest.md)」をお読みください。  

 Visual Studio の単体テストの詳細、およびより優れた品質のコードの作成に単体テストがどのように役立つかについては、「[単体テストの基本](../test/unit-test-basics.md)」をお読みください。  

### <a name="perform-static-code-analysis"></a>静的コード分析の実行  
 "静的コード分析" とは、"コード管理における実行時エラーまたは問題の発生原因となり得る一般的な問題を探して自動的にコードをチェックすること" のしゃれた言い方です。 ビルドの妨げとなる明らかなエラーをクリーンアップした後に静的コード分析を実行することを習慣づけてください。それによって生成される可能性がある警告に対処するための時間を取ってください。 将来の頭痛の種を取り除き、コード スタイルの手法をいくらか学ぶことになります。  

 **Alt キーを押しながら F11 キー**を押して (または、上部のメニューから **[分析]、[ソリューションでコード分析を実行]** の順に選択して) 静的コード分析を開始します。 多くのコードがある場合は時間がかかる可能性があります。  

 ![Visual Studio Code 分析メニュー項目](../ide/media/vs_ide_gs_debug_run_code_analysis.png "Vs_ide_gs_debug_run_code_analysis")  

 新しい警告または更新された警告があれば、IDE 下部の **[エラー一覧]** タブに表示されます。 警告をクリックして、その警告にジャンプします。  

 ![Visual Studio の警告を含むエラーの一覧](../ide/media/vs_ide_gs_debug_code_analysis_warning_error_list.PNG "vs_ide_gs_debug_code_analysis_warning_error_list")  

 警告は、赤色の波線ではなく、明るい黄緑色の波線で示されます。 その警告の上に移動すると詳細が表示されます。右クリックすると、コンテキスト メニューが表示され、修正やリファクタリング オプションを支援します。  

 ![Visual Studio Code 分析の警告ホバー](../ide/media/vs_ide_gs_debug_code_analysis_warning_hover.png "vs_ide_gs_debug_code_analysis_warning_hover")  

## <a name="see-also"></a>関連項目  
 [デバッガー機能ツアー](../debugger/debugger-feature-tour.md)  
 [デバッガーの使用方法の詳細](../debugger/getting-started-with-the-debugger.md)
