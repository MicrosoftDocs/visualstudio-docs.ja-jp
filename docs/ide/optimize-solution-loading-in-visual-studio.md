---
title: "Visual Studio のソリューション読み込みの最適化 | Microsoft Docs"
ms.custom: 
ms.date: 08/31/2017
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- startup time [Visual Studio]
- optimizing startup time [Visual Studio]
- speed up start time [Visual Studio]
ms.assetid: 84989983-84bc-4f81-97a8-2131e3a25138
caps.latest.revision: "4"
author: gewarren
ms.author: gewarren
manager: ghogen
f1_keywords: vs.performancecenter
ms.technology: vs-ide-general
ms.openlocfilehash: 2102fc026b566c89108f0d74dcf604020653e358
ms.sourcegitcommit: f40311056ea0b4677efcca74a285dbb0ce0e7974
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/31/2017
---
# <a name="optimize-solution-loading-in-visual-studio"></a>Visual Studio のソリューション読み込みの最適化
多くのソリューションには多数のプロジェクトが含まれており、ソリューションの読み込みにかかる時間に影響があります。 ただしチーム環境の場合、開発者はプロジェクトの一部について作業し、個別のプロジェクトすべてを読み込む必要がないことが一般的です。

Visual Studio 2017 は**ライトウェイト ソリューション ロード**をサポートしています。 Visual Studio 2017 でライトウェイト ソリューション ロード (LSL) モードが有効な場合、大規模なソリューション内のすべてのプロジェクトが読み込まれるのではなく、少数のプロジェクトが読み込まれます。 一般的に使用される IDE 機能のほとんどは LSL モードで動作し、ソリューション全体に対してビルド、検索、デバッグする機能も用意されています (LSL モードでサポートされていない主な機能は編集と続行です)。

> [!NOTE]
> このコンテンツは Visual Studio 2017 Update 3 に適用されます。

プロジェクト数が 30 個を超える大規模なソリューションの場合、LSL を使用すると、通常 (平均して) 2 倍の速さでソリューションが読み込まれます。 ほとんどの IDE 機能は LSL モードで動作しますが、一部の IDE 機能では、プロジェクト全体を読み込む必要があります。 このような場合は Visual Studio でソリューション全体が自動的に読み込まれるので、その機能を使用することができます。 最悪のシナリオでは、最終的にすべてのプロジェクトがライトウェイト モードで読み込まれることがあります。 

現在読み込まれていないプロジェクトに対して IDE 機能を使用すると、適切なプロジェクトが自動的に読み込まれます。 たとえば、開いていないプロジェクトのクラス ダイアグラムを作成、または開こうとすると、適切なプロジェクトが自動的に読み込まれます。 詳細な機能一覧については、以下のセクションを参照してください。

以下のセクションでは、ライトウェイト ソリューション ロードを有効にする方法について説明します。この機能を有効にするかどうかを判断するときにも参考になります。

## <a name="enable-or-disable-lightweight-solution-load"></a>ライトウェイト ソリューション ロードを有効または無効にする

ソリューション エクスプローラーでソリューション名を右クリックし、**[ライトウェイト ソリューション ロードを有効にする]** を選択します。 オプションを選択した後、ライトウェイト ソリューション ロードをアクティブ化するには、ソリューションを閉じてもう一度開く必要があります。

> [!NOTE]
> LSL を無効にする場合も同様の手順が適用されます。 ライトウェイト ソリューション ロードを無効にするには、**[ライトウェイト ソリューション ロードを無効にする]** を選択し、ソリューションを閉じてから開き直します。 

![ソリューション エクスプローラー](../ide/media/VSIDE_LSL_Solution_Setting.png)

## <a name="global_solution_load_settings"></a>ライトウェイト ソリューション ロードのグローバル設定を構成する

すべてのソリューションに対してグローバルに LSL を無効にするか構成するには、**[ツール]、[オプション]、[プロジェクトとソリューション]** の順に選択します。

![[ツール] - [オプション] ダイアログ ボックス](../ide/media/VSIDE_LightweightSolutionLoad.png)

## <a name="how-does-lightweight-solution-load-work-behind-the-scenes"></a>ライトウェイト ソリューション ロードのしくみ

ソリューションを読み込むと、Visual Studio に記録されているユーザーが前回開いたプロジェクトを基にして、そのプロジェクトのみが読み込まれます。 その他すべてのプロジェクトはソリューション エクスプローラーに表示されますが、読み込まれません。 プロジェクトを展開するか、プロジェクトを右クリックすると、そのプロジェクトが自動的に読み込まれます。 通常、プロジェクトの自動読み込みにかかる時間は 1 秒未満ですが、プロジェクトによっては長くかかることがあります。
ただし、Visual Studio では、ソリューション全体を操作する検索、デバッグ、ビルド、ソース管理などの IDE 機能を使用できます。 たとえば、ライトウェイト モードで少数のプロジェクトのみを読み込んでいる場合でも、ソリューション全体を検索できます。 

展開するプロジェクト数が増えると、展開されているプロジェクトの一覧が Visual Studio に記録されます。 ソリューションを開き直すと、前回展開していたプロジェクトが自動的に読み込まれます。

## <a name="visual-studio-prompts-developers-likely-to-see-significant-performance-gains"></a>大幅にパフォーマンスが向上する可能性を開発者に表示する Visual Studio の機能

Visual Studio のテレメトリを基にして、プロジェクト数が 30 個を超える大規模なソリューションで LSL モードを活用することができます。 そのため、大規模なソリューションで LSL モードを試すことをお勧めしています。 初めて LSL を試す開発者の多くは、日常的に利用するようになっています。 

Microsoft は Visual Studio の使用状況テレメトリを常に確認し、開発者が最大限に活用できるように LSL モードを提供するためのヒューリスティックを改善しています。 

## <a name="visual-studio-makes-recommendations-to-turn-on-lightweight-solution-load-based-on-heuristics"></a>Visual Studio は、ヒューリスティックに基づいてライトウェイト ソリューション ロードを有効にすることをお勧めしています。

Visual Studio の既定では、メリットがある可能性が高いユーザーの場合に LSL を有効にしています。 複数のソリューションがある場合、パフォーマンスの向上が大きい可能性が高いソリューションの場合に LSL モードが提供されます。 ライトウェイト モード オプションの **[Let Visual Studio decide]\(Visual Studio で自動的に決定する\)** (既定のオプション) を選択すると、ヒューリスティックに基づいてライトウェイト モードでソリューションから開かれることがあります。 ソリューションがライトウェイト モードかどうかはメッセージ バーに表示されます。 メッセージ バーが表示されると、詳細を確認するオプションや設定を更新するオプションがあります。

![ポップアップ ウィンドウ](../ide/media/VSIDE_LSL_Popup.png)

## <a name="ide-features-fully-supported-in-lightweight-mode"></a>ライトウェイト モードで完全にサポートされている IDE 機能

|特性|ライトウェイト モードでのサポート|
|-|-|-|
|IntelliSense|はい|
|検索|はい|
|デバッグ|はい|
|ビルド|はい|
|コード ナビゲーション (定義へ移動とすべての参照の検索)|はい|
|コード レンズ|はい|
|スタティック コード分析|はい|
|保存して発行|はい|
|参照の追加と削除|はい|
|マルチターゲット|はい|
|[IntelliTrace]|はい|
|Live Unit Testing|はい|
|IntelliTest|はい|
|Microsoft Fakes|はい|
|エディット コンティニュ|サポートなし|
|単体テスト|テスト プロジェクトの次にソリューション ビルドを読み込む必要があります|

## <a name="scenarios-in-which-lightweight-solution-loads-the-appropriate-projects-to-complete-the-operation"></a>操作を完了するためにライトウェイト ソリューションで適切なプロジェクトを読み込むシナリオ

ソリューション内のあるプロジェクトについて作業していない場合、プロジェクトはライトウェイト モードで読み込まれません。 一部の機能では、機能のシナリオをサポートするために追加のプロジェクトは自動的に読み込まれません (このようなシナリオの数を最小限にするために取り組んでいます )。このようなシナリオの場合、そのプロジェクト自体が読み込まれるか、必要に応じてそのプロジェクトを読み込むようにメッセージが表示されます。

|カテゴリ|懸案事項|
|-|-|-|
|単体テスト|現在読み込まれていないプロジェクトは [IntelliTest の作成] ウィザードと [単体テストの作成] ウィザードのテスト プロジェクト リストに表示されません。 </br>テストを作成するプロジェクトは読み込む必要があります (プロジェクト ノードを展開してプロジェクトを読み込むことができます)。|
|クラス ダイアグラム|プロジェクトのクラス ダイアグラムを作成するか開くと、そのプロジェクトと直接依存関係があるプロジェクトが自動的に読み込まれます。 </br>ソリューション全体が読み込まれていない場合、依存関係検証ダイアグラムから参照されている不使用のアーティファクトの検証は無効にされます。|

## <a name="scenarios-in-which-lightweight-solution-loads-the-entire-solution"></a>ライトウェイト ソリューションでソリューション全体を読み込むシナリオ 

Visual Studio の一部の機能については、シナリオをサポートするためにソリューション全体が自動的に読み込まれます。 このアクションで、常にすべての機能を利用できるようになります。 たとえば、一部の TFS 操作には、ソリューション全体が読み込まれる必要があります。 Visual Studio で完全な機能を提供するために、ソリューション全体が読み込まれます。

|カテゴリ|シナリオ|
|-|-|-|
|ソリューション ノードに対する TFS SCC コマンド|(ソリューション エクスプローラー内で) ソリューション ノードに対して SCC コマンドがトリガーされると、ソリューション全体が自動的に読み込まれてから、コマンドが完了します。|
|プロジェクトの読み込み|ソリューションに .NET Core プロジェクトと共有プロジェクトが含まれている場合、最初のソリューション読み込み時にこれらのプロジェクトが常に自動的に読み込まれます。 現在、これらのプロジェクトはライトウェイト モードをサポートしていません。|
|ソリューション構成マネージャー|ソリューション構成マネージャーまたはバッチ ビルドを使用すると、完全なエクスペリエンスを提供するためにソリューション全体が自動的に読み込まれます。|
|NuGet パッケージ マネージャー|NuGet パッケージ マネージャーのユーザー インターフェイス、つまり NuGet パッケージ マネージャー コンソールを開くと、完全なエクスペリエンスを提供するためにソリューション全体が自動的に読み込まれます。|

## <a name="known-issues"></a>既知の問題

LSL モードで動作せず、追加のプロジェクトやソリューション全体の読み込みが必要になる可能性があるシナリオがいくつかあります。 Microsoft では、このような場合の対応に積極的に取り組んでいます。 

|カテゴリ|懸案事項|回避策|
|-|-|-|-|
|IntelliSense|構成変更後 (たとえば、リリース ビルドからデバッグへ、デバッグからリリース ビルドへの変更など)、IntelliSense が更新されないことがあります。 構成変更に起因するコードの違いによって影響度が異なります。|構成変更後は、ソリューションを再度読み込みます。|
|C#/VB プロジェクトのリファクタリングの制限事項|プロジェクト ファイルを変更するコードの修正は、最初にエラーが表示されずに失敗することがあります。|このようなプロジェクトのファイルにコードの修正を加える必要がある場合はプロジェクトを読み込みます。 ライトウェイト モードでは、読み込まれていないプロジェクトは修正されません。|
|単体テストの探索|遅延したプロジェクトで探索されたテストは、プロジェクトを手動で読み込んだときに実行されません。|テストを探索し、選択したテストを再実行するには、プロジェクトをリビルドします。|
|Live Unit Testing (LUT)|LSL モードでは、LUT がアクティブ化されていないと表示されることがあります。 LUT でテスト プロジェクトのいずれかを読み込む必要があるため、アクティブ化されていません。|ソリューションで Live Unit Testing をアクティブ化するには、任意のテスト プロジェクトを読み込みます。|
|ソリューション エクスプローラーの検索|1.  ソリューション エクスプローラーの LSL モードでの検索では、ファイルの検索は実行されません。また、進行状況の結果も表示されません (つまり、検索ツリーにはファイルのみが表示され、クラス、メソッドなどは表示されません)。</br>2.  プロジェクトに属するすべてのファイルは、ツリー ビューではなく、単純なリストとして表示されます。 ファイルがプロジェクトのフォルダーに属する場合、ファイル名だけでなく、ファイルの相対パスが検索ビューに表示されます。</br>検索ビューでは、ファイル項目のコンテキスト メニューがありません。|従来のソリューション エクスプローラーの検索を利用するには、LSL 以外のモードでソリューション全体を読み込みます。</br>Visual Studio IDE の検索を使用することもできます。|
|C++ プロジェクト用オブジェクト ブラウザー|オブジェクト ブラウザーには、読み込まれているプロジェクトについてのみ、アセンブリ/WinMD 参照が表示されます。|オブジェクト ブラウザーで情報を表示するプロジェクトを読み込みます。|

> [!Note]
> パートナーの協力を得て、Resharper などの人気のある拡張機能もライトウェイト ソリューション ロードで使用できます。

ソリューション読み込み時間のパフォーマンスを最適化する開発者向けの機能が追加されました。 これは新機能なので、積極的にお客様のフィードバックを確認し、既知の問題に対処しています。 皆様からのフィードバックをお待ちしております。 Visual Studio ソリューション読み込み最適化チーム (lslsupport@microsoft.com) まで電子メールをお送りください。

## <a name="see-also"></a>関連項目
[Visual Studio のパフォーマンスのヒントとテクニック](../ide/visual-studio-performance-tips-and-tricks.md)
