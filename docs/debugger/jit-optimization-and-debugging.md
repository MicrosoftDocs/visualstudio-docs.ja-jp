---
title: JIT の最適化とデバッグ |Microsoft Docs
ms.date: 11/04/2016
ms.topic: conceptual
dev_langs:
- CSharp
- VB
- FSharp
- C++
helpviewer_keywords:
- debugging [Visual Studio], optimized code
- optimized code, debugging
ms.assetid: 19bfabf3-1a2e-49dc-8819-a813982e86fd
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 7346b6fd8fbd483021437638f9e134ead88a0b93
ms.sourcegitcommit: 94b3a052fb1229c7e7f8804b09c1d403385c7630
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "62846324"
---
# <a name="jit-optimization-and-debugging"></a>JIT の最適化とデバッグ
**どのように最適化は、.NET で使用できます。** 場合のコードをデバッグしようとすると、方が簡単とコードがある**いない**最適化します。 これは、コードの最適化時に、コンパイラとランタイムに変更を加える出力 CPU コードする高速で実行されますは、元のソース コードに直接マップされているためにです。 これは、デバッガーは、ローカル変数の値がわかるし、コードのステップ実行することがよくないと、ブレークポイントが期待どおりに機能しないことを意味します。

通常、リリース ビルド構成が最適化されたコードを作成し、デバッグ ビルド構成はありません。 `Optimize` MSBuild プロパティは、コンパイラがコードを最適化するように指示するかどうかを制御します。

.NET エコシステムでは、ソースからコードを有効に 2 段階のプロセスに CPU 命令: c# コンパイラが最初に、MSIL と呼ばれる中間のバイナリ形式に入力したテキストを変換し、.dll ファイルに書き込みます。 後で、.NET ランタイムは、この MSIL を CPU 命令に変換します。 両方の手順は、ある程度最適化できますが、.NET ランタイムによって実行される 2 番目の手順がより重要な最適化を実行します。

**"抑制中に JIT 最適化モジュールの読み込み (マネージドのみ)"オプション:** デバッガーでは、ターゲット プロセス内で最適化を有効にコンパイルされる DLL を読み込むときの動作を制御するオプションを公開します。 このオプションがオフになっている場合 (既定の状態) には、最適化を有効に外に出て、.NET ランタイムでは、CPU コードを MSIL コードをコンパイルするときに、します。 オプションをオンにした場合、デバッガー要求の最適化を無効にします。

検索する、 **モジュールの読み込み (マネージドのみ) の抑制の JIT 最適化**オプションを選択し**ツール** > **オプション**を選び、 **一般的な**ページで、**デバッグ**ノード。

**ときに、このオプションをオンする必要があります。** Nuget パッケージなど、別のソースから Dll をダウンロードして、この DLL 内のコードをデバッグするときに、このオプションをオンにします。 これが機能するためには、この DLL のシンボル (.pdb) ファイルを検索することも必要があります。

ローカルでビルドするコードのデバッグに関心のみ場合は、場合によっては、このオプションを有効にする速度が著しく低下のデバッグには、このオプションのオフの場合、ままにすることをお勧めします。 この 2 つの理由は速度が低下します。

* 最適化されたコードが高速に実行されます。 大量のコードの最適化をオフにする場合は、パフォーマンスに与える影響追加できます。
* マイ コードのみを有効にした場合、デバッガーはもお試しくださいその最適化された Dll のシンボルを読み込めません。 シンボルの検索時間がかかることができます。

**このオプションの制限事項:** このオプションでは、2 つの状況がある**いない**機能します。

1. 既に実行中のプロセスにデバッガーを接続している場合、このオプションは影響しません、デバッガーのアタッチ時に既に読み込まれたモジュールにします。
2. このオプションはされている Dll への影響を与えません (別名、ngen'ed) をネイティブ コードをプリコンパイルします。 ただし、環境変数 'COMPlus_ZapDisable' が '1' に設定と、プロセスを開始して事前コンパイル済みコードの使用状況を無効にできます。

## <a name="see-also"></a>関連項目
- [マネージド コードをデバッグする](../debugger/debugging-managed-code.md)
- [デバッガーでのコード間の移動](../debugger/navigating-through-code-with-the-debugger.md)
- [実行中のプロセスへのアタッチ](../debugger/attach-to-running-processes-with-the-visual-studio-debugger.md)
- [マネージド実行プロセス](/dotnet/standard/managed-execution-process)
