---
title: デバッガーを使用してコード内を移動する |Microsoft Docs
ms.custom: seodec18
ms.date: 11/12/2018
ms.topic: conceptual
f1_keywords:
- vs.debug.execution
helpviewer_keywords:
- stepping
- debugging [Visual Studio], execution control
- execution, controlling in debugger
ms.assetid: 759072ba-4aaa-447e-8e51-0dd1456fe896
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: e07e2612e01453115cf4cd6120d92bfd5b0168bd
ms.sourcegitcommit: fe212f8960d7882a1b0fdae9e22f008996aacf3c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/03/2019
ms.locfileid: "70222654"
---
# <a name="navigate-through-code-with-the-visual-studio-debugger"></a>Visual Studio デバッガーでコード間を移動する

Visual Studio デバッガーは、コード内を移動してアプリの状態を検査し、その実行フローを表示するのに役立ちます。 キーボードショートカット、デバッグコマンド、ブレークポイントなどの機能を使用して、確認するコードにすばやくアクセスできます。 デバッガーのナビゲーションコマンドやショートカットを使い慣れていることで、アプリの問題をすばやく見つけて解決することができます。  コードを初めてデバッグする場合は、この記事を読む前に、[絶対初心者向けのデバッグ](../debugger/debugging-absolute-beginners.md)や[手法とツール](../debugger/write-better-code-with-visual-studio.md)のデバッグをお読みになることをお勧めします。

## <a name="basic-debugging"></a>デバッグの基本

デバッガーがアタッチされた状態でアプリを起動するには、 **F5**キーを押すか **、[デバッグ] [**  > **デバッグの開始**] を選択するか、Visual Studio ツールバーの緑色の矢印を選択します。

 ![DBG&#95;Basics&#95;Start&#95;Debugging](../debugger/media/dbg_basics_start_debugging.png "DBG_Basics_Start_Debugging")

デバッグ中は、次に実行されるコード行が黄色の強調表示になります。

 ![DBG&#95;の&#95;基本&#95;中断モード](../debugger/media/dbg_basics_break_mode.png "中断モード")

**[モジュール]** ウィンドウや **[ウォッチ]** ウィンドウなど、ほとんどのデバッガーウィンドウは、デバッガーの実行中にのみ使用できます。 **[ローカル]** ウィンドウでの変数値の表示や **[ウォッチ]** ウィンドウでの式の評価など、一部のデバッガー機能は、デバッガーがブレークポイントで一時停止しているとき (*中断モード*とも呼ばれます) にのみ使用できます。

中断モードでは、関数、変数、およびオブジェクトがメモリに保持されている間、アプリの実行は中断されます。 要素の位置と状態を調べて、違反やバグを探すことができます。 一部のプロジェクトの種類では、中断モードでアプリの調整を行うこともできます。 これらの機能を示すビデオについては、「[デバッガーでのはじめに](https://www.youtube.com/watch?v=FtGCi5j30YU&list=PLReL099Y5nRfw6VNvzMkv0sabT2crbSpK&index=6)」を参照してください。

ソースファイルまたはシンボル ( *.pdb*) ファイルが読み込まれていないコードを中断すると、ファイルの検索と読み込みに役立つ **[ソースファイルが見つかりません]** または **[シンボルが見つかりませ]** ん ページが表示されます。 [シンボル (.pdb) ファイルとソース ファイルの指定](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)に関する記事をご覧ください。 シンボルまたはソースファイルを読み込むことができない場合でも、 **[逆アセンブル]** ウィンドウでアセンブリ命令をデバッグできます。

最初にアプリを起動することによって、常にデバッグを開始する必要はありません。 **F11**キーを押して[コードにステップイン](#BKMK_Step_into__over__or_out_of_the_code)したり、 **F10**キーを押して[コードをステップオーバー](#BKMK_Step_over_Step_out)したり、[特定の位置または関数まで実行](#BKMK_Break_into_code_by_using_breakpoints_or_Break_All)したりすることもできます。

## <a name="step-through-code"></a>コードのステップ実行

デバッガーステップコマンドを使用すると、アプリの状態を検査したり、実行フローの詳細を確認したりすることができます。

アプリでエントリポイントを検索する必要がある場合は、 **F10**キーまたは**F11**キーを使用して開始します。

### <a name="BKMK_Step_into__over__or_out_of_the_code"></a>コードを行ごとにステップインする

デバッグ中にコードまたはステートメントの各行で停止するには、[**デバッグ** > ] **[ステップイン]** を使用するか、 **F11**キーを押します。

デバッガーは、物理的な行ではなく、コードステートメントをステップ実行します。 たとえば、`if` 句は 1 行で記述できます。

  ```csharp
  int x = 42;
  string s = "Not answered";
  if( int x == 42) s = "Answered!";
  ```

  ```vb
  Dim x As Integer = 42
  Dim s As String = "Not answered"
  If x = 42 Then s = "Answered!"
  ```

ただし、この行にステップインすると、デバッガーは条件を1つの手順として処理し、結果を別のステップとして扱います。 前の例では、条件は true になっています。

入れ子になった関数呼び出しの場合は、 **[ステップ イン]** をクリックすると、一番内側にある入れ子になった関数にステップ インします。 たとえば、のような`Func1(Func2())`呼び出しで **[ステップイン]** を使用すると、デバッガーは関数`Func2`にステップインします。

>[!TIP]
>各コード行を実行すると、変数の上にマウスポインターを移動して値を表示したり、[[ローカル](autos-and-locals-windows.md)] ウィンドウと [[ウォッチ](watch-and-quickwatch-windows.md)] ウィンドウを使用して値の変更を確認したりすることができます。 関数にステップインするときに、呼び出し履歴を視覚的にトレースすることもできます。 「[デバッグ中の呼び出し履歴のメソッドのマップ」を](../debugger/map-methods-on-the-call-stack-while-debugging-in-visual-studio.md)参照してください。

### <a name="BKMK_Step_over_Step_out"></a>コードをステップ実行し、一部の関数をスキップする

デバッグ中に関数が気にならない場合や、適切にテストされたライブラリコードのように動作することがわかっている場合があります。 次のコマンドを使用して、コードをスキップできます。 関数は依然として実行されますが、デバッガーはそれらをスキップします。

|キーボードコマンド|[デバッグ] メニューのコマンド|説明|
|----------------------|------------------|-----------------|
|**F10**|**[ステップ オーバー]**|現在の行に関数呼び出しが含まれている場合は、**ステップオーバー**によってコードが実行され、呼び出された関数から制御が戻った後、コードの最初の行で実行が中断されます。|
|**Shift** + **F11**|**[ステップ アウト]**|**ステップアウト**は、現在の関数から制御が戻ったときにコードの実行を続行し、実行を中断します。 デバッガーは、現在の関数をスキップします。|

## <a name="BKMK_Break_into_code_by_using_breakpoints_or_Break_All"></a>特定の場所または関数まで実行する

調査対象のコードが正確にわかっている場合や、デバッグを開始する場所がわかっている場合は、特定の場所または関数に直接実行することをお勧めします。

### <a name="run-to-a-breakpoint-in-code"></a>コード内のブレークポイントまで実行する

コードに単純なブレークポイントを設定するには、実行を中断するコード行の横にある左端の余白をクリックします。 また、行を選択して**F9**キーを押すか、[**デバッグ** > ] **/** [ブレークポイントの挿入] の順に選択するか、右クリックし**て [ブレークポイント] [**  > ブレークポイントの**挿入**] を選択する ブレークポイントは、コード行の横の左余白に赤い点として表示されます。 デバッガーは、行が実行される直前に実行を中断します。

![ブレークポイントを設定する](../debugger/media/dbg_basics_setbreakpoint.png "ブレークポイントを設定する")

Visual Studio でのブレークポイントには、条件付きブレークポイントやトレースポイントなど、さまざまな追加の機能が用意されています。 詳細については、「[ブレークポイントの使用](../debugger/using-breakpoints.md)」を参照してください。

### <a name="run-to-a-function-breakpoint"></a>関数のブレークポイントまで実行する

指定された関数に到達するまでデバッガーを実行するように指示できます。 関数は名前で指定することも、呼び出し履歴から選択することもできます。

**関数のブレークポイントを名前で指定するには**

1. **新しいブレークポイント** > の > デバッグ関数の**ブレークポイント**の選択

1. **[新しい関数のブレークポイント]** ダイアログボックスで、関数の名前を入力し、その言語を選択します。

   ![[新しい関数のブレークポイント] ダイアログボックス](../debugger/media/dbg_execution_newbreakpoint.png "新しい関数のブレークポイント")

1. **[OK]** を選択します。

関数がオーバーロードされている場合、または複数の名前空間に存在する場合は、 **[ブレークポイント]** ウィンドウで必要なものを選択できます。

オーバーロードされた![関数のブレークポイント]オーバーロードされた(../debugger/media/dbg_execution_overloadedbreakpoints.png "関数のブレークポイント")

**関数のブレークポイントを呼び出し履歴から選択するには**

1. デバッグ中に [ > **Windows** > コールスタックのデバッグ] を選択して **[呼び出し履歴]** ウィンドウを開きます。

1. **[呼び出し履歴]** ウィンドウで関数を右クリックし、 **[カーソル行の前まで実行]** をクリックするか、 **ctrl**+**F10**キーを押します。

呼び出し履歴を視覚的にトレースするには、「[デバッグ中の呼び出し履歴のメソッドのマップ](../debugger/map-methods-on-the-call-stack-while-debugging-in-visual-studio.md)」を参照してください。

### <a name="run-to-a-cursor-location"></a>カーソル位置まで実行する

カーソル位置まで実行するには、ソースコード または **呼び出し履歴** ウィンドウで中断する行を選択し、右クリックして **カーソル行の前まで実行** を選択するか、 **Ctrl**+**F10**キーを押します。 **[カーソル行の前まで実行]** を選択すると、一時的なブレークポイントが設定されます。

### <a name="run-to-click"></a>[Run To Click (クリックで実行)]

デバッガーで一時停止している間に、ソースコードまたは **[逆アセンブル]** ウィンドウでステートメントをポイントし、実行 **[をここに]** 移動 緑色の矢印アイコンをクリックします。 **[実行] をクリックする**と、一時的なブレークポイントを設定する必要がなくなります。

![クリックで実行](../debugger/media/dbg-run-to-click.png "クリックで実行")

> [!NOTE]
> **[実行] をクリックする**と[!include[vs_dev15](../misc/includes/vs_dev15_md.md)]、以降で使用できるようになります。

### <a name="manually-break-into-code"></a>コードを手動で中断する

実行中のアプリで次に使用可能なコード行を中断するには、[**デバッグ** > ] **[すべて中断]** を選択するか、 **ctrl**+**Alt**+**break**キーを押します。

## <a name="BKMK_Set_the_next_statement_to_execute"></a>ポインターを移動して実行フローを変更する

デバッガーが一時停止されている間、ソースコードまたは **[逆アセンブル]** ウィンドウの余白の黄色の矢印は、次に実行されるステートメントの場所を示します。 この矢印を移動すると、次に実行するステートメントを変更できます。 コードの一部をスキップするか、前の行に戻ることができます。 ポインターの移動は、既知のバグを含むコードのセクションをスキップする場合などに便利です。

 ![ポインターを移動する](../debugger/media/dbg_basics_example3.gif "ポインターを移動する")

次に実行するステートメントを変更するには、デバッガーが中断モードになっている必要があります。 ソースコードまたは **[逆アセンブリ]** ウィンドウで、黄色の矢印を別の行にドラッグするか、次に実行する行を右クリックして、 **[次のステートメントの設定]** を選択します。

プログラムカウンターは、新しい場所に直接ジャンプします。また、古い実行ポイントと新しい実行ポイント間の命令は実行されません。 ただし、実行ポイントを後方に移動すると、その間の命令は元に戻りません。

>[!CAUTION]
>- 次に実行するステートメントを別の関数やスコープに移動すると、一般に呼び出し履歴が破損し、実行時エラーや例外が発生する原因になります。 次に実行するステートメントを別のスコープに移動しようとすると、デバッガーの警告ダイアログ ボックスが表示され、操作をキャンセルできます。
>- Visual Basic では、次に実行するステートメントを別のスコープや関数に移動できません。
>- ネイティブ C++ でランタイム チェックを有効にしている場合、次に実行されるステートメントを設定すると、実行がメソッドの最後に到達したときに例外がスローされる可能性があります。
>- エディット コンティニュが有効になっている場合、エディット コンティニュが即座にマップし直すことができない編集が行われると、 **[次のステートメントの設定]** でエラーが発生します。 これは、たとえば、catch ブロック内でコードを編集している場合に発生します。 この場合、エラーメッセージは、操作がサポートされていないことを示します。
>- マネージコードでは、次のステートメントを移動することはできません。
>   - 次のステートメントが現在のステートメントとは別のメソッドに含まれている場合。
>   - デバッグは Just-in-time デバッグによって開始されました。
>   - 呼び出し履歴のアンワインドが進行中です。
>   - System.StackOverflowException 例外または System.Threading.ThreadAbortException 例外がスローされた場合。

## <a name="BKMK_Restrict_stepping_to_Just_My_Code"></a>非ユーザーコードのデバッグ

既定では、デバッガーは*マイコードのみ*という設定を有効にすることによって、アプリコードのみのデバッグを試みます。 さまざまなプロジェクトの種類および言語におけるこの機能の動作の詳細については、「[マイコードのみ](../debugger/just-my-code.md)」を参照してください。

デバッグ中にフレームワークコード、サードパーティ製のライブラリコード、またはシステム呼び出しを確認するには、マイコードのみを無効にします。 **ツール** (または **デバッグ**) >**オプション** > の**デバッグ** で、**マイコードのみを有効にする** チェックボックスをオフにします。 マイコードのみが無効になっている場合、デバッガーウィンドウに非ユーザーコードが表示され、デバッガーはユーザーコード以外のコードにステップインできます。

> [!NOTE]
> "マイ コードのみ" デバッグは、デバイス プロジェクトではサポートされません。

### <a name="debug-system-code"></a>システムコードのデバッグ

Microsoft システムコード用のデバッグシンボルを読み込んでマイコードのみを無効にした場合は、他の呼び出しと同様にシステムコールにステップインできます。

Microsoft シンボルを読み込むには、「[シンボルの場所と読み込みオプションを構成](specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md#configure-symbol-locations-and-loading-options)する」を参照してください。

**特定のシステムコンポーネントのシンボルを読み込むには、次のようにします。**

1. デバッグ中に **[モジュール]** ウィンドウを開くには、[**Windows** > **モジュール**の**デバッグ** > ] を選択するか、 **Ctrl**+**Alt**+**U**キーを押します。

1. **[モジュール]** ウィンドウで、 **[シンボルの状態]** 列にシンボルが読み込まれているモジュールを確認できます。 シンボルを読み込むモジュールを右クリックし、 **[シンボルの読み込み]** を選択します。

## <a name="BKMK_Step_into_properties_and_operators_in_managed_code"></a> マネージド コード内のプロパティと演算子にステップ インする
 デバッガーは既定ではマネージド コード内のプロパティと演算子をステップ オーバーします。 ほとんどの場合、これにより正しくデバッグを実行できます。 プロパティまたは演算子へのステップインを有効にするには、[**デバッグ** > **オプション**] を選択します。 **[デバッグ]**  >  **[全般]** ページで、 **[プロパティおよび演算子をステップ オーバーする (マネージドのみ)]** チェック ボックスをオフにします。

## <a name="see-also"></a>関連項目
- [デバッグとは](../debugger/what-is-debugging.md)
- [デバッグの技術とツール](../debugger/write-better-code-with-visual-studio.md)
- [デバッグに関する最初の確認](../debugger/debugger-feature-tour.md)
