---
title: "デバッガーでのコード間の移動 | Microsoft Docs"
ms.custom: ""
ms.date: "12/08/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-debug"
ms.tgt_pltfrm: ""
ms.topic: "hero-article"
f1_keywords: 
  - "vs.debug.execution"
dev_langs: 
  - "FSharp"
  - "VB"
  - "CSharp"
  - "C++"
  - "JScript"
helpviewer_keywords: 
  - "デバッグ [Visual Studio], execution コントロール"
  - "実行, 制御 (デバッガーでの)"
  - "ステップ実行"
ms.assetid: 759072ba-4aaa-447e-8e51-0dd1456fe896
caps.latest.revision: 42
caps.handback.revision: 28
author: "mikejo5000"
ms.author: "mikejo"
manager: "ghogen"
---
# デバッガーでのコード間の移動
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

デバッガーでコード内を移動するには多くの方法があります。メソッドへのステップ イン、メソッドのステップ オーバー、ブレークポイントまたは指定位置までの実行、自分のコードへのデバッグの制限を行ったり、外部コードのデバッグにシンボルを含めたりできます。  
  
##  <a name="BKMK_Step_into__over__or_out_of_the_code"></a> コードをステップ イン、ステップ オーバー、ステップ アウトする  
 最も一般的なデバッグ手順の 1 つとして*ステップ実行*があります。 ステップ実行では、1 回に 1 行のコードを実行します。 実行を停止したら \(たとえばデバッガーをブレークポイントまで実行したら\)、**\[デバッグ\]** メニューの 3 つのコマンドを使用してコードをステップ実行できます。  
  
|メニュー コマンド|ショートカット キー|説明|  
|---------------|----------------|--------|  
|**\[ステップ イン\]**|**F11**|行に関数呼び出しが含まれている場合は、**\[ステップ イン\]** をクリックすると、呼び出しだけを実行した後、関数内の最初のコード行で停止します。 それ以外の場合、**\[ステップ イン\]** は次に実行されるステートメントに進みます。|  
|**\[ステップ オーバー\]**|**F10**|行に関数呼び出しが含まれている場合は、**\[ステップ オーバー\]** をクリックすると、呼び出し先の関数を実行した後、呼び出し元の関数内の最初のコード行で停止します。 それ以外の場合、**\[ステップ イン\]** は次に実行されるステートメントに進みます。|  
|**\[ステップ アウト\]**|**Shift\+F11**|**\[ステップ アウト\]** は、コードの実行を再開し、関数から値が返されると呼び出し元の関数内の値が返された位置で実行を中断します。|  
  
-   入れ子になった関数呼び出しの場合は、**\[ステップ イン\]** をクリックすると、一番内側にある入れ子になった関数にステップ インします。`Func1(Func2())` のような呼び出しに **\[ステップ イン\]** を使用すると、デバッガーは関数 `Func2` にステップ インします。  
  
-   デバッガーは実際、物理的な行ではなくコード ステートメントをステップ実行します。 たとえば、`if` 句は 1 行で記述できます。  
  
    ```c#  
    int x = 42;  
    string s = "Not answered";  
    if( int x == 42) s = "Answered!";  
    ```  
  
    ```vb  
    Dim x As Integet = 42  
    Dim s As String = "Not answered"  
    If x = 42 Then s = "Answered!"  
    ```  
  
     この行にステップ インすると、デバッガーは条件を 1 つのステップとして、結果を別のステップとして扱います \(この例では条件は true\)。  
  
 関数へのステップ イン中に呼び出し履歴を視覚的にトレースするには、「[デバッグを行うときの呼び出し履歴に対するメソッドのマップ](../debugger/map-methods-on-the-call-stack-while-debugging-in-visual-studio.md)」をご覧ください。  
  
##  <a name="BKMK_Break_into_code_by_using_breakpoints_or_Break_All"></a> ブレークポイントまたは \[すべて中断\] を使用してコードを中断する  
 VS デバッガーでのデバッグ中は、アプリケーションは実行中か中断モードになっています。  
  
 デバッガーは、ブレークポイントに達するか例外が発生すると、アプリの実行を中断します。 また、実行はいつでも手動で中断できます。  
  
 "ブレークポイント" は、デバッガーに対して、特定の位置でアプリの実行を一時停止するように指示します。 ブレークポイントで実行が中断されると、プログラムは中断モードになります。 中断モードになっても、プログラムの実行は停止も終了もしません。いつでも実行を再開できます。  
  
 \[ローカル\] ウィンドウでの変数値の表示や \[ウォッチ\] ウィンドウでの式の評価など、デバッガーのほとんどの機能は、中断モードでのみ使用できます。 アプリのすべての要素はそのままの状態です \(たとえば、関数、変数、およびオブジェクトはそのままメモリに残されます\) が、移動や動作は中断されます。 中断モードでは、要素の位置と状態を検証して、違反やバグを探すことができます。 アプリの調整も中断モードで行うことができます。  
  
 多くの条件に基づいて実行を中断するためのブレークポイントを構成できます。 「[ブレークポイントの使用](../debugger/using-breakpoints.md)」を参照してください。 このセクションでは、コードを中断するための 2 つの基本的な方法について説明しています。  
  
1.  **コードにブレークポイントを設定する**  
  
     コードに単純なブレークポイントを設定するには、Visual Studio エディターでソース ファイルを開きます。 中断するコード行にカーソルを置き、コンテキスト メニューで **\[ブレークポイント\]**、**\[ブレークポイントの挿入\]** の順にクリックします \(キーボード: **F9**\)。 その行が実行される直前でデバッガーは実行を中断します。  
  
     ![ブレークポイントの設定](../debugger/media/dbg_basics_setbreakpoint.png "DBG\_Basics\_SetBreakpoint")  
  
     Visual Studio でのブレークポイントには、条件付きブレークポイントやトレースポイントなど、さまざまな追加の機能が用意されています。 「[ブレークポイントの使用](../debugger/using-breakpoints.md)」を参照してください。  
  
2.  **コードを手動で中断する**  
  
     実行中のアプリで次に実行されるコード行で実行を中断するには、**\[デバッグ\]**、**\[すべて中断\]** の順にクリックします \(キーボード: **Ctrl\+Alt\+Break**\)。  
  
-   \[マイ コードのみ\] を有効にしてデバッグしている場合は、プロジェクトのコードの次の行で実行が中断されます。 「[ステップ実行をマイ コードのみに制限する](#BKMK_Restrict_stepping_to_Just_My_Code)」を参照してください。  
  
-   複数のプログラムをデバッグしている場合、ブレークポイントまたは \[すべて中断\] は、既定では、デバッグ中のすべてのプログラムに影響します。 「[複数のプロセスの実行動作を構成する](../debugger/debug-multiple-processes.md#BKMK_Configure_the_execution_behavior_of_multiple_processes)」を参照してください。  
  
-   対応付けられたソースまたはシンボル \(.pdb\) ファイルがないため、コードの実行が中断された場合は、デバッガーによって **\[ソース ファイルが見つかりません\]** または **\[シンボルが見つかりません\]** ページが表示され、該当するファイルを見つけるために役立ちます。 「[シンボルとソース コードの管理](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)」を参照してください。  
  
     それらのサポート ファイルにアクセスできない場合は、\[逆アセンブル\] ウィンドウでアセンブリ命令をデバッグできます。  
  
##  <a name="BKMK_Run_to_a_specified_location_or_function"></a> 指定した位置または関数まで実行する  
 コード内の特定の位置まで実行した後に実行を停止することが必要になる場合があります。 中断する位置にブレークポイントを設定した場合は、**\[デバッグ\]**、**\[デバッグ開始\]** の順にクリックするか \(デバッグをまだ開始していないとき\)、**\[デバッグ\]**、**\[続行\]** の順にクリックします  \(いずれの場合も **F5** キーがショートカット キー\)。 コードが実行されて、デバッガーは次のブレークポイントで停止します。 目的のブレークポイントに達するまで **\[デバッグ\]**、**\[続行\]** の順にクリックします。  
  
 コード エディターでカーソルを置いた位置まで実行することも、指定した関数まで実行することもできます。  
  
 **カーソル位置まで実行する**  
  
 カーソル位置まで実行するには、ソース ウィンドウで実行可能なコード行にカーソルを置きます。 エディターのコンテキスト メニューの **\[カーソル行の前まで実行\]** をクリックします。  
  
 **呼び出し履歴の関数まで実行する**  
  
 **\[呼び出し履歴\]** ウィンドウで関数を選択し、コンテキスト メニューの **\[カーソル行の前まで実行\]** をクリックします。 呼び出し履歴を視覚的にトレースするには、「[デバッグを行うときの呼び出し履歴に対するメソッドのマップ](../debugger/map-methods-on-the-call-stack-while-debugging-in-visual-studio.md)」をご覧ください。  
  
 **名前で指定した関数まで実行する**  
  
 デバッガーに対して、指定した関数に達するまでアプリケーションを実行するように指示できます。 関数は名前で指定することも、呼び出し履歴から選択することもできます。  
  
 名前で関数を指定するには、**\[デバッグ\]**、**\[ブレークポイントの作成\]**、**\[関数でブレーク\]** の順にクリックし、関数の名前などの識別情報を入力します。  
  
 ![&#91;ブレークポイントの作成&#93; ダイアログ ボックス](../debugger/media/dbg_execution_newbreakpoint.png "DBG\_Execution\_NewBreakpoint")  
  
 関数がオーバーロードされるか、複数の名前空間にある場合は、**\[ブレークポイントの選択\]** ダイアログ ボックスで目的の関数を選択できます。  
  
 ![&#91;ブレークポイントの選択&#93; ダイアログ ボックス](../debugger/media/dbg_execution_overloadedbreakpoints.png "DBG\_Execution\_OverloadedBreakpoints")  
  
##  <a name="BKMK_Set_the_next_statement_to_execute"></a> 次に実行されるステートメントを設定する  
 デバッガーを中断した後、実行ポイントを移動して、コードの次に実行されるステートメントを設定できます。 ソース ウィンドウまたは \[逆アセンブル\] ウィンドウのマージンに表示される黄色の矢印は、次に実行されるステートメントの位置を示します。 この矢印を移動すると、コードの一部をスキップしたり、前に実行した行に戻ったりできます。 既知のバグを含むコードのセクションをスキップするなどの場合に利用できます。  
  
 ![Example2](../debugger/media/dbg_basics_example2.png "DBG\_Basics\_Example2")  
  
 次に実行されるステートメントを設定するには、次のいずれかの手順を使用します。  
  
-   ソース ウィンドウで、同じソース ファイル内の次に実行されるステートメントを設定する位置に黄色の矢印をドラッグします。  
  
-   ソース ウィンドウで、次に実行される行にカーソルを置き、コンテキスト メニューの **\[次のステートメントの設定\]** をクリックします。  
  
-   \[逆アセンブル\] ウィンドウで、次に実行するアセンブリ命令にカーソルを置き、コンテキスト メニューの **\[次のステートメントの設定\]** をクリックします。  
  
> [!CAUTION]
>  次に実行するステートメントを設定すると、プログラム カウンターは新しい位置に直接ジャンプします。 このコマンドは慎重に使用する必要があります。  
>   
>  -   前の実行ポイントから新しい実行ポイントまでの間の命令は実行されません。  
> -   実行ポイントを後方に移動すると、その間の命令が実行されます。  
> -   次に実行するステートメントを別の関数やスコープに移動すると、一般に呼び出し履歴が破損し、実行時エラーや例外が発生する原因になります。 次に実行するステートメントを別のスコープに移動しようとすると、デバッガーの警告ダイアログ ボックスが表示され、操作をキャンセルできます。 Visual Basic では、次に実行するステートメントを別のスコープや関数に移動できません。  
> -   ネイティブ C\+\+ でランタイム チェックを有効にしている場合、次に実行されるステートメントを設定すると、実行がメソッドの最後に到達したときに例外がスローされる可能性があります。  
> -   エディット コンティニュが有効になっている場合、エディット コンティニュが即座にマップし直すことができない編集が行われると、**\[次のステートメントの設定\]** でエラーが発生します。 これは、たとえば、catch ブロック内でコードを編集している場合に発生します。 このエラーが発生すると、その操作がサポートされていないことを知らせるエラー メッセージが表示されます。  
  
> [!NOTE]
>  マネージ コードでは、次に実行するステートメントは、以下の場合に移動できません。  
>   
>  -   次のステートメントが現在のステートメントとは別のメソッドに含まれている場合。  
> -   デバッグが、Just\-In\-Time デバッグを使用して開始された場合。  
> -   呼び出し履歴のアンワインドが行われている場合。  
> -   System.StackOverflowException 例外または System.Threading.ThreadAbortException 例外がスローされた場合。  
  
 アプリケーションの実行中は、次のステートメントを設定できません。 次に実行するステートメントの設定は、デバッガーの中断モード時に行う必要があります。  
  
##  <a name="BKMK_Restrict_stepping_to_Just_My_Code"></a> ステップ実行をマイ コードのみに制限する  
 デバッグ中に、自分で記述したコードのみを確認して、システム呼び出しなど他の呼び出しを無視したい場合があります。 この場合、"マイ コードのみ" デバッグを使用できます。 "マイ コードのみ" デバッグを使用すると、非ユーザー コードは非表示になり、デバッガー ウィンドウに表示されません。 ステップ実行すると、非ユーザー コードをステップ実行しますが、非ユーザー コード内では停止しません。 「[Just My Code](../debugger/just-my-code.md)」を参照してください。  
  
> [!NOTE]
>  "マイ コードのみ" デバッグは、デバイス プロジェクトではサポートされません。  
  
##  <a name="BKMK_Step_into_system_calls"></a> システム コールにステップ インする  
 \[マイ コードのみ\] が有効でない状態でシステム コードのデバッグ シンボルを読み込んだ場合は、他の呼び出しと同様にシステム コールにステップ インできます。  
  
 Microsoft シンボル ファイルにアクセスするには、「[シンボル サーバーを使用してローカル コンピューター上にないシンボル ファイルを検索する](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md#BKMK_Use_symbol_servers_to_find_symbol_files_not_on_your_local_machine)」トピックの「[シンボルとソース コードの管理](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)」をご覧ください。  
  
 デバッグ中に特定のシステム コンポーネントのシンボルを読み込むには:  
  
1.  \[モジュール\] ウィンドウを開きます \(キーボード: **Ctrl\+Alt\+U**\)。  
  
2.  シンボルを読み込むモジュールを選択します。  
  
     **\[シンボルの状態\]** 列により、シンボルが読み込まれたモジュールを確認できます。  
  
3.  コンテキスト メニューの **\[シンボルの読み込み\]** をクリックします。  
  
##  <a name="BKMK_Step_into_properties_and_operators_in_managed_code"></a> マネージ コード内のプロパティと演算子にステップ インする  
 デバッガーは既定ではマネージ コード内のプロパティと演算子をステップ オーバーします。 ほとんどの場合、これにより正しくデバッグを実行できます。 プロパティと演算子へのステップ インを有効にするには、**\[デバッグ\]**、**\[オプションと設定\]** の順にクリックします。**\[デバッグ\]**\/**\[全般\]** ページで、**\[プロパティおよび演算子をステップ オーバーする \(マネージのみ\)\]** チェック ボックスをオフにします。