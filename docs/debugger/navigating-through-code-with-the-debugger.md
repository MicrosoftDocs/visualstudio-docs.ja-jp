---
title: デバッガを使用してコードをナビゲートする |マイクロソフトドキュメント
ms.custom: seodec18
ms.date: 11/12/2018
ms.topic: conceptual
f1_keywords:
- vs.debug.execution
helpviewer_keywords:
- stepping
- debugging [Visual Studio], execution control
- execution, controlling in debugger
ms.assetid: 759072ba-4aaa-447e-8e51-0dd1456fe896
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 6dfffdf0c12ea2a8f14769f26bb40a3943579248
ms.sourcegitcommit: 95f26af1da51d4c83ae78adcb7372b32364d8a2b
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/13/2020
ms.locfileid: "79301093"
---
# <a name="navigate-through-code-with-the-visual-studio-debugger"></a>Visual Studio デバッガーを使用してコードを移動する

Visual Studio デバッガーを使用すると、コードを移動してアプリの状態を調べ、その実行フローを表示できます。 キーボード ショートカット、デバッグ コマンド、ブレークポイント、およびその他の機能を使用して、調べるコードをすばやく表示できます。 デバッガーのナビゲーション コマンドとショートカットに精通すると、アプリの問題を迅速かつ簡単に見つけて解決できます。  コードをデバッグする初めての場合は、この記事を参照する前に、[絶対初歩者向けのデバッグ](../debugger/debugging-absolute-beginners.md)と[デバッグのテクニックとツール](../debugger/write-better-code-with-visual-studio.md)を読んでいてもよいでしょう。

## <a name="get-into-break-mode"></a>「ブレークモード」に入る

*中断モード*では、関数、変数、およびオブジェクトがメモリ内に残っている間、アプリの実行が中断されます。 デバッガーが中断モードになったら、コード内を移動できます。 中断モードにすばやく入る最も一般的な方法は、次のいずれかです。

- **F10**または**F11**キーを押してコード ステップ実行を開始します。 これにより、アプリのエントリ ポイントをすばやく見つけることができ、ステップ コマンドを押してコードを移動できます。

- たとえば、ブレークポイントを設定してアプリを起動して、特定[の](using-breakpoints.md)[場所または関数に実行](#BKMK_Break_into_code_by_using_breakpoints_or_Break_All)します。

   たとえば、Visual Studio のコード エディターから、[**カーソルまで実行**] コマンドを使用してアプリを起動し、デバッガーをアタッチして中断モードに切り替え **、F11**キーを押してコードを移動できます。

   ![カーソルまで実行し、コードにステップイン](../debugger/media/navigate-code-code-stepping.gif "カーソルまで実行し、コードにステップイン")

中断モードに入ると、さまざまなコマンドを使用してコード内を移動できます。 中断モードでは、変数の値を調べて、違反やバグを探すことができます。 一部のプロジェクトの種類では、中断モードでアプリを調整することもできます。

**[モジュール**] ウィンドウや **[ウォッチ]** ウィンドウなどのほとんどのデバッガー ウィンドウは、デバッガーがアプリにアタッチされている間のみ使用できます。 [**ローカル**] ウィンドウで変数値を表示したり、[**ウォッチ]** ウィンドウで式を評価したりする機能など、デバッガーの一部の機能は、デバッガーが一時停止している間 (つまり、中断モード) の間のみ使用できます。

> [!NOTE]
> ソースファイルまたはシンボル *(.pdb)* ファイルが読み込まれていないコードに分割すると、デバッガーは、ファイルを見つけて読み込むのに役立つ**ソース ファイルが見つからない**か **、シンボルが見つかりません**ページを表示します。 [シンボル (.pdb) とソース ファイルの指定を](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)参照してください。 シンボルファイルまたはソースファイルをロードできない場合でも、「**逆アセンブル**」ウィンドウでアセンブリ命令をデバッグできます。

## <a name="step-through-code"></a>コードのステップ実行

デバッガーのステップ コマンドは、アプリの状態を調べるか、実行フローの詳細を調べるのに役立ちます。

### <a name="step-into-code-line-by-line"></a><a name="BKMK_Step_into__over__or_out_of_the_code"></a>コードに 1 行ずつステップ インする

デバッグ中に各ステートメントを停止するには、**デバッグ** > **ステップ イン**を使用するか **、F11**キーを押します。

デバッガーは、物理行ではなくコード ステートメントをステップ実行します。 たとえば、`if` 句は 1 行で記述できます。

  ```csharp
  int x = 42;
  string s = "Not answered";
  if( int x == 42) s = "Answered!";
  ```

  ```vb
  Dim x As Integer = 42
  Dim s As String = "Not answered"
  If x = 42 Then s = "Answered!"
  ```

ただし、この行にステップ インすると、デバッガーは条件を 1 つのステップとして扱い、結果を別のステップとして処理します。 前の例では、条件は true です。

入れ子になった関数呼び出しの場合は、 **[ステップ イン]** をクリックすると、一番内側にある入れ子になった関数にステップ インします。 たとえば、 などの`Func1(Func2())`呼び出しで **[ステップ イン**] を使用すると、デバッガーは関数`Func2`にステップ インします。

>[!TIP]
>コードの各行を実行する際に、変数の上にカーソルを置いて値を確認したり、[[ローカル]](autos-and-locals-windows.md)ウィンドウと[[ウォッチ]](watch-and-quickwatch-windows.md)ウィンドウを使用して値の変化を確認したりできます。 関数にステップ インするときに[、呼び出し履歴](how-to-use-the-call-stack-window.md)を視覚的にトレースすることもできます。 (Visual Studio エンタープライズの場合のみ、[デバッグ中に呼び出し履歴のメソッドをマップする](../debugger/map-methods-on-the-call-stack-while-debugging-in-visual-studio.md)を参照してください)。

### <a name="step-through-code-and-skip-some-functions"></a><a name="BKMK_Step_over_Step_out"></a>コードをステップ実行し、いくつかの関数をスキップする

デバッグ中は関数を気にしない場合もあれば、適切にテストされたライブラリコードのように機能することが分かっている場合もあります。 コードのステップ実行中に、次のコマンドを使用してコードをスキップできます。 関数は引き続き実行されますが、デバッガーは関数をスキップします。

|キーボードコマンド|[デバッグ] メニューのコマンド|説明|
|----------------------|------------------|-----------------|
|**F10**|**[ステップ オーバー]**|現在の行に関数呼び出しが含まれている場合、**ステップ オーバー**はコードを実行し、呼び出された関数が戻った後、コードの最初の行で実行を中断します。|
|**シフト**+**F11**|**ステップ アウト**|**ステップアウトは**、コードの実行を続行し、現在の関数が戻ったときに実行を中断します。 デバッガーは、現在の関数をスキップします。|

## <a name="run-to-a-specific-location-or-function"></a><a name="BKMK_Break_into_code_by_using_breakpoints_or_Break_All"></a>特定の場所または関数に実行する

検査するコードを正確に把握している場合や、デバッグを開始する場所がわかっている場合は、特定の場所または関数に直接実行することもできます。

### <a name="run-to-a-breakpoint-in-code"></a>コード内のブレークポイントまで実行する

コードに単純なブレークポイントを設定するには、実行を中断するコード行の横にある左端のマージンをクリックします。 行を選択して**F9**キーを押すか、[**ブレークポイントのデバッグ** > **Toggle Breakpoint**] を選択するか、右クリックして [**ブレークポイント** > **の挿入**] を選択することもできます。 ブレークポイントは、コード行の横の左マージンに赤い点で表示されます。 デバッガーは、行の実行の直前に実行を中断します。

![ブレークポイントを設定する](../debugger/media/dbg_basics_setbreakpoint.png "ブレークポイントの設定")

Visual Studio でのブレークポイントには、条件付きブレークポイントやトレースポイントなど、さまざまな追加の機能が用意されています。 詳細については、[ブレークポイントの使用を](../debugger/using-breakpoints.md)参照してください。

### <a name="run-to-a-function-breakpoint"></a>関数ブレークポイントまで実行する

デバッガーは、指定した関数に到達するまで実行するように指示できます。 関数は名前で指定することも、呼び出し履歴から選択することもできます。

**関数のブレークポイントを名前で指定するには**

1. **Debug** > **デバッグの新しいブレークポイント** > **関数のブレークポイントを選択します。**

1. [**新しい関数ブレークポイント]** ダイアログで、関数の名前を入力し、その言語を選択します。

   ![[新しい関数ブレークポイント] ダイアログ ボックス](../debugger/media/dbg_execution_newbreakpoint.png "新しい関数ブレークポイント")

1. **[OK]** を選択します。

関数がオーバーロードされている場合、または複数の名前空間にある場合は、[**ブレークポイント]** ウィンドウで必要な関数を選択できます。

![オーバーロードされた関数ブレークポイント](../debugger/media/dbg_execution_overloadedbreakpoints.png "オーバーロードされた関数ブレークポイント")

**呼び出し履歴から関数のブレークポイントを選択するには**

1. **Windows** > デバッグ中に **、[Windows 呼び出し履歴**の**デバッグ** > ] を選択して [**呼び出し履歴**] ウィンドウを開きます。

1. [**呼び出し履歴**] ウィンドウで関数を右クリックし、[**カーソル位置まで実行**] を選択するか **、Ctrl**+キーを押しながら**F10**キーを押します。

呼び出し履歴を視覚的にトレースするには、[デバッグ中に呼び出し履歴のメソッドをマップする](../debugger/map-methods-on-the-call-stack-while-debugging-in-visual-studio.md)を参照してください。

### <a name="run-to-a-cursor-location"></a>カーソル位置まで実行

カーソル位置まで実行するには、ソース コードまたは **[呼び出し履歴**] ウィンドウで、中断する行を選択するか、右クリックして [**カーソルまで実行**] を選択するか **、Ctrl**+**F10**キーを押します。 [**カーソルを実行] を選択**すると、一時的なブレークポイントを設定するのと同じです。

### <a name="run-to-click"></a>[Run To Click (クリックで実行)]

デバッガーで一時停止している間、ソース コードまたは **[逆アセンブル**] ウィンドウ内のステートメントにカーソルを合わせて、[**実行をここで実行する**] の矢印アイコンを選択できます。 **Run to Click を**使用すると、一時的なブレークポイントを設定する必要がなくなります。

![クリックで実行](../debugger/media/dbg-run-to-click.png "[Run To Click (クリックで実行)]")

> [!NOTE]
> **[実行] から [クリック] は**からで使用できます[!include[vs_dev15](../misc/includes/vs_dev15_md.md)]。

### <a name="manually-break-into-code"></a>コードを手動で中断する

実行中のアプリで次のコード行を中断するには、[**すべてデバッグ** > **Break All**] を選択するか **、Ctrl**+**Alt Break**+**Break**キーを押します。

## <a name="move-the-pointer-to-change-the-execution-flow"></a><a name="BKMK_Set_the_next_statement_to_execute"></a>ポインタを移動して実行フローを変更する

デバッガーが一時停止している間、ソース コードまたは **[逆アセンアセンブリ**] ウィンドウの余白に黄色の矢印が表示され、次に実行されるステートメントの場所がマークされます。 この矢印を移動して、次に実行するステートメントを変更できます。 コードの一部をスキップするか、前の行に戻ることができます。 ポインターの移動は、既知のバグを含むコードのセクションをスキップするなどの状況で役立ちます。

 ![ポインタを移動する](../debugger/media/dbg_basics_example3.gif "ポインタを移動する")

次に実行するステートメントを変更するには、デバッガーが中断モードになっている必要があります。 ソース コードまたは **[逆アセンダ**] ウィンドウで、黄色の矢印を別の行にドラッグするか、または次に実行する行を右クリックして [**次のステートメントの設定**] を選択します。

プログラム カウンタは新しい場所に直接ジャンプし、新しい実行ポイントと新しい実行ポイント間の命令は実行されません。 ただし、実行ポイントを後方に移動しても、その間の命令は元に戻されません。

>[!CAUTION]
>- 次に実行するステートメントを別の関数やスコープに移動すると、一般に呼び出し履歴が破損し、実行時エラーや例外が発生する原因になります。 次に実行するステートメントを別のスコープに移動しようとすると、デバッガーの警告ダイアログ ボックスが表示され、操作をキャンセルできます。
>- Visual Basic では、次に実行するステートメントを別のスコープや関数に移動できません。
>- ネイティブ C++ でランタイム チェックを有効にしている場合、次に実行されるステートメントを設定すると、実行がメソッドの最後に到達したときに例外がスローされる可能性があります。
>- エディット コンティニュが有効になっている場合、エディット コンティニュが即座にマップし直すことができない編集が行われると、 **[次のステートメントの設定]** でエラーが発生します。 これは、たとえば、catch ブロック内でコードを編集している場合に発生します。 この場合、操作がサポートされていないというエラー メッセージが表示されます。
>- マネージ コードでは、次のステートメントを移動することはできません。
>   - 次のステートメントが現在のステートメントとは別のメソッドに含まれている場合。
>   - ジャスト イン タイム デバッグによってデバッグが開始されました。
>   - コール スタックのアンワインドが進行中です。
>   - System.StackOverflowException 例外または System.Threading.ThreadAbortException 例外がスローされた場合。

## <a name="debug-non-user-code"></a><a name="BKMK_Restrict_stepping_to_Just_My_Code"></a>非ユーザー コードのデバッグ

既定では、デバッガーは 、マイ コードのみという設定を有効にすることで、アプリ*コード*のみをデバッグしようとします。 この機能がさまざまなプロジェクトの種類と言語で動作するしくみ、およびカスタマイズ方法の詳細については、「[マイ コードに関するみ](../debugger/just-my-code.md)」を参照してください。

デバッグ中にフレームワーク コード、サードパーティライブラリ コード、またはシステム コールを確認するには、マイ コードのみを無効にします。 [**ツール**] または [**デバッグ**] > **[ デバッグ ]** > **Debugging**> [**マイ コードのみを有効にする**] チェック ボックスをオフにします。 マイ コードのみを無効にすると、デバッガー ウィンドウに非ユーザー コードが表示され、デバッガーは非ユーザー コードにステップ インできます。

> [!NOTE]
> "マイ コードのみ" デバッグは、デバイス プロジェクトではサポートされません。

### <a name="debug-system-code"></a>システム コードのデバッグ

Microsoft システム コードのデバッグ シンボルを読み込み、マイ コードのみを無効にした場合は、他の呼び出しと同様にシステム コールにステップ インできます。

Microsoft シンボルを読み込む方法については、[シンボルの場所と読み込みオプションの構成を](specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md#configure-symbol-locations-and-loading-options)参照してください。

**特定のシステム コンポーネントのシンボルを読み込むには:**

1. デバッグ中に **、[Windows** > モジュールの**デバッグ** > ] を選択するか **、Ctrl**+**Alt**+**U**キーを押して **[モジュール]** ウィンドウを開きます。 **Modules**

1. **モジュール**ウィンドウで、シンボルがシンボルステータス列にロードされているモジュールを**確認**できます。 シンボルをロードするモジュールを右クリックし、[**シンボルのロード**] を選択します。

## <a name="step-into-properties-and-operators-in-managed-code"></a><a name="BKMK_Step_into_properties_and_operators_in_managed_code"></a> マネージド コード内のプロパティと演算子にステップ インする
 デバッガーは既定ではマネージド コード内のプロパティと演算子をステップ オーバーします。 ほとんどの場合、これにより正しくデバッグを実行できます。 プロパティまたは演算子へのステップ インを有効にするには、[**デバッグ** > **オプション]** を選択します。 [**デバッグ** > **全般]** ページで、[**プロパティと演算子のステップオーバー (マネージのみ)]** チェック ボックスをオフにします。

## <a name="see-also"></a>関連項目
- [デバッグとは](../debugger/what-is-debugging.md)
- [デバッグの技術とツール](../debugger/write-better-code-with-visual-studio.md)
- [まずデバッグを見る](../debugger/debugger-feature-tour.md)
