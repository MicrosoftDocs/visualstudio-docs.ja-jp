---
title: スレッドとプロセスをデバッグするためのツール |Microsoft Docs
ms.date: 04/21/2017
ms.topic: conceptual
dev_langs:
- CSharp
- VB
- FSharp
- C++
helpviewer_keywords:
- multiprocess debugging
- threading [Visual Studio], debugging
- processes, debugging
- debugging threads
- debugging [Visual Studio], threads
ms.assetid: 9f0c8505-b6b2-452b-adfd-076db14d8115
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: f9e39e77874594620eaeadb11b827df93cae4ea5
ms.sourcegitcommit: d0425b6b7d4b99e17ca6ac0671282bc718f80910
ms.translationtype: MTE95
ms.contentlocale: ja-JP
ms.lasthandoff: 02/21/2019
ms.locfileid: "56642106"
---
# <a name="tools-to-debug-threads-and-processes-in-visual-studio"></a>スレッドと Visual Studio でのプロセスをデバッグするためのツール
*スレッド*と*プロセス*は、コンピューター科学における関連概念です。 いずれも特定の順序で実行する必要がある命令のシーケンスを表します。 ただし、別個のスレッドやプロセスの命令は並列実行できます。

 プロセスは、オペレーティング システム内に存在するものであり、ユーザーがプログラムやアプリケーションとして認識するものに相当します。 一方、スレッドはプロセス内に存在します。 このため、スレッドは、*軽量プロセス*と呼ばれることもあります。 各プロセスは、1 つ以上のスレッドで構成されます。

 複数のプロセスが存在すると、コンピューターは、同時に複数のタスクを実行できます。 複数のスレッドが存在すると、プロセスで作業を分割して並列実行できます。 マルチプロセッサを搭載したコンピューターでは、プロセスやスレッドを各プロセッサに振り分けて実行できます。 これにより、真の並列処理が実現されます。

 完全な並列処理は、常に実現できるとは限りません。 スレッドの同期が必要になることがあります。 スレッドは、別のスレッドが結果を生成するまで待機したり、別のスレッドが使用しているリソースに排他的にアクセスしたりすることが必要な場合があります。 同期に関する問題は、マルチスレッド アプリケーションで発生するバグの一般的な原因です。 また、スレッドは、決して利用可能にならないリソースを待機することがあります。 その結果、*デッドロック*と呼ばれる状態になります。

 [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] デバッガーは、強力で使いやすい、スレッドとプロセスのデバッグ用ツールを提供します。

## <a name="tools-and-features"></a>ツールと機能
使用する必要があるツール[!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)]デバッグしようとしているコードの種類によって異なります。

- 主なツールには、プロセスの**プロセスにアタッチ** ダイアログ ボックスで、**プロセス**ウィンドウで、および**デバッグの場所**ツールバー。

- スレッドのデバッグの主なツールにはスレッドの場合、**スレッド**ウィンドウで、ソース ウィンドウ、スレッド マーカー**並列スタック**ウィンドウで、**並列ウォッチ**ウィンドウ、および**デバッグの場所**ツールバー。

- 使用するコード、<xref:System.Threading.Tasks.Task>で、[タスク並列ライブラリ (TPL)](/dotnet/standard/parallel-programming/task-parallel-library-tpl)、[同時実行ランタイム](/cpp/parallel/concrt/concurrency-runtime/)(ネイティブ コード)、マルチ スレッド アプリケーションをデバッグするための主要ツールは、 **並列スタック**ウィンドウで、**並列ウォッチ**ウィンドウで、および**タスク**ウィンドウ (、**タスク**ウィンドウもサポートしています、。JavaScript promise オブジェクト)。

- 主要なツールは、GPU でスレッドをデバッグするには、 **GPU スレッド**windows。

  各ツールで提供される情報と実行できる操作を次の表に示します。

|ユーザー インターフェイス|提供される情報|実行できる操作|
|--------------------|---------------------------|-----------------------------|
|**[プロセスにアタッチ]** ダイアログ ボックス|アタッチが可能なプロセス<br /><br /> - プロセス名 (.exe)<br />- プロセス ID 番号<br />- メニュー バーのタイトル<br />- 種類 ([マネージド v4.0]、[マネージド (v2.0、v1.1、v1.0)]、[x86]、[x64]、[IA64])<br />- ユーザー名 (アカウント名)<br />- セッション番号|アタッチ先のプロセスの選択。<br /><br /> リモート コンピューターの選択。<br /><br /> リモート コンピューターに接続するためのトランスポートの種類の変更。|
|**[プロセス]** ウィンドウ|アタッチされたプロセス<br /><br /> - プロセス名<br />- プロセス ID 番号<br />- .exe を処理するパス<br />- メニュー バーのタイトル<br />- 状態 (中断、 実行中)<br />- デバッグ (ネイティブ、マネージドなど)<br />- トラスポートの種類 (既定、認証なしのネイティブ)<br />- トラスポートの修飾子 (リモート コンピューター)|ツールでの操作 :<br /><br /> - アタッチ<br />- デタッチ<br />- 終了する<br /><br /> ショートカット メニューでの操作 : <br /><br /> - アタッチ<br />- デタッチ<br />- デバッグの停止時にデタッチ<br />- 終了する|
|**[スレッド]** ウィンドウ|現在のプロセス内のスレッド<br /><br /> - スレッド ID<br />- マネージド ID<br />- カテゴリ (メイン スレッド、インターフェイス スレッド、リモート プロシージャ コール ハンドラー、またはワーカー スレッド)<br />- スレッド名<br />- スレッドが作成された場所<br />- 優先度<br />- 関係マスク<br />- 中断回数<br />- プロセス名<br />- フラグ インジケーター<br />- 中断中のインジケーター|ツールでの操作 :<br /><br /> - 検索<br />- 呼び出し履歴の検索<br />- マイ コードのみにフラグを設定<br />- カスタム モジュール選択にフラグを設定<br />- グループ化<br />- 列<br />- 呼び出し履歴の展開/折りたたみ<br />- グループの展開/折りたたみ<br />- スレッドの凍結/凍結解除<br /><br /> ショートカット メニューでの操作 : <br /><br /> - ソースのスレッドを表示<br />- スレッドに切り替え<br />- 実行中のスレッドの凍結<br />- 凍結されたスレッドの凍結解除<br />- 注目するスレッドへのフラグの設定<br />- スレッドのフラグの解除<br />- スレッド名の変更<br />- スレッドの表示と非表示<br /><br /> その他の操作 : <br /><br /> - スレッドの呼び出し履歴のデータヒントでの表示|
|ソース ウィンドウ|左端余白のスレッド インジケーターは、スレッドが 1 つか複数かを示します (既定ではオフで、**[スレッド]** ウィンドウのショートカット メニューを使用してオンにすることができます)。|ショートカット メニューでの操作 : <br /><br /> - スレッドに切り替え<br />- 注目するスレッドへのフラグの設定<br />- スレッドのフラグの解除|
|**[デバッグの場所]** ツール バー|- 現在のプロセス<br />- アプリケーションを一時停止する<br />- アプリケーションを再開する<br />- アプリケーションを一時停止およびシャットダウンする<br />- 現在のスレッド<br />- 現在のスレッドのフラグ状態を切り替える<br />- フラグが設定されたスレッドのみの表示<br />- 現在のプロセスのみ表示する<br />- 現在のスタック フレーム|- 別のプロセスへの切り替え<br />- アプリケーションを一時停止、再開、またはシャットダウンする<br />- 現在のプロセス内の別なスレッドへの切り替え<br />- 現在のスレッド内の別なスタック フレームへの切り替え<br />- 現在のスレッドのフラグ設定またはフラグ解除<br />- フラグが設定されたスレッドのみの表示<br />- 現在のプロセスのみ表示する|
|**[並列スタック]** ウィンドウ|- 1 つのウィンドウにおける複数のスレッドの呼び出し履歴<br />- 各スレッドのアクティブなスタック フレーム<br />- メソッドの呼び出し元と呼び出し先|- 指定したスレッドをフィルターで除外<br />-タスク ビューに切り替えます。<br />- スレッドのフラグ設定またはフラグ解除<br />- ズーム|
|**[並列ウォッチ]** ウィンドウ|- フラグ列。特に注意する必要のあるスレッドをマークできます。<br />- フレーム列。矢印は選択したフレームを示します。<br />- 構成可能な列。コンピューター、プロセス、タイル、タスク、スレッドを表示できます。|- スレッドのフラグ設定またはフラグ解除<br />- フラグが設定されたスレッドのみ表示する<br />- フレームを切り替える<br />- 列を並べ替える<br />- スレッドをグループ化する<br />- スレッドを凍結/凍結解除する<br />- [並列ウォッチ] ウィンドウ内のデータをエクスポートする|
|**タスク**ウィンドウ|- タスク ID、タスクの状態 (スケジュール済み、実行中、待機中、デッドロック)、タスクに割り当てられているスレッドなど、<xref:System.Threading.Tasks.Task> オブジェクトに関する情報の表示<br />- 呼び出し履歴での現在の位置<br />- 作成時にタスクに渡されたデリゲート|- 現在のタスクへの切り替え<br />- タスクのフラグ設定またはフラグ解除<br />- タスクを凍結/凍結解除する|
|**[GPU スレッド]** ウィンドウ|- フラグ列。特に注意する必要のあるスレッドをマークできます。<br />-現在のスレッドの列の黄色の矢印が、現在のスレッドを示します。<br />- **[スレッド数]** 列。同じ位置のスレッドの数を表示します。<br />- **[行]** 列。スレッドの各グループがあるコード行を表示します。<br />- **[アドレス]** 列。スレッドの各グループがある命令アドレスを表示します。<br />- **[場所]** 列。アドレスのコード内の位置です。<br />- **[ステータス]** 列。スレッドがアクティブであるかブロックされているかどうかを示します。<br />- **[タイル]** 列。行内のスレッドのタイル インデックスを示します。|-別のスレッドに変更します。<br />- 特定のタイルとスレッドを表示する<br />- 列の表示と非表示を切り替える<br />- 列で並べ替える<br />- スレッドをグループ化する<br />- スレッドを凍結/凍結解除する<br />- スレッドのフラグ設定またはフラグ解除<br />- フラグが設定されたスレッドのみ表示する|

## <a name="see-also"></a>関連項目

- [実行中のプロセスへのアタッチ](../debugger/attach-to-running-processes-with-the-visual-studio-debugger.md)
- [マルチスレッド アプリケーションのデバッグ](../debugger/debug-multithreaded-applications-in-visual-studio.md)
- [GPU コードのデバッグ](../debugger/debugging-gpu-code.md)