---
title: グラフィックス情報のキャプチャ |Microsoft ドキュメント
ms.custom: ''
ms.date: 02/09/2017
ms.technology:
- vs-ide-debug
ms.topic: conceptual
f1_keywords:
- vs.graphics.frame
- vs.graphics.capturewindow
- VS.ToolsOptionsPages.Graphics_Diagnostics.Capture
ms.assetid: 187ce86e-e340-4f6c-8937-8e8f1027a17f
author: mikejo5000
ms.author: mikejo
manager: douge
ms.workload:
- multiple
ms.openlocfilehash: b6fc895ae1aff25ff6e9a3fc02d0252e518f7652
ms.sourcegitcommit: 6a9d5bd75e50947659fd6c837111a6a547884e2a
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/16/2018
---
# <a name="capturing-graphics-information"></a>グラフィックス情報をキャプチャする
Visual Studio Graphics Analyzer を使用してレンダリングに関する問題とパフォーマンスに関する問題を診断できるように、Direct3D アプリからグラフィックス情報をキャプチャします。  
  
## <a name="capturing-graphics-information"></a>グラフィックス情報をキャプチャする  
 グラフィックス情報のキャプチャは 2 段階のプロセスです。 最初に、アプリをグラフィックス診断の下で実行し、詳細情報をキャプチャする 1 つ以上のフレームを指定します。  
  
### <a name="to-run-your-app-under-graphics-diagnostics"></a>グラフィックス診断の下でアプリを実行するには  
  
-   メニュー バーで、次のように選択します。**デバッグ**、**グラフィックス**、**グラフィックス デバッグの開始**です。 (キーボード: Alt キーを押しながら F5 キーを押します)  
  
-   **グラフィックス**ツールバーで、選択、**グラフィックス デバッグの開始**ボタンをクリックします。  
  
 アプリがグラフィックス診断の下で実行されている間、特定の種類のグラフィックス情報が常にキャプチャされます。これには、デバイス セットアップ、スワップ チェーンの作成、グラフィックス オブジェクトとリソースの作成、および複数のフレームに影響するその他の重要なイベントが含まれます。 同時に、特定のフレームに関する詳細情報をキャプチャできます。これには、描画の呼び出しおよび計算シェーダーのディスパッチと、これらをサポートする Direct3D オブジェクトおよびリソースが含まれます。  
  
### <a name="to-capture-a-frame"></a>フレームをキャプチャするには  
  
-   Visual Studio での**グラフィックス**ツールバーで、をクリックして、**フレームのキャプチャ**ボタン![グラフィックス キャプチャ ボタン アイコン](media/debuggingdirectxgraphics.png "DebuggingDirectXGraphics").  
  
-   キーボードで Printscreen キーを押します。
  
    > [!NOTE]
    >  アプリの実行中に**グラフィックス診断**、Printscreen キーは、グラフィックス情報のフレームをキャプチャする場合にのみ使用できます。 通常の機能は実行できません。 これは、デバッグを停止するかアプリケーションを正常に終了して、グラフィックス情報のキャプチャを停止するまで有効です。別のアプリケーションにフォーカスがある場合でも同じです。  
  
-   Visual Studio キャプチャ インターフェイスで、次のように選択します、**フレームのキャプチャ**の下にあるボタンをクリック、**診断セッション**タイムラインで、選択、大規模なまたは**フレームのキャプチャ**ボタン。下にある、 **1 秒あたりのフレーム数**スイムレーンと以前にキャプチャされたフレームの右側にします。 下の画像では、両方のボタンが強調表示されています。  
  
     ![GPU 使用率ツールを使用してフレームをキャプチャする。](media/pix_gpu_usage_tool_capture_frame.png)  
  
     キャプチャしたフレームを確認する準備ができたら、開始、 **Visual Studio Graphics Analyzer**に従って、**フレームしています.**サムネール画像の上またはサムネイルをダブルクリックしてリンクします。  
  
 記録されている次のフレームからグラフィックス情報が実際に、キャプチャを開始するときに、フレーム全体のみをキャプチャできます。 記録は、キャプチャを開始したフレームが表示された直後に開始され、キャプチャするフレームが表示されると終了します。 アプリがグラフィックス診断の下で実行されている間、フレームを必要なだけキャプチャできます。 どのフレームもキャプチャしない場合、グラフィックス ログは破棄されます。  
  
 フレームをキャプチャするときに、Visual Studio では診断セッション (.diagsession) ウィンドウが表示されます。 このウィンドウを閉じて、デバッグを停止または、アプリケーションを閉じる場合がそのログにそれ以上のフレームをキャプチャすることはできません。 より多くのグラフィックス情報をキャプチャするには、グラフィックス診断の下で再度アプリを実行し、新しい診断セッションを開始する必要があります。  
  
### <a name="graphics-diagnostics-capture-options"></a>グラフィックス診断のキャプチャ オプション  
 キャプチャを構成して、すべてのグラフィックス イベントまたは特定のサブセットの呼び出し履歴の収集、キャプチャの HUD の無効化、およびキャプチャ互換モードの有効化または無効化を行うことができます。  
  
#### <a name="to-configure-graphics-diagnostics-capture-options"></a>グラフィックス診断のキャプチャ オプションを構成するには  
  
1.  メニュー バーで [ツール]、[オプション] の順にクリックします。 [オプション] ダイアログ ボックスが表示されます。  
  
2.  左側にあるオプション カテゴリの一覧からグラフィックス診断を選択した後、使用するグラフィックス診断オプションを構成します。  
  
     **キャプチャ中に呼び出し履歴を収集する (キャプチャ速度が遅いため)**  
     呼び出し履歴を収集するには、このチェック ボックスをオンにします。 既定では、呼び出し履歴は収集されません。 呼び出し履歴をキャプチャすることを確認、**収集呼び出し履歴をキャプチャ中に (キャプチャ速度が遅くなる**コレクションを有効にし、いずれかを設定する チェック ボックスが設定されている、**の描画、ディスパッチ、現在のところ、およびパフォーマンス マーカー**のみ、最も重要な呼び出し履歴を収集する オプション (既定) または**すべてに対して**すべての呼び出し履歴を収集するにはオプションです。 呼び出し履歴を後で収集を停止するには、クリア、**収集呼び出し履歴をキャプチャ中に (キャプチャ速度が遅くなる**チェック ボックスをオンします。  
  
     **キャプチャ中にゲーム内の HUD を無効にします。**  
     グラフィックス診断の下で実行されているアプリが通常表示する HUD オーバーレイを無効にするには、このチェック ボックスをオンにします。 HUD オーバーレイを表示するには、このチェック ボックスをオフにします。  
  
     **互換性モードでキャプチャします。**  
     グラフィックス情報を互換モードでキャプチャするには、このチェック ボックスをオンにします。 互換モードでのキャプチャが既定の動作です。 互換モードでは、Direct3D は、基本機能レベルで定義されていない追加機能が GPU でサポートされることを報告しません。 このため、アプリをキャプチャしている GPU のハードウェア固有の拡張機能が、キャプチャ中のアプリで使用されなくなり、同じまたはそれ以上の機能レベルをサポートしている任意の GPU を使用して、グラフィックス ログを再生できるようになります。 互換モードを無効にするには、このチェック ボックスをオフにします。互換モードでキャプチャされたログは、キャプチャ中にアプリで使用されたものと同じ追加機能をサポートしていない GPU 上では再生できません。  
  
     **SDK レイヤー エラーが見つかった場合は、キャプチャを停止します。**  
     このボックスをオンにすると、エラーが発生した場合、すぐにキャプチャを停止します。  
  
## <a name="capturing-graphics-information-remotely"></a>グラフィックス情報をリモートでキャプチャする  
 グラフィックス情報は、ローカル コンピューターか、リモート コンピューターまたはリモート デバイスで実行されているアプリからキャプチャできます。 リモート キャプチャは、[!INCLUDE[winblue_client_2](../includes/winblue_client_2_md.md)] コンピューターと [!INCLUDE[winblue_winrt_2](../includes/winblue_winrt_2_md.md)] デバイスでサポートされています。 リモートで実行されているアプリからグラフィックス情報をキャプチャするには、リモート デバッグ用にプロジェクトを構成し、既に説明したように、グラフィックス診断の下でアプリを実行します。 アプリがリモート コンピューターで実行され、キャプチャされたグラフィックス情報が開発用コンピューターに記録されます。  
  
 プロジェクトをリモート デバッグ用に構成する方法は、開発中のアプリの種類と、使用しているプログラミング言語によって異なります。 UWP アプリのリモート デバッグを構成する方法については、次を参照してください。[をリモート コンピューターでの実行の UWP アプリ](../run-windows-store-apps-on-a-remote-machine.md)です。 Windows デスクトップ アプリのリモート デバッグを構成する方法については、次を参照してください。[リモート デバッグ](../remote-debugging.md)です。  
  
 後で、情報をキャプチャした場所にかかわらず、リモート コンピューターまたはリモート デバイスを使用してグラフィックス情報を再生できます。 詳細については、次を参照してください。[する方法: グラフィックス診断再生マシンを変更](how-to-change-the-graphics-diagnostics-playback-machine.md)です。  
  
## <a name="capturing-graphics-information-from-the-command-line"></a>コマンド ラインからのグラフィックス情報のキャプチャ  
 コマンド ライン ツールを使用して、アプリからグラフィックス情報をキャプチャできます。 この DXCap.exe というツールでは、Visual Studio またはプログラムによるキャプチャを使用することなく、簡単にグラフィックス情報をキャプチャして再生できます。 具体的には、オートメーションを行う場合や、テスト環境で DXCap.exe を使用できます。 DXCap.exe の詳細については、次を参照してください[コマンド ライン キャプチャ ツール。](command-line-capture-tool.md)  
  
## <a name="see-also"></a>関連項目  
 [チュートリアル: グラフィックス情報のキャプチャ](walkthrough-capturing-graphics-information.md)