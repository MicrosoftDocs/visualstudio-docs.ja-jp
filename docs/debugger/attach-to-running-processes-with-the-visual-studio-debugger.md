---
title: デバッガーを使用して実行中のプロセスにアタッチする | Microsoft Docs
ms.custom: seodec18
ms.date: 06/12/2020
ms.topic: conceptual
f1_keywords:
- vs.debug.processes.attach
- vs.debug.process
- vs.debug.programs
- vs.debug.detaching
- vs.debug.processes
- vs.debug.error.attach
- vs.debug.remotemachine
dev_langs:
- CSharp
- FSharp
- C++
- VB
helpviewer_keywords:
- remote debugging, attaching to programs
- processes, attaching to running processes
- Attach to Process dialog box
- debugging [Visual Studio], attaching to processes
- debugger, processes
ms.assetid: 27900e58-090c-4211-a309-b3e1496d5824
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 5970e7e4408c826058cb27590254b278d4cdb9b7
ms.sourcegitcommit: 1d4f6cc80ea343a667d16beec03220cfe1f43b8e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/23/2020
ms.locfileid: "85281007"
---
# <a name="attach-to-running-processes-with-the-visual-studio-debugger"></a>Visual Studio デバッガーで実行中のプロセスへのアタッチ

ローカルまたはリモート コンピューターで実行中のプロセスに、Visual Studio デバッガーをアタッチできます。 プロセスの実行後、Visual Studio で **[デバッグ]**  >  **[プロセスにアタッチ]** を選択するか **Ctrl**+**Alt**+**P** キーを押し、 **[プロセスにアタッチ]** ダイアログを使用してプロセスにデバッガーをアタッチします。

**[プロセスにアタッチ]** を使用すると、デバッガーをアタッチした状態で、ローカルまたはリモート コンピューター上で実行中のアプリをデバッグすること、複数のプロセスを同時にデバッグすること、Visual Studio で作成されていないアプリをデバッグすること、Visual Studio から起動しなかった任意のアプリをデバッグすることができます。 たとえば、デバッガーを使用せずにアプリを実行しているときに例外が発生した場合は、アプリを実行しているプロセスにデバッガーをアタッチして、デバッグを開始することができます。

> [!TIP]
> 実際のデバッグ シナリオに **[プロセスにアタッチ]** を使用すべきかどうかわからない場合は、 「[一般的なデバッグ シナリオ](#BKMK_Scenarios)」を参照してください。

## <a name="attach-to-a-running-process-on-your-local-machine"></a><a name="BKMK_Attach_to_a_running_process"></a> ローカル コンピューターに実行中のプロセスをアタッチする

以前にアタッチしたプロセスにすばやく再アタッチするには、「[プロセスに再アタッチする](#BKMK_reattach)」を参照してください。

**ローカル コンピューター上のプロセスにアタッチするには:**

1. Visual Studio で **[デバッグ]**  >  **[プロセスにアタッチ]** を選択し (または **Ctrl**+**Alt**+**P** キーを押し)、 **[プロセスにアタッチ]** ダイアログ ボックスを開きます。

1. **[接続の種類]** を確認します。

   ほとんどの場合、 **[既定]** を使用することができます。 シナリオによっては、異なる種類の接続が必要になる場合があります。 詳細については、この記事の他のセクション、または「[一般的なデバッグ シナリオ](#BKMK_Scenarios)」を参照してください。

1. **[接続先]** をローカル コンピューター名に設定します。

   ![DBG_Basics_Attach_To_Process](../debugger/media/DBG_Basics_Attach_To_Process.png "DBG_Basics_Attach_To_Process")

1. **[使用可能なプロセス]** リストで、アタッチする 1 つまたは複数のプロセスを見つけて選択します。

   - プロセスをすばやく選択するには、 **[プロセスをフィルター]** ボックスに名前または最初の文字を入力します。

   - プロセス名がわからない場合は、一覧を参照してください。または、一般的なプロセス名の場合は「[一般的なデバッグ シナリオ](#BKMK_Scenarios)」を参照してください。

   >[!TIP]
   >**[プロセスにアタッチ]** ダイアログ ボックスが開いている間にバックグラウンドでプロセスが開始および停止される可能性があるため、実行中のプロセス リストが常に最新であるとは限りません。 いつでも **[更新]** を選択して、最新のリストを表示することができます。

1. **[アタッチ先]** フィールドに、デバッグする予定のコードの種類が一覧表示されていることを確認します。 既定の **[自動]** 設定は、ほとんどの種類のアプリで機能します。

   **[既定]** の接続の種類を使用している場合は、アタッチするコードの種類を手動で選択できます。 それ以外の場合は、 **[選択]** オプションが無効になる可能性があります。

   手動でコードの種類を選択するには:
   1. **[選択]** をクリックします。
   1. **[コードの種類の選択]** ダイアログボックスで、 **[次のコードの種類をデバッグする]** を選択します。
      リスト内のプロセスにアタッチしようとしたときにエラーが発生した場合は、[[コードの種類の選択]](../debugger/select-code-type-dialog-box.md) ダイアログ ボックスを使用して、問題の[トラブルシューティング](#BKMK_Troubleshoot_attach_errors)を行うことができます。
   1. デバッグするコードの種類を選択します。
   1. **[OK]** を選択します。

1. **[接続]** を選択します。

>[!NOTE]
>デバッグ用に複数のアプリにアタッチすることはできますが、デバッガーでアクティブになるアプリは一度に 1 つだけです。 アクティブなアプリは、Visual Studio の **[デバッグの場所]** ツールバーまたは **[プロセス]** ウィンドウで設定できます。

## <a name="attach-to-a-process-on-a-remote-computer"></a><a name="BKMK_Attach_to_a_process_on_a_remote_computer"></a>リモート コンピューター上のプロセスにアタッチする

**[プロセスにアタッチ]** ダイアログボックスでリモート コンピューターを選択し、そのコンピューター上で実行されている使用可能なプロセス リストを表示して、デバッグ用に 1 つ以上のプロセスにアタッチすることもできます。 リモート デバッガー (*msvsmon.exe*) がリモート コンピューター上で実行されている必要があります。 詳細については、「[リモート デバッグ](../debugger/remote-debugging.md)」を参照してください。

IIS に配置されている ASP.NET アプリケーションをデバッグする場合の詳細な手順については、[リモート IIS コンピューター上の ASP.NET のリモート デバッグ](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md)に関するページを参照してください。

**リモート コンピューター上で実行中のプロセスにアタッチするには:**

1. Visual Studio で **[デバッグ]**  >  **[プロセスにアタッチ]** を選択し (または **Ctrl**+**Alt**+**P** キーを押し)、 **[プロセスにアタッチ]** ダイアログ ボックスを開きます。

1. **[接続の種類]** を確認します。

   ほとんどの場合、 **[既定]** を使用することができます。 Linux やコンテナー化されたアプリのデバッグなど、一部のシナリオでは、別の接続の種類が必要です。 詳細については、この記事の他のセクション、または「[一般的なデバッグ シナリオ](#BKMK_Scenarios)」を参照してください。

1. **[接続先]** ボックスで、次のいずれかの方法を使用してリモート コンピューターを選択します。

   - **[接続先]** の横にあるドロップダウン矢印を選択し、ドロップダウン リストからコンピューター名を選択します。
   - **[接続先]** ボックスにコンピューター名を入力し、**Enter** キーを押します。

     Visual Studio で必要なポートがコンピューター名に追加されていることを確認します ( **\<remote computer name>:port** という形式で表示されます)

     ::: moniker range=">= vs-2019"

     > [!NOTE]
     > リモート コンピューター名を使用して接続できない場合は、IP とポート アドレス (`123.45.678.9:4022` など) を使用してみてください。 4024 は、Visual Studio 2019 x64 リモート デバッガーの既定のポートです。 その他のリモート デバッガーポートの割り当てについては、「[リモート デバッガーのポートの割り当て](remote-debugger-port-assignments.md)」を参照してください。

     ::: moniker-end
     ::: moniker range="vs-2017"

     > [!NOTE]
     > リモート コンピューター名を使用して接続できない場合は、IP とポート アドレス (`123.45.678.9:4022` など) を使用してみてください。 4022 は、Visual Studio 2017 x64 リモート デバッガーの既定のポートです。 その他のリモート デバッガーポートの割り当てについては、「[リモート デバッガーのポートの割り当て](remote-debugger-port-assignments.md)」を参照してください。

     ::: moniker-end

   - **[接続先]** ボックスの横にある **[検索]** ボタンを選択し、 **[リモート接続]** ダイアログボックスを開きます。 **[リモート接続]** ダイアログ ボックスには、ローカル サブネット上にあるか、コンピューターに直接接続されているすべてのデバイスが一覧表示されます。 リモート デバイスを検出するには、場合によってはサーバー上の [UDP ポート 3702 を開く](../debugger/remote-debugger-port-assignments.md)必要があります。 目的のコンピューターまたはデバイスを選択し、 **[選択]** をクリックします。

   > [!NOTE]
   > **[接続の種類]** はデバッグ セッション間で保持されます。 **[接続先]** 設定は、そのターゲットでデバッグ接続が正常に行われた場合にのみ、デバッグ セッション間で保持されます。

3. **[更新]** をクリックして **[使用可能なプロセス]** リストを設定します。

    >[!TIP]
    >**[プロセスにアタッチ]** ダイアログ ボックスが開いている間にバックグラウンドでプロセスが開始および停止される可能性があるため、実行中のプロセス リストが常に最新であるとは限りません。 いつでも **[更新]** を選択して、最新のリストを表示することができます。

4. **[使用可能なプロセス]** リストで、アタッチする 1 つまたは複数のプロセスを見つけて選択します。

   - プロセスをすばやく選択するには、 **[プロセスをフィルター]** ボックスに名前または最初の文字を入力します。

   - プロセス名がわからない場合は、一覧を参照してください。または、一般的なプロセス名の場合は「[一般的なデバッグ シナリオ](#BKMK_Scenarios)」を参照してください。

   - すべてのユーザー アカウントで実行されているプロセスを検索するには、 **[全ユーザーのプロセスを表示する]** チェック ボックスをオンにします。

     >[!NOTE]
     >信頼関係のないユーザー アカウントによって所有されているプロセスにアタッチしようとすると、セキュリティ警告の確認ダイアログ ボックスが表示されます。 詳細については、「[セキュリティ警告: 信頼されていないユーザーが所有するプロセスにアタッチするには危険が伴います。以下の情報に関して疑わしい点がある場合や、不明な場合は、このプロセスにアタッチしないでください](../debugger/security-warning-attaching-to-a-process-owned-by-an-untrusted-user.md)」を参照してください。

5. **[アタッチ先]** フィールドに、デバッグする予定のコードの種類が一覧表示されていることを確認します。 既定の **[自動]** 設定は、ほとんどの種類のアプリで機能します。

   **[既定]** の接続の種類を使用している場合は、アタッチするコードの種類を手動で選択できます。 それ以外の場合は、 **[選択]** オプションが無効になる可能性があります。

   手動でコードの種類を選択するには:
   1. **[選択]** をクリックします。
   1. **[コードの種類の選択]** ダイアログボックスで、 **[次のコードの種類をデバッグする]** を選択します。
      リスト内のプロセスにアタッチしようとしたときにエラーが発生した場合は、[[コードの種類の選択]](../debugger/select-code-type-dialog-box.md) ダイアログ ボックスを使用して、問題の[トラブルシューティング](#BKMK_Troubleshoot_attach_errors)を行うことができます。
   1. **[OK]** を選択します。

6. **[接続]** を選択します。

>[!NOTE]
>デバッグ用に複数のアプリにアタッチすることはできますが、デバッガーでアクティブになるアプリは一度に 1 つだけです。 アクティブなアプリは、Visual Studio の **[デバッグの場所]** ツールバーまたは **[プロセス]** ウィンドウで設定できます。

リモート デスクトップ (ターミナル サービス) セッションでのデバッグ時には、 **[使用可能なプロセス]** リストにすべての使用可能なプロセスが表示されない場合があります。 制限されたユーザー アカウントを持つユーザーとして Visual Studio を実行している場合、 **[使用可能なプロセス]** リストには、セッション 0 で実行されているプロセスは表示されません。 セッション 0 は、サービスや *w3wp.exe* などのその他のサーバー プロセスに使用されます。 この問題を解決するには、管理者アカウントで [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] を実行するか、ターミナル サービス セッションからではなくサーバー コンソールから [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] を実行します。

どちらの方法も実行できない場合、3 つ目の方法として、Windows コマンド ラインから `vsjitdebugger.exe -p <ProcessId>` を実行することによって、プロセスにアタッチできます。 プロセス ID は *tlist.exe* を使用して確認できます。 *tlist.exe* を入手するには、[WDK と WinDbg のダウンロード](/windows-hardware/drivers/download-the-wdk)に関するページで Windows 用のデバッグ ツールをダウンロードし、インストールします。

::: moniker range=">= vs-2019"

## <a name="attach-to-a-net-core-process-running-on-linux-using-ssh"></a>SSH を使用して Linux 上で実行されている .NET Core プロセスにアタッチする

詳細については、[Linux 上で実行されている .NET Core の SSH を使用したリモート デバッグ](../debugger/remote-debugging-dotnet-core-linux-with-ssh.md)に関するページを参照してください。

## <a name="attach-to-a-process-running-on-a-linux-docker-container"></a><a name="BKMK_Linux_Docker_Attach"></a> Linux Docker コンテナー上で実行されているプロセスにアタッチする

**[プロセスにアタッチ]** ダイアログ ボックスを使用して、ローカル コンピューターまたはリモート マシン上の Linux .NET Core Docker コンテナーで実行されているプロセスに Visual Studio デバッガーをアタッチできます。

> [!IMPORTANT]
> この機能を使用するには、.NET Core Cross-Platform Development ワークロードをインストールする必要があります。また、ソース コードへのローカル アクセス権を持っている必要があります。

**Linux Docker コンテナー内の実行中のプロセスにアタッチするには:**

1. Visual Studio で、 **[デバッグ] > [プロセスにアタッチ] (CTRL + ALT + P キー)** を選択して、 **[プロセスにアタッチ]** ダイアログ ボックスを開きます。

![[プロセスにアタッチ] メニュー](../debugger/media/attach-process-menu.png "Attach_To_Process_Menu")

2. **[接続の種類]** を **[Docker (Linux コンテナー)]** に設定します。
3. **[Docker コンテナーの選択]** ダイアログボックスを使用して **[検索]** を選択し、 **[接続先]** を設定します。

    Docker コンテナー プロセスは、ローカルでもリモートでもデバッグできます。
    
    **Docker コンテナー プロセスをローカルでデバッグするには:**
    1. **[Docker CLI ホスト]** を **[ローカル コンピューター]** に設定します。
    1. アタッチする実行中のコンテナーをリストから選択し、 **[OK]** をクリックします。
    
    ![[Docker コンテナーの選択] メニュー](../debugger/media/select-docker-container.png "Select_Docker_Container_Menu")
 
    **B.Docker コンテナー プロセスをリモートでデバッグするには:**
    
    > [!NOTE] 
    > Docker コンテナーで実行中のプロセスにリモート接続するには、2 つのオプションがあります。 SSH を使用するという 1 つ目のオプションは、ローカル コンピューターに Docker ツールがインストールされていない場合に最適です。  ローカルに Docker ツールをインストールしていて、リモートの要求を受け入れるように構成されている Docker デーモンがある場合は、2 つ目のオプションである Docker デーモンの使用を試してください。

    1. ***SSH を使用してリモート マシンに接続するには:***
        1. **[追加]** を選択してリモート システムに接続します。<br/>
        ![リモート システムに接続する](../debugger/media/connect-remote-system.png "リモート システムに接続する")
        1. SSH またはデーモンに正常に接続した後にアタッチする実行中のコンテナーを選択し、 **[OK]** をクリックします。

    
    1. ***[Docker デーモン](https://docs.docker.com/engine/reference/commandline/dockerd/)を介してプロセスを実行しているリモート コンテナーにターゲットを設定するには***
        1. **[Docker ホスト (省略可能)]** でデーモンのアドレス (つまり、TCP、IP など) を指定し、更新リンクをクリックします。
        1. デーモンに正常に接続した後にアタッチする実行中のコンテナーを選択し、 **[OK]** をクリックします。

4. Visual Studio で **[使用可能なプロセス]** リストから対応するコンテナー プロセスを選択し、 **[アタッチ]** を選択して C# のデバッグを開始します。

    ![入力された Docker の [アタッチ] メニュー](../debugger/media/docker-attach-complete.png "入力された Linux Docker の [アタッチ] メニュー")
    

## <a name="attach-to-a-process-running-on-a-windows-docker-container"></a><a name="BKMK_Windows_Docker_Attach"></a> Windows Docker コンテナー上で実行されているプロセスにアタッチする

**[プロセスにアタッチ]** ダイアログ ボックスを使用して、ローカル コンピューター上の Windows Docker コンテナーで実行されているプロセスに Visual Studio デバッガーをアタッチできます。

> [!IMPORTANT]
> この機能を .NET Core プロセスで使用するには、.NET Core Cross-Platform Development ワークロードをインストールする必要があります。また、ソース コードへのローカル アクセス権を持っている必要があります。

**Windows Docker コンテナーで実行中のプロセスにアタッチするには:**

1. Visual Studio で、 **[デバッグ] > [プロセスにアタッチ]** (**CTRL + ALT + P** キー) を選択して、 **[プロセスにアタッチ]** ダイアログ ボックスを開きます。

   ![[プロセスにアタッチ] メニュー](../debugger/media/attach-process-menu-docker-windows.png "Attach_To_Process_Menu")

2. **[接続の種類]** を **[Docker (Windows コンテナー)]** に設定します。
3. **[Docker コンテナーの選択]** ダイアログボックスを使用して **[検索]** を選択し、 **[接続先]** を設定します。

    > [!IMPORTANT]
    > ターゲット プロセスは、それが実行されている Docker Windows コンテナーと同じプロセッサ アーキテクチャを持つ必要があります。
    
   現在、SSH 経由でターゲットをリモート コンテナーに設定することはできません。Docker デーモンを使用して実行する必要があります。
    
    ***[Docker デーモン](https://docs.docker.com/engine/reference/commandline/dockerd/)を介してプロセスを実行しているリモート コンテナーにターゲットを設定するには***
    1. **[Docker ホスト (省略可能)]** でデーモンのアドレス (つまり、TCP、IP など) を指定し、更新リンクをクリックします。 

    1. デーモンに正常に接続した後にアタッチする実行中のコンテナーを選択し、[OK] を選択します。
    
4. **[使用可能なプロセス]** リストから対応するコンテナー プロセスを選択し、 **[アタッチ]** を選択して C# のデバッグを開始します。

    ![入力された Docker の [アタッチ] メニュー](../debugger/media/docker-attach-complete-windows.png "入力された Windows Docker の [アタッチ] メニュー")
    

5.  Visual Studio で [使用可能なプロセス] リストから対応するコンテナー プロセスを選択し、 **[アタッチ]** を選択して C# のデバッグを開始します。


::: moniker-end

## <a name="reattach-to-a-process"></a><a name="BKMK_reattach"></a> プロセスに再アタッチする

以前にアタッチしたプロセスにすばやく再アタッチするには、 **[デバッグ]**  >  **[プロセスに再アタッチする]** (**Shift**+**Alt**+**P** キー) を選択します。 このコマンドを選択すると、デバッガーでは、接続した最後のプロセスへの接続が直ちに試行されます。その際に、まず以前のプロセス ID との照合が試行され、それが失敗した場合は以前のプロセス名と照合されます。 一致するものが見つからない場合、または同じ名前のプロセスが複数ある場合は、 **[プロセスにアタッチ]** ダイアログ ボックスが開き、正しいプロセスを選択できます。

> [!NOTE]
> **[プロセスに再アタッチする]** コマンドは、Visual Studio 2017 以降で使用できます。

## <a name="common-debugging-scenarios"></a><a name="BKMK_Scenarios"></a> 一般的なデバッグ シナリオ

**[プロセスにアタッチ]** を使用するかどうか、どのプロセスにアタッチするかを判断できるように、いくつかの一般的なデバッグ シナリオと、使用可能なその他の手順のリンクを次の表に示します (このリストはすべてを網羅しているわけではありません)。

ユニバーサル Windows アプリ (UWP) アプリなどの一部のアプリの種類では、プロセス名に直接アタッチせず、代わりに Visual Studio の **[インストールされているアプリ パッケージのデバッグ]** メニュー オプションを使用してください (表を参照してください)。

C++ で記述されたコードにデバッガーをアタッチするには、コードが `DebuggableAttribute`を生成する必要があります。 [/ASSEMBLYDEBUG](/cpp/build/reference/assemblydebug-add-debuggableattribute) リンカー オプションを使ってリンクすると、これを自動的にコードに追加できます。

クライアント側スクリプトのデバッグでは、ブラウザーでスクリプトのデバッグを有効にする必要があります。 Chrome 上でクライアント側スクリプトをデバッグするには、コードの種類として **[JavaScript (Chrome)]** または **[JavaScript (Microsoft Edge - Chromium)]** を選択します。アプリの種類によっては、すべての Chrome インスタンスを閉じ、ブラウザーをデバッグ モードで起動する必要があります (コマンド ラインから「`chrome.exe --remote-debugging-port=9222`」と入力します)。 以前のバージョンの Visual Studio では、Chrome のスクリプト デバッガーは **Web kit** でした。

アタッチする実行中のプロセスをすばやく選択するには、Visual Studio で **Ctrl**+**Alt**+**P** キーを押し、プロセス名の最初の文字を入力します。

|シナリオ|デバッグ方法|プロセス名|メモとリンク|
|-|-|-|-|
|IIS サーバー上の ASP.NET 4 または 4.5 をリモート デバッグする|リモート ツールと **[プロセスにアタッチ]** を使用する|*w3wp.exe*|[リモート IIS コンピューター上の ASP.NET のリモート デバッグ](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md)に関するページを参照してください|
|IIS コンピューター上で ASP.NET Core をリモート デバッグする|リモート ツールと **[プロセスにアタッチ]** を使用する|*w3wp.exe* または *dotnet.exe*|.NET Core 3 以降では、*w3wp.exe* プロセスは、既定の[アプリ内ホスティング モデル](/aspnet/core/host-and-deploy/aspnet-core-module?view=aspnetcore-3.1#hosting-models)に使用されます。 アプリの配置については、[IIS への発行](/aspnet/core/host-and-deploy/iis/)に関するページを参照してください。 詳細については、[リモートの IIS コンピューター上の ASP.NET Core のリモート デバッグ](../debugger/remote-debugging-aspnet-on-a-remote-iis-computer.md#BKMK_attach)に関するページを参照してください。|
|サポートされているアプリの種類について、ローカル IIS サーバー上でクライアント側スクリプトをデバッグする |**[プロセスにアタッチ]** を使用する|*chrome.exe*、*MicrosoftEdgeCP.exe*、または *iexplore.exe*|スクリプトのデバッグを有効にする必要があります。 Chrome の場合、Chrome をデバッグ モードで実行し (コマンド ラインから「`chrome.exe --remote-debugging-port=9222`」と入力します)、 **[アタッチ先]** フィールドで **[JavaScript (Chrome)]** を選択する必要もあります。|
|ローカル コンピューター上で C#、Visual Basic、または C++ アプリをデバッグする|標準のデバッグ (**F5** キー) または **[プロセスにアタッチ]** を使用する|*\<appname>.exe*|ほとんどのシナリオでは、 **[プロセスにアタッチ]** ではなく、標準のデバッグを使用します。|
|Windows デスクトップ アプリをリモート デバッグする|リモート ツール|N/A| [C# または Visual Basic アプリのリモート デバッグ](../debugger/remote-debugging-csharp.md)または [C++ アプリのリモート デバッグ](../debugger/remote-debugging-cpp.md)に関するページを参照してください|
|Linux 上で .NET Core をデバッグする|**[プロセスにアタッチ]** を使用する|*dotnet.exe*|SSH を使用するには、[Linux 上で実行されている .NET Core の SSH を使用したリモート デバッグ](../debugger/remote-debugging-dotnet-core-linux-with-ssh.md)に関するページを参照してください。 コンテナー化されたアプリについては、この記事の前のセクションを参照してください。|
|Linux 上で Python をリモートでデバッグする|**[プロセスにアタッチ]** を使用する|*debugpy*|「[Python Tools からリモートでアタッチする](../python/debugging-python-code-on-remote-linux-machines.md#attach-remotely-from-python-tools)」を参照してください|
|デバッガーを使用せずにアプリを起動した後、ローカル コンピューター上で ASP.NET アプリをデバッグする|**[プロセスにアタッチ]** を使用する|*iiexpress.exe*|これは、(たとえば) プロファイリング時など、アプリの読み込みを高速化するために役立ちます。 |
|サーバー プロセスでサポートされている他の種類のアプリをデバッグする|サーバーがリモートの場合は、リモート ツールを使用し、 **[プロセスにアタッチ]** を行います|*chrome.exe*、*iexplore.exe*、またはその他のプロセス|必要に応じて、リソース モニターを使用してプロセスを特定します。 「[Remote debugging](../debugger/remote-debugging.md)」(リモート デバッグ) を参照してください。|
|ユニバーサル Windows アプリ (UWP)、OneCore、HoloLens、または IoT アプリをリモート デバッグする|インストールされているアプリ パッケージのデバッグ|N/A|**[プロセスにアタッチ]** を使用するのではなく、「[インストールされているアプリケーション パッケージをデバッグする](debug-installed-app-package.md)」を参照してください。|
|Visual Studio から起動しなかったユニバーサル Windows アプリ (UWP)、OneCore、HoloLens、または IoT アプリをデバッグする|インストールされているアプリ パッケージのデバッグ|N/A|**[プロセスにアタッチ]** を使用するのではなく、「[インストールされているアプリケーション パッケージをデバッグする](debug-installed-app-package.md)」を参照してください。|

## <a name="use-debugger-features"></a>デバッガーの機能を使用する

プロセスにアタッチするときに Visual Studio デバッガーの全機能 (ブレークポイントのヒットなど) を使用するには、アプリがローカル ソースとシンボルに完全に一致する必要があります。 つまり、デバッガーで正しい[シンボル (.pdb) ファイル](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)を読み込むことができる必要があります。 既定では、これにはデバッグ ビルドが必要です。

リモート デバッグのシナリオでは、Visual Studio でソース コード (またはソース コードのコピー) を開いておく必要があります。 リモート マシンでコンパイルされたアプリ バイナリは、ローカル コンピューター上と同じビルドのものである必要があります。

一部のローカル デバッグ シナリオでは、アプリに正しいシンボル ファイルが存在する場合、Visual Studio でソースにアクセスせずにデバッグできます。 既定では、これにはデバッグ ビルドが必要です。 詳細については、[シンボル ファイルとソース ファイルの指定](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)に関するページを参照してください。

## <a name="troubleshoot-attach-errors"></a><a name="BKMK_Troubleshoot_attach_errors"></a>アタッチ エラーをトラブルシューティングする

場合によっては、デバッグするコードの種類を正しく識別するためにデバッガーが必要になることがあります。 接続値が適切に設定されているものの ( **[使用可能なプロセス]** の一覧で正しいプロセスを確認できます)、デバッガーのアタッチに失敗した場合は、 **[接続の種類]** の一覧で最も適切な接続の種類を選択してください。これは、たとえば Linux または Python アプリをデバッグする場合に必要になることがあります。 既定の接続の種類を使用している場合は、このセクションで後ほど説明するように、接続する特定の種類のコードを選択することもできます。

実行中のプロセスにデバッガーがアタッチすると、このプロセスは、1 種類以上のコードを含むことができます。 デバッガーをアタッチできるコードの種類は [[コードの種類の選択]](../debugger/select-code-type-dialog-box.md) ダイアログ ボックスで表示されて選択されています。

デバッガーは、ある種類のコードに正常にアタッチできても、別の種類にはアタッチできないことがあります。 通常、これは次の場合に発生します。

- リモート コンピューター上で動作しているプロセスにアタッチしようとしている。 リモート コンピューターには、一部の種類のコードにしか対応しないリモート デバッグ コンポーネントがインストールされている場合があるためです。
- ダイレクト データベース デバッグのために複数のプロセスにアタッチしようとしている。 SQL デバッグ機能は、単一プロセスへのアタッチのみをサポートします。

デバッガーが一部の種類のコードにしかアタッチできない場合は、アタッチできなかった種類を識別するメッセージが表示されます。

デバッガーが少なくとも 1 種類のコードに正常にアタッチできる場合は、プロセスのデバッグを開始できます。 正常にアタッチされたコードの種類のみをデバッグできます。 プロセス内のアタッチされていないコードは引き続き実行されますが、そのコードに対するブレークポイントの設定、データの表示、その他のデバッグ操作を実行することはできません。

デバッガーがコードの種類へのアタッチに失敗した理由についてより詳しい情報が必要な場合は、該当するコードの種類のみに再アタッチを試してください。

**ある種類のコードへのアタッチに失敗した理由を確認するには**

1. プロセスからデタッチします。 **[デバッグ]** メニューで **[すべてデタッチ]** を選択します。

1. プロセスに再アタッチし、アタッチに失敗したコードの種類のみを選択します。

    1. **[プロセスにアタッチ]** ダイアログ ボックスの **[選択可能なプロセス]** の一覧で、プロセスを選択します。

    2. **[選択]** を選択します。

    3. **[コードの種類の選択]** ダイアログ ボックスの **[次のコードの種類をデバッグする]** をクリックし、アタッチに失敗したコードの種類を選択します。 他のコードの種類の選択を解除します。

    4. **[OK]** を選択します。

    5. **[プロセスにアタッチ]** ダイアログ ボックスで、 **[アタッチ]** を選択します。

    このとき、アタッチは完全に失敗し、詳細なエラー メッセージが表示されます。

## <a name="see-also"></a>関連項目

- [複数プロセスをデバッグする](../debugger/debug-multiple-processes.md)
- [Just-In-Time デバッグ](../debugger/just-in-time-debugging-in-visual-studio.md)
- [リモート デバッグ](../debugger/remote-debugging.md)
