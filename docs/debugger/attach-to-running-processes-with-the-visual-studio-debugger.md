---
title: Visual Studio のデバッガーでプロセスを実行中にアタッチ |Microsoft Docs
ms.custom: H1Hack27Feb2017
ms.date: 06/20/2018
ms.technology: vs-ide-debug
ms.topic: conceptual
f1_keywords:
- vs.debug.processes.attach
- vs.debug.process
- vs.debug.programs
- vs.debug.detaching
- vs.debug.processes
- vs.debug.error.attach
- vs.debug.remotemachine
dev_langs:
- CSharp
- FSharp
- C++
- VB
helpviewer_keywords:
- remote debugging, attaching to programs
- processes, attaching to running processes
- Attach to Process dialog box
- debugging [Visual Studio], attaching to processes
- debugger, processes
ms.assetid: 27900e58-090c-4211-a309-b3e1496d5824
author: mikejo5000
ms.author: mikejo
manager: douge
ms.workload:
- multiple
ms.openlocfilehash: 260047497ddb9515505c13f0b861c8eee05d71b0
ms.sourcegitcommit: e6b13898cfbd89449f786c2e8f3e3e7377afcf25
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/22/2018
ms.locfileid: "36327334"
---
# <a name="attach-to-running-processes-with-the-visual-studio-debugger"></a>実行中のプロセスへのアタッチ
ローカルまたはリモート コンピューターで実行中のプロセスに、Visual Studio デバッガーをアタッチできます。 プロセスを実行すると後でクリックして**デバッグ > プロセスにアタッチ**(またはキーを押します**CTRL + ALT + P**) を開く、**プロセスにアタッチ** ダイアログ ボックス。

この機能を使用すると、ローカルまたはリモート コンピューターで実行されているアプリのデバッグ、同時に、複数のプロセスをデバッグまたは Visual Studio で作成されていないアプリケーションをデバッグすることができます。 アプリをデバッグするときに多くの場合に便利ですが (なんらかの理由により) を起動していないアプリから Visual Studio でデバッガーをアタッチします。 たとえば、デバッガーなしのアプリを実行するいるし、例外が発生すると、する可能性がありますし、プロセスにアタッチ、デバッグを開始するアプリを実行しています。

> [!TIP]
> わからない場合は、かどうかを使用する必要が**プロセスにアタッチ**デバッグ シナリオのでしょうか。 参照してください[デバッグ シナリオ共通](#BKMK_Scenarios)します。 IIS に配置されている、参照される ASP.NET アプリケーションをデバッグする場合[リモート IIS コンピューター上の Remote Debugging ASP.NET](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md)します。

##  <a name="BKMK_Attach_to_a_running_process"></a> ローカル コンピューターで実行中のプロセスにアタッチします。  
 プロセスにアタッチするには、プロセスの名前を知る必要があります (を参照してください[デバッグ シナリオ共通](#BKMK_Scenarios)のいくつかの一般的なプロセス名)。
  
1.  Visual Studio で、次のように選択します。**デバッグ > プロセスにアタッチ**(またはキーを押します**CTRL + ALT + P**)。

    すばやく代わりに、プロセスに再アタッチする場合は、「[プロセスに再アタッチ](#BKMK_reattach)します。
  
2.  **[プロセスにアタッチ]** ダイアログ ボックスの **[選択可能なプロセス]** ボックスの一覧で、アタッチするプログラムを探します。  

     簡単にプロセスを選択するには、プロセス名の最初の文字を入力するか、プロセス名を検索、フィルター ボックスに値を入力することができます。 プロセス名がわからない場合は、次を参照してください。[デバッグ シナリオ共通](#BKMK_Scenarios)します。
     
     ![DBG_Basics_Attach_To_Process](../debugger/media/DBG_Basics_Attach_To_Process.png "DBG_Basics_Attach_To_Process") 
  
     プロセスが別のユーザー アカウントで実行されている場合は、 **[すべてのユーザーからのプロセスを表示する]** チェック ボックスをオンにします。
  
3.  **[アタッチ先]** ボックスに、デバッグするコードの種類が表示されていることを確認します。 既定の **[自動]** 設定では、デバッグするコードの種類が自動的に判断されます。 コードの種類を手動で設定するには、次の操作を行います  
  
    1.  **[プロセスにアタッチ]** ボックスで、 **[選択]** をクリックします。  
  
    2.  **[コードの種類の選択]** ダイアログ ボックスで、 **[次のコードの種類をデバッグする]** をクリックし、デバッグする種類を選択します。

        既定の**自動**のほとんどの種類のアプリの動作を設定します。 Chrome でクライアント側スクリプトをデバッグするには、次のように選択します。 **Webkit**として、コードの種類。 Chrome、可能性があります必要があるブラウザーを起動する、デバッグ、アプリケーションの種類に応じてモードで (種類`chrome.exe --remote-debugging-port=9222`コマンドラインから)。

        > [!NOTE]
        > クライアント側スクリプトのデバッグ、スクリプトのデバッグをする必要があります有効にする、ブラウザーで。 
  
    3.  **[OK]** をクリックします。  
  
4.  **[アタッチ]** をクリックします。

##  <a name="BKMK_Attach_to_a_process_on_a_remote_computer"></a> リモート コンピューター上のプロセスにアタッチします。  
プロセスにアタッチするには、プロセスの名前を知る必要があります (を参照してください[デバッグ シナリオ共通](#BKMK_Scenarios)のいくつかの一般的なプロセス名)。 IIS に配置された ASP.NET アプリのより詳細なガイダンスについては、次を参照してください。[リモート IIS コンピューター上の Remote Debugging ASP.NET](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md)します。 シナリオでは、プロセスの名前がわからない場合は、次を参照してください[共通のシナリオのデバッグ。](#BKMK_Scenarios)
  
使用すると、**プロセスにアタッチ**ダイアログ ボックスで、リモート デバッグ用に設定されている別のコンピューターを選択することができます (つまり、リモート デバッガーをリモート コンピューターで実行する必要があります)。 詳細については、次を参照してください。[リモート デバッグ](../debugger/remote-debugging.md)します。 リモート コンピューターを選択すると、そのコンピューターで実行されている選択可能なプロセスの一覧を表示して、1 つ以上のプロセスにアタッチしてデバッグを実行できます。
  
**リモート コンピューターを選択します。**  

1. Visual Studio で、次のように選択します。**デバッグ > プロセスにアタッチ**(またはキーを押します**CTRL + ALT + P**)。

    すばやく代わりに、プロセスに再アタッチする場合は、「[プロセスに再アタッチ](#BKMK_reattach)します。

2.  **[プロセスにアタッチ]** ダイアログ ボックスの **[トランスポート]** ボックスの一覧で、該当する接続の種類を選択します。 **[既定値]** は、ほとんどの場合に適切な設定です。

    **[トランスポート]** の設定は、デバッグ セッション間で保持されます。 
  
3.  **[修飾子]** ボックスの一覧でリモート コンピューター名を選択します。以下のいずれかの方法を使用します。  
  
    1.  **[修飾子]** ボックスの一覧に名前を入力します。
    
        > [!Note]
        > 後の手順では、リモート コンピューター名を使用してを接続することはできません場合、IP アドレスを使用します。 (ポート番号が自動的に表示、プロセスを選択した後。 手動で入力することもできます。 次の図では、4020 はリモート デバッガーの既定のポート) です。  

        使用する場合、**検索**、ボタンをクリックする必要があります[UDP ポート 3702 を開く](../debugger/remote-debugger-port-assignments.md)サーバー。
  
    2.  **[修飾子]** ボックスの一覧の横のドロップダウン矢印をクリックし、一覧でコンピューター名を選択します。  
  
    3.  **[修飾子]** ボックスの一覧の横にある **[検索]** ボタンをクリックして、 **[リモート デバッガー接続の選択]** ダイアログ ボックスを開きます。 **[リモート デバッガー接続の選択]** ダイアログ ボックスには、ローカル サブネット上にあるデバイスと、イーサネット ケーブルで自分のコンピューターに直接接続されているデバイスがすべて表示されます。 目的のコンピューターまたはデバイスをクリックし、 **[選択]** をクリックします。 
  
     **[修飾子]** の設定は、その修飾子でデバッグ接続が成功した場合のみ、デバッグ セッション間で保持されます。
     
4.  クリックして**更新**します。

      **[プロセス]** ダイアログ ボックスを開くと、 **[選択可能なプロセス]** ボックスが自動的に表示されます。 このダイアログ ボックスが開いている間に、プロセスをバックグラウンドで開始および停止できます。 このため、内容が常に最新であるとは限りません。 **[更新]** をクリックすると、いつでも一覧の内容を更新して、現在のプロセス一覧を確認できます。 
     
4.  **[プロセスにアタッチ]** ダイアログ ボックスの **[選択可能なプロセス]** ボックスの一覧で、アタッチするプログラムを探します。

     簡単にプロセスを選択するには、プロセス名の最初の文字を入力するか、プロセス名を検索、フィルター ボックスに値を入力することができます。 プロセス名がわからない場合は、次を参照してください。[デバッグ シナリオ共通](#BKMK_Scenarios)します。
  
     プロセスが別のユーザー アカウントで実行されている場合は、 **[すべてのユーザーからのプロセスを表示する]** チェック ボックスをオンにします。
     
5.  **[アタッチ]** をクリックします。

## <a name="BKMK_reattach"></a> プロセスに再アタッチします。

選択してに接続されていたプロセスにすばやく再アタッチできる**デバッグ > プロセスに再アタッチしています.**(**Shift + Alt + P**)。 このコマンドを選択すると、デバッガーはすぐにしようとアタッチを使用してにアタッチされているプロセスでは、最後に、**プロセスにアタッチ** ダイアログ ボックス。

デバッガーは、前のプロセス ID と一致する最初の試行によって再アタッチしてが失敗したかどうか、前のプロセス名を照合することによりします。 一致が見つからない場合、または、同じ名前で見つかった複数のプロセスがある場合、**プロセスにアタッチ**正しいプロセスを選択するには、ダイアログ ボックスが表示されます。

> [!NOTE]
> **プロセスに再アタッチ**コマンドは、Visual Studio 2017 の新機能です。

## <a name="additional-info"></a>追加情報

デバッグ中には複数のプログラムにアタッチできますが、デバッガーでアクティブになっているプログラムは常に 1 つだけです。 アクティブなプログラムは、 **[デバッグの場所]** ツール バーまたは **[プロセス]** ウィンドウで設定できます。  
  
信頼関係のないユーザー アカウントによって所有されているプロセスにアタッチしようとすると、セキュリティ警告の確認ダイアログ ボックスが表示されます。 詳細については、次を参照してください。[セキュリティ警告: 信頼されていないユーザーによって所有されているプロセスにアタッチするのは危険です。次の情報に関して疑わしい、または不明ながこのプロセスにアタッチしない](../debugger/security-warning-attaching-to-a-process-owned-by-an-untrusted-user.md)します。  
  
リモート デスクトップ (ターミナル サービス) セッションでのデバッグ時には、 **[選択可能なプロセス]** ボックスに、使用可能なプロセスのすべてが表示されない場合があります。 Visual Studio を、制限付きユーザー アカウントを持つユーザーとして実行している場合、 **[選択可能なプロセス]** ボックスの一覧には、セッション 0 で実行しているプロセスは表示されません。セッション 0 は、サービスおよび w3wp.exe を含むその他のサーバー プロセス用に使用されます。 この問題を解決するには、管理者アカウントで [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] を実行するか、ターミナル サービス セッションからではなくサーバー コンソールから [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] を実行します。 どちらの方法も実行できない場合、3 つ目の方法として、Windows コマンド ラインから `vsjitdebugger.exe -p` *ProcessId* を実行することによって、プロセスにアタッチできます。 プロセス ID は tlist.exe を使用して確認できます。 Tlist.exe を入手するをダウンロードしてインストールのデバッグ ツールの Windows で使用可能な[WDK と WinDbg のダウンロード](/windows-hardware/drivers/download-the-wdk)します。

## <a name="BKMK_Scenarios"></a> 一般的なデバッグ シナリオ

使用する必要があるかどうかを識別するのに役立つ**プロセスにアタッチ**、アタッチするには、どのようなプロセスといくつかの一般的なデバッグ シナリオを次に示します (一覧は完全ではありません)。 詳細な手順については、使用可能なリンクを提供します。 ダイアログ ボックスにすばやくアクセスするには、使用**CTRL + ALT + P**し、プロセス名の最初の文字を入力します。

(UWP アプリ) のようなアプリの種類によって、プロセス名に直接接続せずを使用して、**インストール済みアプリ パッケージのデバッグ**メニュー オプションを使用 (テーブルを参照してください)。

> [!NOTE]
> Visual Studio で基本的なデバッグ方法の詳細については、次を参照してください。[デバッガーの概要](../debugger/getting-started-with-the-debugger.md)します。

|シナリオ|メソッドをデバッグします。|プロセス名|メモとリンク|
|-|-|-|-|
|ASP.NET 4 のリモート デバッグまたは IIS サーバー上の 4.5|リモート ツールを使用して、プロセスにアタッチします。|w3wp.exe|参照してください[Remote Debugging ASP.NET on リモート IIS コンピューター](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md)|
|ASP.NET Core、IIS サーバー上のリモート デバッグ|リモート ツールを使用して、プロセスにアタッチします。|dotnet.exe|アプリの展開を参照してください。 [Publish to IIS](https://docs.asp.net/en/latest/publishing/iis.html)します。 デバッグについては、次を参照してください[リモート IIS コンピューター上のリモート デバッグ ASP.NET Core。](../debugger/remote-debugging-aspnet-on-a-remote-iis-computer.md)|
|ローカル IIS サーバー (サポートされているアプリの種類のみ) でクライアント側スクリプトをデバッグします。|使用がプロセスにアタッチします。|chrome.exe や MicrosoftEdgeCP.exe、iexplore.exe|スクリプトのデバッグを有効にする必要があります。 Chrome、デバッグ モードで Chrome も実行する必要があります**Webkit コード**で、**にアタッチ**フィールド。|
|ローカル コンピューター上の c#、Visual Basic、または C++ アプリをデバッグします。|いずれかを使用して、[標準デバッグ](../debugger/getting-started-with-the-debugger.md)またはプロセスにアタッチします。|*appname*.exe|ほとんどのシナリオで標準的なデバッグを使用して、プロセスにアタッチできません。|
|Windows デスクトップ アプリのリモート デバッグ|リモート ツール|N/A| 参照してください[c# または Visual Basic アプリのリモート デバッグ](../debugger/remote-debugging-csharp.md)または[C++ アプリのリモート デバッグ](../debugger/remote-debugging-cpp.md)|
|デバッガーなしのアプリを起動した後、ローカル コンピューター上の ASP.NET アプリをデバッグします。|使用がプロセスにアタッチします。|iiexpress.exe|これは、アプリをロードすると便利な可能性がありますより高速など (たとえば) プロファイリングを行う場合。 |
|サーバー プロセスでその他のサポートされているアプリの種類をデバッグします。|(リモート サーバーの場合)、リモート ツールを使用して、プロセスにアタッチします。|chrome.exe、iexplore.exe、またはその他のプロセス|必要に応じて、リソース モニターを使用して、プロセスを識別できるようにします。 参照してください[リモート デバッグ](../debugger/remote-debugging.md)と以降のセクションでは、このトピックの「|
|ユニバーサル (UWP) や OneCore、HoloLens、IoT アプリのリモート デバッグします。|インストールされているアプリ パッケージをデバッグします。|N/A|参照してください[インストール済みのアプリ パッケージをデバッグ](debug-installed-app-package.md)を使用してではなく**プロセスにアタッチします。**|
|Visual Studio から起動していない、ユニバーサル Windows アプリ (UWP) や OneCore、HoloLens、IoT アプリをデバッグします。|インストールされているアプリ パッケージをデバッグします。|N/A|参照してください[インストール済みのアプリ パッケージをデバッグ](debug-installed-app-package.md)を使用してではなく**プロセスにアタッチします。**|  
  
> [!NOTE]
>  C++ で記述されたコードにデバッガーをアタッチするには、コードが `DebuggableAttribute`を生成する必要があります。 [/ASSEMBLYDEBUG](/cpp/build/reference/assemblydebug-add-debuggableattribute) リンカー オプションを使ってリンクすると、これを自動的にコードに追加できます。

## <a name="what-debugger-features-can-i-use"></a>どのようなデバッガー機能を使用できますか。

Visual Studio デバッガー (ブレークポイントにヒット) などの完全な機能を使用する実行可能ファイルのローカル ソースとシンボルする必要があります正確に一致プロセスにアタッチ、するときに (つまり、デバッガーが、正しいを読み込むことにある必要があります[シンボル (.pbd) ファイル](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)). 既定では、デバッグ ビルドが必要です。

リモートのデバッグ シナリオには、Visual Studio で開いているソース コード (または、ソース コードのコピー) が必要です。 リモート コンピューター上でコンパイル済みのアプリ バイナリをローカル コンピューター上と同じビルドからあります。

いくつかのローカル デバッグ シナリオでデバッグできます Visual Studio で、ソースへのアクセスなしで、適切なシンボル ファイルがアプリに存在する場合 (既定では、これが必要、デバッグ ビルド)。 詳細については、次を参照してください。[指定シンボルとソース ファイル](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)します。
  
##  <a name="BKMK_Troubleshoot_attach_errors"></a> トラブルシューティング: アタッチ エラー  
 実行中のプロセスにデバッガーがアタッチすると、このプロセスは、1 種類以上のコードを含むことができます。 デバッガーをアタッチできるコードの種類は **[コードの種類の選択]** ダイアログ ボックスで表示されて選択されています。  
  
 デバッガーは、ある種類のコードに正常にアタッチできても、別の種類にはアタッチできないことがあります。 この問題は、リモート コンピューターで動作しているプロセスにアタッチしようとする場合に発生することがあります。 リモート コンピューターには、一部の種類のコードにしか対応しないリモート デバッグ コンポーネントがインストールされている場合があるためです。 また、ダイレクト データベース デバッグのために複数のプロセスにアタッチしようとした場合にも発生することがあります。 SQL デバッグ機能は、単一プロセスへのアタッチのみをサポートします。  
  
 デバッガーが一部の種類のコードにしかアタッチできない場合は、アタッチできなかった種類を識別するメッセージが表示されます。  
  
 デバッガーが少なくとも 1 種類のコードに正常にアタッチできる場合は、プロセスのデバッグを開始できます。 正常にアタッチされたコードの種類のみをデバッグできます。 上記のメッセージの例は、種類がスクリプトのコードにアタッチできなかったことを示しています。 この場合、プロセス内でスクリプト コードをデバッグできません。 プロセス内のスクリプト コードはそのまま実行されますが、スクリプトでのブレークポイントの設定、データの表示、またはその他のデバッグ操作は実行できません。  
  
 デバッガーがコードの種類へのアタッチに失敗した理由についてより詳しい情報が必要な場合は、該当するコードの種類のみに再アタッチを試行できます。  
  
 **コードの種類をアタッチが失敗した理由に関する特定の情報を取得するには**  
  
1.  プロセスからデタッチします。 **[デバッグ]** メニューの **[すべてデタッチ]** をクリックします。  
  
2.  コードの種類を 1 つだけ選択して、プロセスに再度アタッチします。  
  
    1.  **[プロセスにアタッチ]** ダイアログ ボックスの **[選択可能なプロセス]** ボックスの一覧で、プロセスを選択します。  
  
    2.  **[選択]** をクリックします。  
  
    3.  **[コードの種類の選択]** ダイアログ ボックスの **[次のコードの種類をデバッグする]** をクリックし、アタッチに失敗したコードの種類を選択します。 他のコードをすべてオフにします。  
  
    4.  **[OK]** をクリックします。 **[コードの種類の選択]** ダイアログ ボックスが閉じます。  
  
    5.  **[プロセスにアタッチ]** ダイアログ ボックスで、 **[アタッチ]** をクリックします。  
  
     このとき、アタッチは完全に失敗し、詳細なエラー メッセージが表示されます。  
  
## <a name="see-also"></a>関連項目  
 [複数のプロセスをデバッグします。](../debugger/debug-multiple-processes.md)   
 [ジャストイン タイムのデバッグ](../debugger/just-in-time-debugging-in-visual-studio.md)   
 [Remote Debugging](../debugger/remote-debugging.md)