---
title: "Visual Studio のデバッガーでプロセスを実行するアタッチ |Microsoft ドキュメント"
ms.custom: H1Hack27Feb2017
ms.date: 05/18/2017
ms.reviewer: 
ms.suite: 
ms.technology: vs-ide-debug
ms.tgt_pltfrm: 
ms.topic: article
f1_keywords:
- vs.debug.processes.attach
- vs.debug.process
- vs.debug.programs
- vs.debug.detaching
- vs.debug.processes
- vs.debug.error.attach
- vs.debug.remotemachine
dev_langs:
- CSharp
- FSharp
- C++
- VB
helpviewer_keywords:
- remote debugging, attaching to programs
- processes, attaching to running processes
- Attach to Process dialog box
- debugging [Visual Studio], attaching to processes
- debugger, processes
ms.assetid: 27900e58-090c-4211-a309-b3e1496d5824
caps.latest.revision: "53"
author: mikejo5000
ms.author: mikejo
manager: ghogen
ms.openlocfilehash: e7ed9c7f362399d9cd256b02af9f1fe1bcecf8ce
ms.sourcegitcommit: 26419ab0cccdc30d279c32d6a841758cfa903806
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/11/2017
---
# <a name="attach-to-running-processes-with-the-visual-studio-debugger"></a>実行中のプロセスへのアタッチ
ローカルまたはリモート コンピューターで実行中のプロセスに、Visual Studio デバッガーをアタッチできます。 プロセスを実行した後にをクリックして**デバッグ > プロセスにアタッチする**(またはキーを押して**CTRL + ALT + P**) を開くには、**プロセスにアタッチする**] ダイアログ ボックス。

この機能を使用すると、ローカルまたはリモート コンピューターで実行されているアプリのデバッグ、同時に複数のプロセスをデバッグまたは Visual Studio で作成されていないアプリケーションをデバッグすることができます。 アプリをデバッグする場合に多くの場合に役立ちますが、(なんらかの理由により) を起動していないアプリから Visual Studio デバッガーでは、接続されています。 たとえば場合は、デバッガーを使用せず、アプリを実行しているし、例外が発生すると、する可能性がありますし、プロセスにアタッチ、デバッグを開始するアプリケーションを実行します。

> [!TIP]
> わからない場合は、かどうかを使用する必要が**プロセスにアタッチする**デバッグ シナリオのですか? 参照してください[一般的なデバッグ シナリオ](#BKMK_Scenarios)です。 IIS に配置されているを参照している ASP.NET アプリケーションをデバッグする場合は、[リモート IIS コンピューター上でリモート デバッグの ASP.NET](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md)です。

##  <a name="BKMK_Attach_to_a_running_process"></a>ローカル コンピューターで実行中のプロセスにアタッチします。  
 プロセスにアタッチするために、プロセスの名前を知る必要があります (を参照してください[一般的なデバッグ シナリオ](#BKMK_Scenarios)のいくつかの一般的なプロセス名)。
  
1.  Visual Studio で、次のように選択します。**デバッグ > プロセスにアタッチする**(またはキーを押して**CTRL + ALT + P**)。

    すばやく代わりに、プロセスを再アタッチする場合は、「[プロセスを再アタッチ](#BKMK_reattach)です。
  
2.  **[プロセスにアタッチ]** ダイアログ ボックスの **[選択可能なプロセス]** ボックスの一覧で、アタッチするプログラムを探します。  

     すばやく選択するか、プロセスをプロセス名の最初の文字を入力します。 このプロセスの名前がわからない場合は、次を参照してください。[一般的なデバッグ シナリオ](#BKMK_Scenarios)です。
     
     ![DBG_Basics_Attach_To_Process](../debugger/media/DBG_Basics_Attach_To_Process.png "DBG_Basics_Attach_To_Process") 
  
     プロセスが別のユーザー アカウントで実行されている場合は、 **[すべてのユーザーからのプロセスを表示する]** チェック ボックスをオンにします。
  
3.  **[アタッチ先]** ボックスに、デバッグするコードの種類が表示されていることを確認します。 既定の **[自動]** 設定では、デバッグするコードの種類が自動的に判断されます。 コードの種類を手動で設定するには、次の操作を行います  
  
    1.  **[プロセスにアタッチ]** ボックスで、 **[選択]**をクリックします。  
  
    2.  **[コードの種類の選択]** ダイアログ ボックスで、 **[次のコードの種類をデバッグする]** をクリックし、デバッグする種類を選択します。  
  
    3.  **[OK]**をクリックします。  
  
4.  **[アタッチ]**をクリックします。

##  <a name="BKMK_Attach_to_a_process_on_a_remote_computer"></a>リモート コンピューター上のプロセスにアタッチします。  
 プロセスにアタッチするために、プロセスの名前を知る必要があります (を参照してください[一般的なデバッグ シナリオ](#BKMK_Scenarios)のいくつかの一般的なプロセス名)。 IIS に配置されている ASP.NET アプリのより詳細なガイダンスについては、次を参照してください。[リモート IIS コンピューター上でリモート デバッグの ASP.NET](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md)です。 他のアプリについては、タスク マネージャーで、プロセスの名前を検索できる場合があります。
  
 **[プロセスにアタッチ]** ダイアログ ボックスでは、リモート デバッグ用にセットアップした他のコンピューターを選択できます。 詳細については、次を参照してください。[リモート デバッグ](../debugger/remote-debugging.md)です。 リモート コンピューターを選択すると、そのコンピューターで実行されている選択可能なプロセスの一覧を表示して、1 つ以上のプロセスにアタッチしてデバッグを実行できます。
  
 **リモート コンピューターを選択します。**  

1. Visual Studio で、次のように選択します。**デバッグ > プロセスにアタッチする**(またはキーを押して**CTRL + ALT + P**)。

    すばやく代わりに、プロセスを再アタッチする場合は、「[プロセスを再アタッチ](#BKMK_reattach)です。

2.  **[プロセスにアタッチ]** ダイアログ ボックスの **[トランスポート]** ボックスの一覧で、該当する接続の種類を選択します。 **[既定値]** は、ほとんどの場合に適切な設定です。

    **[トランスポート]** の設定は、デバッグ セッション間で保持されます。 
  
3.  **[修飾子]** ボックスの一覧でリモート コンピューター名を選択します。以下のいずれかの方法を使用します。  
  
    1.  **[修飾子]** ボックスの一覧に名前を入力します。
    
        >**注**場合、後の手順では、リモート コンピューター名を使用してを接続することはできません、IP アドレスを使用します。 (ポート番号が自動的に表示プロセスを選択した後。 手動で入力することもできます。 次の図では、4020 はリモート デバッガーの既定のポート) です。  

        使用する場合、**検索**、ボタンをクリックする必要があります[UDP ポート 3702 を開く](../debugger/remote-debugger-port-assignments.md)サーバーにします。
  
    2.  **[修飾子]** ボックスの一覧の横のドロップダウン矢印をクリックし、一覧でコンピューター名を選択します。  
  
    3.  **[修飾子]** ボックスの一覧の横にある**[検索]** ボタンをクリックして、 **[リモート デバッガー接続の選択]** ダイアログ ボックスを開きます。 **[リモート デバッガー接続の選択]** ダイアログ ボックスには、ローカル サブネット上にあるデバイスと、イーサネット ケーブルで自分のコンピューターに直接接続されているデバイスがすべて表示されます。 目的のコンピューターまたはデバイスをクリックし、 **[選択]**をクリックします。 
  
     **[修飾子]** の設定は、その修飾子でデバッグ接続が成功した場合のみ、デバッグ セッション間で保持されます。
     
4.  をクリックして**更新**です。

      **[プロセス]** ダイアログ ボックスを開くと、 **[選択可能なプロセス]** ボックスが自動的に表示されます。 このダイアログ ボックスが開いている間に、プロセスをバックグラウンドで開始および停止できます。 このため、内容が常に最新であるとは限りません。 **[更新]**をクリックすると、いつでも一覧の内容を更新して、現在のプロセス一覧を確認できます。 
     
4.  **[プロセスにアタッチ]** ダイアログ ボックスの **[選択可能なプロセス]** ボックスの一覧で、アタッチするプログラムを探します。

     すばやく選択するか、プロセスをプロセス名の最初の文字を入力します。 このプロセスの名前がわからない場合は、次を参照してください。[一般的なデバッグ シナリオ](#BKMK_Scenarios)です。
  
     プロセスが別のユーザー アカウントで実行されている場合は、 **[すべてのユーザーからのプロセスを表示する]** チェック ボックスをオンにします。
     
5.  **[アタッチ]**をクリックします。

## <a name="BKMK_reattach"></a>プロセスを再アタッチします。

選択してに接続されていたプロセスを簡単に再アタッチできます**デバッグ > プロセスを再アタッチしています.**(**Shift キーを押しながら alt キーを押しながら P**)。 このコマンドを選択すると、デバッガーはすぐにアタッチしようと最後のプロセスを使用してに接続されている、**プロセスにアタッチする**] ダイアログ ボックス。

デバッガーは、前のプロセス ID と一致する最初に試みることによって再アタッチしてを失敗したかどうか、前のプロセス名を照合することによってです。 一致が見つからない場合、または、同じ名前で検出された複数のプロセスがある場合、**プロセスにアタッチする**] ダイアログ ボックスが表示され、適切なプロセスを選択できます。

> [!NOTE]
> **プロセスを再アタッチ**コマンドは、Visual Studio 2017 の新機能です。

## <a name="additional-info"></a>追加情報

デバッグ中には複数のプログラムにアタッチできますが、デバッガーでアクティブになっているプログラムは常に 1 つだけです。 アクティブなプログラムは、 **[デバッグの場所]** ツール バーまたは **[プロセス]** ウィンドウで設定できます。 詳細については、次を参照してください。[する方法: 現在のプログラム設定](http://msdn.microsoft.com/en-us/7e1d7fa5-0e40-44cf-8c41-d3dba31c969e)です。  
  
信頼関係のないユーザー アカウントによって所有されているプロセスにアタッチしようとすると、セキュリティ警告の確認ダイアログ ボックスが表示されます。 詳細については、次を参照してください。[セキュリティ警告: 信頼されていないユーザーが所有するプロセスにアタッチするのは危険です。次の情報に関して疑わしい点またはことを確認して場合、このプロセスに接続しないで](../debugger/security-warning-attaching-to-a-process-owned-by-an-untrusted-user-can-be-dangerous-if-the-following-information-looks-suspicious-or-you-are-unsure-do-not-attach-to-this-process.md)です。  
  
リモート デスクトップ (ターミナル サービス) セッションでのデバッグ時には、 **[選択可能なプロセス]** ボックスに、使用可能なプロセスのすべてが表示されない場合があります。 Visual Studio を、制限付きユーザー アカウントを持つユーザーとして実行している場合、 **[選択可能なプロセス]** ボックスの一覧には、セッション 0 で実行しているプロセスは表示されません。セッション 0 は、サービスおよび w3wp.exe を含むその他のサーバー プロセス用に使用されます。 この問題を解決するには、管理者アカウントで [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] を実行するか、ターミナル サービス セッションからではなくサーバー コンソールから [!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)] を実行します。 どちらの方法も実行できない場合、3 つ目の方法として、Windows コマンド ラインから `vsjitdebugger.exe -p` *ProcessId* を実行することによって、プロセスにアタッチできます。 プロセス ID は tlist.exe を使用して確認できます。 tlist.exe を入手するには、「  [WDK と WinDbg のダウンロード](http://go.microsoft.com/fwlink/?LinkId=168279)」で Windows 対応のデバッグ ツールをダウンロードし、インストールします。

## <a name="BKMK_Scenarios"></a>一般的なデバッグ シナリオ

使用する必要があるかどうかを識別するのに役立つ**プロセスにアタッチする**と、アタッチするには、どのようなプロセス、いくつかの一般的なデバッグ シナリオを挙げています (リストは完全ではありません)。 詳細については、使用可能なは、マイクロソフトへのリンクを提供します。

一部のアプリの種類 (UWP アプリ) のように、プロセス名に直接アタッチしないが使用して、**インストール済みアプリ パッケージのデバッグ**メニュー オプションを代わりに (テーブルを参照してください)。

> [!NOTE]
> Visual Studio で基本的なデバッグについては、次を参照してください。[デバッガーの使用を開始する](../debugger/getting-started-with-the-debugger.md)です。

|シナリオ|メソッドをデバッグします。|プロセス名|ノートとリンク|
|-|-|-|-|
|ローカル コンピューター上のマネージまたはネイティブ アプリをデバッグします。|使用するプロセスにアタッチまたは[標準デバッグ](../debugger/getting-started-with-the-debugger.md)|*appname*.exe|ダイアログ ボックスを簡単にアクセスするを使用して**CTRL + ALT + P**し、プロセス名の最初の文字を入力します。|
|デバッガーを使用しないで、アプリの開始後に、ローカル コンピューター上の ASP.NET アプリをデバッグします。|使用するプロセスにアタッチします。|iiexpress.exe|これが、アプリの読み込みに役に立ちます高速など (たとえば) プロファイリングを行う場合。 |
|リモート デバッグ ASP.NET 4 または 4.5 IIS サーバー|リモート ツールを使用して、プロセスにアタッチします。|w3wp.exe|参照してください[リモート IIS のリモート コンピューター上の ASP.NET のデバッグ](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md)|
|IIS サーバー上のリモート デバッグ ASP.NET Core|リモート ツールを使用して、プロセスにアタッチします。|dotnet.exe|アプリの展開を参照してください。[を IIS に発行](https://docs.asp.net/en/latest/publishing/iis.html)です。 デバッグは、次を参照してください[リモート IIS コンピューター上のリモート デバッグ ASP.NET Core。](../debugger/remote-debugging-aspnet-on-a-remote-iis-computer.md)|
|サーバー プロセスでその他のサポートされているアプリの種類をデバッグします。|(リモート サーバーの場合)、リモート ツールを使用し、プロセスにアタッチします。|iexplore.exe または他のプロセス|必要に応じて、タスク マネージャーを使用して、プロセスの特定に役立ちます。 参照してください[リモート デバッグ](../debugger/remote-debugging.md)と以降のセクションでは、このトピックの内容|
|Windows デスクトップ アプリのリモート デバッグ|リモート ツールと f5 キーを押します|N/A| 参照してください[リモート デバッグ](../debugger/remote-debugging.md)|
|リモート デバッグ ユニバーサル (UWP)、OneCore、HoloLens や IoT アプリ|インストールされているアプリ パッケージをデバッグします。|N/A|参照してください[インストール済みのアプリ パッケージをデバッグ](debug-installed-app-package.md)を使用せずに**プロセスにアタッチします。**|
|Visual Studio から起動していない、ユニバーサル Windows アプリ (UWP)、OneCore、HoloLens や IoT アプリをデバッグします。|インストールされているアプリ パッケージをデバッグします。|N/A|参照してください[インストール済みのアプリ パッケージをデバッグ](debug-installed-app-package.md)を使用せずに**プロセスにアタッチします。**|
  
> [!WARNING]
>  JavaScript で記述された UWP に接続するにまずそのアプリに対してデバッグを有効にする必要があります。 参照してください[デバッガーをアタッチ](../debugger/start-a-debugging-session-for-store-apps-in-visual-studio-javascript.md#BKMK_Attach_the_debugger)Windows デベロッパー センターにします。  
  
> [!NOTE]
>  C++ で記述されたコードにデバッガーをアタッチするには、コードが `DebuggableAttribute`を生成する必要があります。 [/ASSEMBLYDEBUG](/cpp/build/reference/assemblydebug-add-debuggableattribute) リンカー オプションを使ってリンクすると、これを自動的にコードに追加できます。

## <a name="what-debugger-features-can-i-use"></a>どのようなデバッガーの機能を使用できますか。

(ブレークポイントをヒット) など、Visual Studio デバッガーの全機能を使用する実行可能ファイルのローカル ソースとシンボルが正確に一致プロセスへのアタッチ、ときに (つまり、デバッガーが、正しいを読み込むことにする必要があります[シンボル (.pbd) ファイル](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)). 既定では、デバッグ ビルドが必要です。

リモートのデバッグ シナリオでは、Visual Studio で既に開かれているソース コード (または、ソース コードのコピー) が必要です。 リモート コンピューターでコンパイルされたアプリのバイナリは、ローカル コンピューター上と同じビルドからでなければなりません。

ローカルのデバッグ シナリオでデバッグできます Visual Studio で、ソースへのアクセスなしで適正なシンボル ファイルが、アプリに存在する場合 (既定では、これが必要、デバッグ ビルド)。 詳細については、次を参照してください。[指定シンボルとソース ファイル](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)です。
  
##  <a name="BKMK_Troubleshoot_attach_errors"></a>トラブルシューティング: アタッチ エラー  
 実行中のプロセスにデバッガーがアタッチすると、このプロセスは、1 種類以上のコードを含むことができます。 デバッガーをアタッチできるコードの種類は **[コードの種類の選択]** ダイアログ ボックスで表示されて選択されています。  
  
 デバッガーは、ある種類のコードに正常にアタッチできても、別の種類にはアタッチできないことがあります。 この問題は、リモート コンピューターで動作しているプロセスにアタッチしようとする場合に発生することがあります。 リモート コンピューターには、一部の種類のコードにしか対応しないリモート デバッグ コンポーネントがインストールされている場合があるためです。 また、ダイレクト データベース デバッグのために複数のプロセスにアタッチしようとした場合にも発生することがあります。 SQL デバッグ機能は、単一プロセスへのアタッチのみをサポートします。  
  
 デバッガーが一部の種類のコードにしかアタッチできない場合は、アタッチできなかった種類を識別するメッセージが表示されます。  
  
 デバッガーが少なくとも 1 種類のコードに正常にアタッチできる場合は、プロセスのデバッグを開始できます。 正常にアタッチされたコードの種類のみをデバッグできます。 上記のメッセージの例は、種類がスクリプトのコードにアタッチできなかったことを示しています。 この場合、プロセス内でスクリプト コードをデバッグできません。 プロセス内のスクリプト コードはそのまま実行されますが、スクリプトでのブレークポイントの設定、データの表示、またはその他のデバッグ操作は実行できません。  
  
 デバッガーがコードの種類へのアタッチに失敗した理由についてより詳しい情報が必要な場合は、該当するコードの種類のみに再アタッチを試行できます。  
  
 **コードの種類のアタッチが失敗した理由に関する特定の情報を取得するには**  
  
1.  プロセスからデタッチします。 **[デバッグ]** メニューの **[すべてデタッチ]**をクリックします。  
  
2.  コードの種類を 1 つだけ選択して、プロセスに再度アタッチします。  
  
    1.  **[プロセスにアタッチ]** ダイアログ ボックスの **[選択可能なプロセス]** ボックスの一覧で、プロセスを選択します。  
  
    2.  **[選択]**をクリックします。  
  
    3.  **[コードの種類の選択]** ダイアログ ボックスの **[次のコードの種類をデバッグする]** をクリックし、アタッチに失敗したコードの種類を選択します。 他のコードをすべてオフにします。  
  
    4.  **[OK]**をクリックします。 **[コードの種類の選択]** ダイアログ ボックスが閉じます。  
  
    5.  **[プロセスにアタッチ]** ダイアログ ボックスで、 **[アタッチ]**をクリックします。  
  
     このとき、アタッチは完全に失敗し、詳細なエラー メッセージが表示されます。  
  
## <a name="see-also"></a>関連項目  
 [複数のプロセスをデバッグします。](../debugger/debug-multiple-processes.md)   
 [ジャスト イン タイム デバッグ](../debugger/just-in-time-debugging-in-visual-studio.md)   
 [Remote Debugging](../debugger/remote-debugging.md)