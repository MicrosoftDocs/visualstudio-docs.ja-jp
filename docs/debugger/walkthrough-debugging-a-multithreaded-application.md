---
title: デバッガーでスレッドを表示 |Microsoft Docs
ms.date: 10/29/2018
ms.topic: conceptual
f1_keywords:
- vs.debug.threads
dev_langs:
- CSharp
- VB
- FSharp
- C++
helpviewer_keywords:
- threading [Visual Studio], debugging
- Thread.Name property
- debugger, Threads window
- SetThreadName function
- Threads window
- '@TIB'
- debugging [Visual Studio], threads
ms.assetid: 590ffd57-0556-43d8-8962-ee27e5b2b7d7
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: fddd8efd11d2a3d61f0cff33cb832ebd8a0c5d2a
ms.sourcegitcommit: 47eeeeadd84c879636e9d48747b615de69384356
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "63406942"
---
# <a name="view-threads-in-the-visual-studio-debugger-by-using-the-threads-window-c-visual-basic-c"></a>[スレッド] ウィンドウを使用して Visual Studio デバッガーでスレッドを表示 (C#、Visual Basic、 C++)
**スレッド**ウィンドウを確認してデバッグしているアプリケーションのスレッドを使用します。 ステップ バイ ステップ ガイダンスを使用する方法について、**スレッド**ウィンドウを参照してください[チュートリアル。[スレッド] ウィンドウを使用してデバッグ](../debugger/how-to-use-the-threads-window.md)します。

## <a name="use-the-threads-window"></a>スレッド ウィンドウを開く
 **スレッド**ウィンドウには、テーブルの各行が、アプリケーションで別のスレッドについて説明します。 既定では、このテーブルにはアプリケーション内のすべてのスレッドが表示されますが、目的のスレッドのみを表示するように一覧にフィルターをかけることができます。 各列には、さまざまな種類の情報について説明します。 一部の列は非表示にすることもできます。 すべての列を表示する場合、次の列が左から右へ。

- **フラグ**:ラベルの付いていないこのコラムでは、特に注意するスレッドをマークできます。 スレッドにフラグを設定する方法については、次を参照してください。[方法。フラグを設定し、スレッドのフラグ解除](../debugger/how-to-flag-and-unflag-threads.md)します。

- **現在のスレッド**:ラベルの付いていないこのコラムでは、黄色の矢印は、現在のスレッドを示します。 矢印のアウトラインは、現在ではないスレッドの現在のデバッガー コンテキストを示します。

- **ID**:各スレッドの id 番号を表示します。

- **マネージ ID**:マネージ スレッドのマネージ識別番号を表示します。

- **カテゴリ**:ユーザー インターフェイス スレッド、リモート プロシージャ コール ハンドラー、またはワーカー スレッドのいずれかとしてスレッドのカテゴリが表示されます。 アプリケーションのメイン スレッドは特別なカテゴリによって示されます。

- **名前**:名前で、1 つがある場合、各スレッドを識別する\<No Name >。

- **場所**:スレッドが実行されていることを示します。 この場所を展開して、スレッドの呼び出し履歴全体を表示できます。

- **優先順位**:高度な列 (既定で非表示) を優先度またはシステムが各スレッドに割り当てられている優先順位を表示します。

- **Affinity Mask**:(既定で非表示)、高度な列の各スレッドのプロセッサ関係マスクが表示されます。 マルチプロセッサ システムでは、関係マスクによって、スレッドを実行できるプロセッサが決まります。

- **中断カウント**:高度な列 (既定で非表示) を中断カウントが表示されます。 このカウントによって、スレッドを実行できるかどうかが決まります。 中断された数の詳細については、次を参照してください。[を固定およびスレッドの凍結解除](#freeze-and-thaw-threads)します。

- **プロセス名**:(既定で非表示)、高度な列の各スレッドが所属するプロセスが表示されます。 この列のデータは、多くのプロセスをデバッグするときに役立ちます。

- **プロセス ID**:(既定で非表示)、高度な列の各スレッドが所属するプロセス ID が表示されます。

- **トラスポートの修飾子**:高度な列 (既定で非表示) を一意には、デバッガーが接続されているマシンを識別します。

### <a name="to-display-the-threads-window-in-break-mode-or-run-mode"></a>中断モードまたは実行モードで [スレッド] ウィンドウを表示するには

- Visual Studio はデバッグ モードでは、選択、**デバッグ**メニューで、 **Windows**、し、**スレッド**します。

### <a name="to-display-or-hide-a-column"></a>列の表示と非表示を切り替えるには

- 上部のツールバーで、**スレッド**ウィンドウで、**列**します。 選択するか、または非表示に列の名前をオフにします。

## <a name="display-flagged-threads"></a>フラグが設定されたスレッドを表示します。
 **[スレッド]** ウィンドウでスレッドをアイコンでマークすることによって、特に注目するスレッドにフラグを設定できます。 詳細については、「[方法 :スレッドに対するフラグの設定と設定解除を行う](../debugger/how-to-flag-and-unflag-threads.md)」を参照してください。 **[スレッド]** ウィンドウでは、すべてのスレッドを表示するか、フラグが設定されたスレッドのみ表示するかを選択できます。

### <a name="to-display-only-flagged-threads"></a>フラグが設定されたスレッドのみ表示するには

- 選択**フラグが設定されたスレッドのみを表示する**の上部にあるツールバーで、**スレッド**ウィンドウ。 (これが選択不可の場合必要になりますに最初にいくつかのスレッドのフラグを設定します。)

## <a name="freeze-and-thaw-threads"></a>固定し、スレッドの凍結解除
 スレッドを凍結すると、システムは、リソースが使用可能な場合でも、スレッドの実行を起動しません。

 ネイティブ コードで中断または Windows 関数を呼び出すことによってスレッドを再開して`SuspendThread`と`ResumeThread`します。 または、MFC 関数を呼び出す[CWinThread::SuspendThread](/cpp/mfc/reference/CWinThread-class#suspendthread)と[cwinthread::resumethread](/cpp/mfc/reference/CWinThread-class#resumethread)します。 呼び出す場合`SuspendThread`または`ResumeThread`、*中断カウント*に示すように、**スレッド**ウィンドウが変更されます。 ネイティブ スレッドを凍結または凍結解除する場合、中断カウントは変更されません。 マスク解除し、中断カウントは 0 の場合を除き、ネイティブ コードでスレッドを実行できません。

 マネージ コードで中断カウントは、スレッドを凍結または凍結解除時に変更します。 マネージ コードでスレッドを凍結する場合、中断カウントは 1 です。 ネイティブ コードでスレッドを凍結すると、中断カウントが 0 を使用して、`SuspendThread`呼び出します。

> [!NOTE]
> ネイティブ コードからマネージド コードへの呼び出しをデバッグする場合、マネージド コードは呼び出し元のネイティブ コードと同じ物理スレッドで実行されます。 ネイティブ スレッドを中断または凍結すると、マネージド コードも凍結されます。

### <a name="to-freeze-or-thaw-execution-of-a-thread"></a>スレッドの実行を凍結または凍結解除するには

- 上部のツールバーで、**スレッド**ウィンドウで、**スレッドの凍結**または**スレッドの凍結解除**します。

     この操作は、**[スレッド]** ウィンドウで選択されているスレッドのみに影響します。

### <a name="switch-to-another-thread"></a>別のスレッドに切り替える

黄色の矢印は、現在のスレッド (および実行ポインターの位置) を示します。 巻いた尾の付いた緑色の矢印は、現在ではないスレッドがデバッガーの現在のコンテキストを示します。

#### <a name="to-switch-to-another-thread"></a>別のスレッドに切り替える

- 次の手順のいずれかに従います。

    - 任意のスレッドをダブルクリックします。

    - スレッドを右クリックして**スイッチにスレッド**します。

## <a name="group-and-sort-threads"></a>グループ化と並べ替えのスレッド
 スレッドをグループ化すると、グループごとに、見出しがテーブルに表示されます。 見出しには、**ワーカー スレッド**や**フラグが解除されたスレッド**などのグループの説明、およびツリー コントロールが表示されます。 各グループのメンバー スレッドは、そのグループの見出しの下に表示されます。 グループのメンバー スレッドを非表示にする場合は、グループを折りたたむツリーのコントロールを使用します。

 グループ化は並べ替えよりも優先されるので、たとえば、カテゴリ別にスレッドをグループ化してから、各カテゴリ内で ID によってグループを並べ替えることができます。

### <a name="to-sort-threads"></a>スレッドを並べ替えるには

1. 上部のツールバーで、**スレッド**ウィンドウで、任意の列の上部にあるボタンを選択します。

     スレッドがその列の値で並べ替えられます。

2. 並べ替え順序を逆にする場合は、もう一度同じボタンを選択します。

     一覧の一番上に表示されていたスレッドが一番下に表示されます。

### <a name="to-group-threads"></a>スレッドをグループ化するには

- **スレッド**ウィンドウ ツールバーで、 **Group by**し、スレッドのグループ化条件を選択します。

### <a name="to-sort-threads-within-groups"></a>グループ内でスレッドを並べ替えるには

1. 上部のツールバーで、**スレッド**ウィンドウで、**でグループ化**し、スレッドのグループ化条件を選択します。

2. **スレッド**ウィンドウで、任意の列の上部にあるボタンを選択します。

     スレッドがその列の値で並べ替えられます。

### <a name="to-expand-or-collapse-all-groups"></a>すべてのグループの展開または折りたたみを行うには

- 上部のツールバーで、**スレッド**ウィンドウで、**グループを展開する**または**グループを折りたたむ**します。

## <a name="search-for-specific-threads"></a>特定のスレッドの検索
 指定した文字列に一致するスレッドを検索することができます、**スレッド**ウィンドウ。 スレッドを検索するときに、任意の列で検索文字列に一致するすべてのスレッドがウィンドウに表示されます。 この情報には、**[場所]** 列の呼び出し履歴の一番上に表示されるスレッドの場所が含まれます。 既定では、完全なコール スタックが検索されません。

### <a name="to-search-for-specific-threads"></a>特定のスレッドを検索するには

1. **[スレッド]** ウィンドウの上部にあるツール バーで、**[検索]** ボックスに移動し、次のどちらかの操作を実行します。

     - 検索文字列を入力し、キーを押します**Enter**します。

     \- または -

     - 横にドロップダウン リストを選択して、**検索**ボックスし、前回の検索からの検索文字列を選択します。

2. (省略可能) 呼び出し履歴全体を検索の対象にするには、**[呼び出し履歴の検索]** をクリックします。

## <a name="display-thread-call-stacks-and-switch-between-frames"></a>スレッドの呼び出し履歴を表示し、フレーム間の切り替え
マルチスレッド プログラムでは、各スレッドに専用の呼び出し履歴があります。 **[スレッド]** ウィンドウには、これらの呼び出し履歴を表示する便利な手段が用意されています。

> [!TIP]
> 各スレッドの呼び出し履歴のビジュアル表現を使用して、[並列スタック](../debugger/get-started-debugging-multithreaded-apps.md)ウィンドウ。

### <a name="to-view-the-call-stack-of-a-thread"></a>スレッドの呼び出し履歴を表示するには

- **場所**列で、スレッドの場所の横にある下向きの三角形を選択します。

     場所が展開されて、そのスレッドの呼び出し履歴が表示されます。

### <a name="to-view-or-collapse-the-call-stacks-of-all-threads"></a>すべてのスレッドの呼び出し履歴の表示と非表示を切り替えるには

- 上部のツールバーで、**スレッド**ウィンドウで、 **呼び出し履歴の**または**呼び出し履歴の折りたたみ**します。

## <a name="see-also"></a>関連項目
- [マルチスレッド アプリケーションのデバッグ](../debugger/debug-multithreaded-applications-in-visual-studio.md)
- [マルチ スレッド アプリケーションのデバッグの開始](../debugger/get-started-debugging-multithreaded-apps.md)