---
title: リモート デバッグ用の Windows ファイアウォールの構成 |Microsoft Docs
ms.custom: ''
ms.date: 10/31/2018
ms.technology: vs-ide-debug
ms.topic: conceptual
ms.assetid: 66e3230a-d195-4473-bbce-8ca198516014
author: mikejo5000
ms.author: mikejo
manager: douge
ms.workload:
- multiple
ms.openlocfilehash: d4e4ccc09d8919260b1634fd02790c1bf5b10636
ms.sourcegitcommit: 1df0ae74af03bcf0244129a29fd6bd605efc9f61
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/01/2018
ms.locfileid: "50750937"
---
# <a name="configure-windows-firewall-for-remote-debugging"></a>リモート デバッグ用の Windows ファイアウォールを構成します。

Windows ファイアウォールによって保護されて、ネットワーク上のリモート デバッグを許可するようにファイアウォールを構成する必要があります。 Visual Studio とリモート デバッグ ツールがインストールまたはスタートアップ中に適切なファイアウォール ポートを開くしようが、する可能性がありますもポートを開くか、手動でアプリを許可する必要があります。 

このトピックでは、Windows 10、8 または 8.1、および 7 でのリモート デバッグを有効にするのには、Windows ファイアウォールを構成する方法を説明します。Windows Server 2012 R2、2012、および 2008 R2 コンピューターを選択します。 Visual Studio とリモート コンピューターは、同じオペレーティング システムが実行されている必要はありません。 たとえば、Visual Studio コンピューターが Windows 10 を実行でき、リモート コンピューターが Windows Server 2012 R2 を実行できます。      
  
>[!NOTE]
>別のオペレーティング システムと Windows の以前のバージョンの Windows ファイアウォールの構成手順は若干異なります。 Windows 8 または 8.1、Windows 10 および Windows Server 2012 の設定が、word を使用して*アプリ*Windows 7 および Windows Server 2008 は、word を使用して、*プログラム*します。  

## <a name="configure-ports-for-remote-debugging"></a>リモート デバッグ用のポートを構成します。  

Visual Studio とリモート デバッガーをインストールまたはスタートアップ中に適切なポートを開いてみてください。 ただし、サードパーティ製のファイアウォールなど、一部のシナリオは、手動でポートを開く必要があります。 

**ポートを開く。**
  
1. Windows で**開始** メニューの検索とオープン**セキュリティが強化された Windows ファイアウォール**します。 これは、Windows 10 で**セキュリティが強化された Windows Defender ファイアウォール**します。
   
1. 新しい受信ポートでは、選択**受信の規則**選び**新しいルール**。 送信ルールは、次のように選択します。**送信の規則**代わりにします。

1. **新しい受信の規則ウィザード**を選択します**ポート**、し、**次**します。 
   
1. いずれかを選択**TCP**または**UDP**に応じて、次のテーブルからのポート番号、します。
   
1. **特定のローカル ポート**から次の表では、ポート番号を入力し、選択**次**します。
   
1. 選択**接続を許可する**、し、**次**します。
   
1. リモート接続のネットワークの種類などを有効にする 1 つまたは複数のネットワークの種類を選択し、選択**次**します。
   
1. ルールの名前を追加 (たとえば、 **msvsmon**、 **IIS**、または**Web Deploy**)、し、**完了**。

   新しい規則が表示され、選択する、**受信の規則**または**送信の規則**一覧。

### <a name="ports-on-the-remote-computer-that-enable-remote-debugging"></a>リモート デバッグを有効にするリモート コンピューター上のポート

リモート デバッグでは、次のポートは、リモート コンピューター上で開いてにする必要があります。

|**ポート**|**着信/発信**|**プロトコル**|**説明**|   
|-|-|-|-|
|4022|着信|TCP|For VS 2017。 Visual Studio バージョンごとに 2 ポート数単位です。 詳細については、次を参照してください。 [Visual Studio リモート デバッガーのポート割り当て](../debugger/remote-debugger-port-assignments.md)します。|  
|4023|着信|TCP|For VS 2017。 Visual Studio バージョンごとに 2 ポート数単位です。 このポートはのみに使用されるリモート デバッグ、リモート デバッガーの 64 ビット版から 32 ビット プロセスです。 詳細については、次を参照してください。 [Visual Studio リモート デバッガーのポート割り当て](../debugger/remote-debugger-port-assignments.md)します。| 
|3702|発信|UDP|(省略可能)リモート デバッガー探索に必要です。|    
  
選択した場合**マネージ互換モードを使用して****ツール** > **オプション** > **デバッグ**を開きますこれらの追加のリモート デバッガー ポート。 マネージ互換モードのデバッガーには、レガシ、Visual Studio 2010 バージョンのデバッガーができるようにします。 

|**ポート**|**着信/発信**|**プロトコル**|**説明**|  
|-|-|-|-|  
|135、139、445|発信|TCP|必須。|  
|137、138|発信|UDP|必須。|  

ドメイン ポリシーでは、ネットワーク通信を IPSec 経由で実行する必要がある場合は、Visual Studio とリモート コンピューターの両方で追加のポートを開く必要があります。 リモートの IIS web サーバーでデバッグするには、リモート コンピューター上のポート 80 を開きます。

|**ポート**|**着信/発信**|**プロトコル**|**説明**|  
|-|-|-|-|  
|500、4500|発信|UDP|ドメイン ポリシーで、ネットワーク通信を IPSec 経由で実行する必要がある場合は、必須。|  
|80|発信|TCP|Web サーバーのデバッグに必要です。|

Windows ファイアウォール経由の特定のアプリを許可するのを参照してください。 [Windows ファイアウォール経由のリモート デバッグ構成](#configure-remote-debugging-through-windows-firewall)します。 

## <a name="configure-remote-debugging-through-windows-firewall"></a>Windows ファイアウォール経由のリモート デバッグを構成します。

リモート コンピューターでは、リモート デバッグ ツールをインストールしたり、共有フォルダーから実行できます。 いずれの場合も、リモート コンピューターのファイアウォールを正しく構成する必要があります。 

リモート デバッグ ツールは、リモート コンピューター上には。  
  
*\<Visual Studio のインストール ディレクトリ\>\\Common7\\IDE\\リモート デバッガー\\\<x86*、 *x64*、または*Appx*\> 
  
### <a name="allow-and-configure-the-remote-debugger-through-windows-firewall"></a>許可して、Windows ファイアウォールを介したリモート デバッガーの構成 
  
1. Windows で**開始** メニューの検索とオープン**Windows ファイアウォール**、または**Windows Defender ファイアウォール**します。 
  
1. 選択**アプリを Windows ファイアウォールを通過できます**します。  
  
1.  場合**リモート デバッガー**または**Visual Studio リモート デバッガー**の下に表示されない**許可されたアプリおよび機能**、 **の設定を変更**、し、**別のアプリを許可する**します。 

1.  リモート デバッガーのアプリも一覧にない場合に、**アプリ追加**ダイアログ ボックスで、**参照**に移動します *\<Visual Studio インストール ディレクトリ\>\\Common7\\IDE\\リモート デバッガー\\\<x86*、 *x64*、または*Appx* \>、によって、アプリの適切なアーキテクチャ。 選択*msvsmon.exe*、し、**追加**します。  
    
1.  **アプリ**一覧で、、**リモート デバッガー**追加しました。 選択**ネットワークの種類**、リモート接続のネットワークの種類を含む 1 つまたは複数のネットワーク タイプを選択します。 
    
1.  選択**追加**、し、 **OK**します。

## <a name="troubleshooting"></a>リモート デバッグ接続をトラブルシューティングします。
  
リモート デバッガーをアプリにアタッチすることはできません場合、必ずリモート デバッグのファイアウォール ポート プロトコル、ネットワークの種類、およびアプリの設定がすべて正しい。 

- Windows で**開始** メニューの検索とオープン**Windows ファイアウォール**、選択と**アプリを Windows ファイアウォールを通過できます**します。 確認**リモート デバッガー**または**Visual Studio リモート デバッガー**に表示されます、**許可されたアプリおよび機能**チェック ボックスがオンと適切なネットワークの種類の一覧は、選択されています。 ない場合は、[適切なアプリと設定を追加](#configure-remote-debugging-through-windows-firewall)します。
  
- Windows で**開始** メニューの検索とオープン**セキュリティが強化された Windows ファイアウォール**します。 確認**リモート デバッガー**または**Visual Studio リモート デバッガー**下に表示されます**受信の規則**(および必要に応じて、**送信の規則**)された緑のアイコンをすべての設定が正しいです。 
  
  - を表示またはルールの設定を変更するを右クリックし、**リモート デバッガー**一覧し、アプリ**プロパティ**します。 使用して、**プロパティ**ポート番号、プロトコル、またはネットワークの種類のタブを有効またはルールを無効に変更します。 
  - リモート デバッガーのアプリは、規則の一覧に表示されない場合[を追加し、正しいポートを構成する](#configure-ports-for-remote-debugging)します。 

## <a name="see-also"></a>関連項目  
[リモート デバッグ](../debugger/remote-debugging.md)

[Visual Studio リモート デバッガーのポートの割り当て](../debugger/remote-debugger-port-assignments.md)
