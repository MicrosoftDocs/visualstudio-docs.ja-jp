---
title: 複数のプロセスをデバッグする |マイクロソフトドキュメント
ms.date: 11/20/2018
ms.topic: conceptual
f1_keywords:
- vs.debug.programs
- vs.debug.processes.attaching
- vs.debug.activeprogram
- vs.debug.attaching
- vs.debug.attachedprocesses
dev_langs:
- CSharp
- VB
- FSharp
- C++
ms.assetid: bde37134-66af-4273-b02e-05b3370c31ab
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 160e219b6fc2ab314f8d0dd91043c18101f2c3a5
ms.sourcegitcommit: 95f26af1da51d4c83ae78adcb7372b32364d8a2b
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/13/2020
ms.locfileid: "79301183"
---
# <a name="debug-multiple-processes-c-visual-basic-c"></a>複数のプロセスをデバッグする (C#、Visual Basic、C++)

Visual Studio では、いくつかのプロセスを持つソリューションをデバッグできます。 プロセスの開始と切り替え、中断、続行、およびソースのステップ実行、デバッグの停止、個々のプロセスからの終了またはデタッチを行うことができます。

## <a name="start-debugging-with-multiple-processes"></a>複数のプロセスでデバッグを開始する

Visual Studio ソリューション内の複数のプロジェクトを個別に実行できる場合は、デバッガーを起動するプロジェクトを選択できます。 現在のスタートアップ プロジェクトが **、ソリューション エクスプローラ**に太字で表示されます。

スタートアップ プロジェクトを変更するには、**ソリューション エクスプローラ**で別のプロジェクトを右クリックし、[**スタートアップ プロジェクトに設定]** を選択します。

スタートアップ プロジェクトにせずに**ソリューション エクスプローラ**からプロジェクトのデバッグを開始するには、プロジェクトを右クリックし、[新しいインスタンスを**デバッグ** > 開始] または **[新しいインスタンスにステップ イン**] を選択します。**Start new instance**

**スタートアップ プロジェクトまたは複数のプロジェクトをソリューションのプロパティから設定するには、次の手順を実行します。**

1. **ソリューション エクスプローラ**でソリューションを選択し、ツール バーの **[プロパティ]** アイコンを選択するか、ソリューションを右クリックして [**プロパティ]** を選択します。

1. [**プロパティ**] ページで、[**共通プロパティスタートアップ** > **プロジェクト**] を選択します。

   ![プロジェクトのスタートアップの種類の変更](../debugger/media/dbg_execution_startmultipleprojects.png "DBG_Execution_StartMultipleProjects")

1. [**現在の選択]、[****単一のスタートアップ プロジェクト**とプロジェクト ファイル]、または **[複数のスタートアップ プロジェクト**] を選択します。

   **[複数のスタートアップ プロジェクト**] を選択すると、各プロジェクトに対して実行する起動順序**Start**と動作**を変更****できます。**

1. [**適用]** または **[OK] を**選択してダイアログを閉じます。

### <a name="attach-to-a-process"></a><a name="BKMK_Attach_to_a_process"></a>プロセスにアタッチする

デバッガーは、リモート デバイスを含め、Visual Studio の外部のプロセスで実行されているアプリにも*アタッチ*できます。 アプリにアタッチした後、Visual Studio デバッガーを使用できます。 デバッグ機能は制限される場合があります。 アプリがデバッグ情報を使用してビルドされたかどうか、アプリのソース コードにアクセスできるかどうか、および JIT コンパイラがデバッグ情報を追跡しているかどうかによって異なります。

詳細については、「[実行中のプロセスにアタッチする](../debugger/attach-to-running-processes-with-the-visual-studio-debugger.md)」を参照してください。

**実行中のプロセスにアタッチするには:**

1. アプリを実行している状態で**Debug** > 、[**プロセスにアタッチする]** を選択します。

   ![[プロセスにアタッチ] ダイアログ ボックス](../debugger/media/dbg_attachtoprocessdlg.png "[プロセスにアタッチ] ダイアログ ボックス")

1. [**プロセスにアタッチ]** ダイアログ ボックスで、[**使用可能なプロセス**] ボックスの一覧からプロセスを選択し、[**アタッチ**] を選択します。

>[!NOTE]
>デバッガーは、子プロジェクトが同じソリューション内にある場合でも、デバッグ対象のプロセスによって開始された子プロセスに自動的にアタッチされません。 子プロセスをデバッグするには、子プロセスの開始後に子プロセスにアタッチするか、新しいデバッガ インスタンスで子プロセスを開始するように Windows レジストリ エディタを構成します。

### <a name="use-the-registry-editor-to-automatically-start-a-process-in-the-debugger"></a><a name="BKMK_Automatically_start_an_process_in_the_debugger"></a>レジストリ エディタを使用して、デバッガでプロセスを自動的に開始する

場合によっては、別のプロセスによって起動されるアプリのスタートアップ コードをデバッグする必要があります。 たとえば、サービスやカスタムのセットアップ動作などです。 デバッガーを起動し、自動的にアプリにアタッチできます。

1. *regedit.exe*を実行して、Windows レジストリ エディタを起動します。

1. レジストリ エディタで **、[HKEY_LOCAL_MACHINE\ソフトウェア\Windows NT\現在のバージョン\イメージ ファイル実行オプション**] に移動します。

1. デバッガーで起動するアプリのフォルダーを選択します。

   アプリが子フォルダーとして表示されていない場合は、[**イメージ ファイルの実行オプション**] を右クリックし、[**新しい** > **キー**] を選択して、アプリ名を入力します。 または、ツリー内の新しいキーを右クリックし、[**名前の変更**] を選択して、アプリ名を入力します。

1. ツリーで新しいキーを右クリックし、[**新しい** > **文字列値**] を選択します。

1. 新しい値の名前を **[新しい値#1]** から に`debugger`変更します。

1. **デバッガー**を右クリックし、[**変更**] を選択します。

   ![[文字列の編集] ダイアログ ボックス](../debugger/media/dbg_execution_automaticstart_editstringdlg.png "[文字列の編集] ダイアログ ボックス")

1. [**文字列の編集**] ダイアログ`vsjitdebugger.exe`ボックスで、[**値のデータ**] ボックスに入力し **、[OK]** をクリックします。

   ![regedit.exe の自動デバッガー開始エントリ](../debugger/media/dbg_execution_automaticstart_result.png "regedit.exe の自動デバッガー開始エントリ")

## <a name="debug-with-multiple-processes"></a><a name="BKMK_Switch_processes__break_and_continue_execution__step_through_source"></a>複数のプロセスでデバッグする
<a name="BKMK_Configure_the_execution_behavior_of_multiple_processes"></a>

複数のプロセスでアプリをデバッグする場合、中断、ステップ実行、およびデバッガーの継続コマンドは、既定ですべてのプロセスに影響します。 たとえば、ブレークポイントでプロセスが中断されると、他のすべてのプロセスの実行も中断されます。 コマンドの実行対象をより詳細に制御するために、この既定の動作を変更できます。

**1 つのプロセスが中断したときにすべてのプロセスを中断するかどうかを変更するには、次の手順を実行します。**

- [**ツール**] (または **[デバッグ**] ) の [**デバッグ** > **Debugging** > **の>全般**] で **、[1 つのプロセスが中断したときにすべてのプロセスを中断**する] チェック ボックスをオンまたはオフにします。

### <a name="break-step-and-continue-commands"></a><a name="BKMK_Break__step__and_continue_commands"></a> 中断、ステップ実行、続行のコマンド

次の表は **、[1 つのプロセスが中断したときにすべてのプロセスを中断**する] チェック ボックスがオンまたはオフの場合のデバッグ コマンドの動作を示しています。

|**コマンド**|Selected|選択を解除|
|-|-|-|
|**デバッグ**  > **ブレークオール**|すべてのプロセスが中断されます。|すべてのプロセスが中断されます。|
|**デバッグ** > **の続行**|すべてのプロセスが再開されます。|一時停止中のすべてプロセスが再開されます。|
|**デバッグ** > **ステップ イン**、ステップ**オーバー**、またはステップ**アウト**|現在のプロセスのステップ実行中にすべてのプロセスが実行されます。 <br />その後、すべてのプロセスが中断されます。|現在のプロセスがステップ実行されます。 <br />一時停止中のプロセスが再開されます。 <br />実行中のプロセスが続行されます。|
|**現在** > **のプロセスへのステップの**デバッグ 、**現在のプロセスのステップ オーバー**、または**現在のプロセスのステップ アウト**|該当なし|現在のプロセスがステップ実行されます。<br />他のプロセスの既存の状態 (一時停止中または実行中) が維持されます。|
|ソース ウィンドウ**のブレークポイント**|すべてのプロセスが中断されます。|ソース ウィンドウのプロセスのみ中断されます。|
|ソース ウィンドウ**カーソルまで実行**<br />ソース ウィンドウのプロセスは現在のプロセスであることが必要です。|ソース ウィンドウのプロセスがカーソル位置まで実行されてから中断されている間に、すべてのプロセスが実行されます。<br />その後、他のすべてのプロセスが中断されます。|ソース ウィンドウのプロセスはカーソル位置まで実行されます。<br />他のプロセスの既存の状態 (一時停止中または実行中) が維持されます。|
|**プロセスの**プロセス>**プロセスを中断**|該当なし|選択したプロセスが中断されます。<br />他のプロセスの既存の状態 (一時停止中または実行中) が維持されます。|
|**[プロセス]** ウィンドウ> **[プロセスの継続]**|該当なし|選択したプロセスが再開されます。<br />他のプロセスの既存の状態 (一時停止中または実行中) が維持されます。|

### <a name="find-the-source-and-symbol-pdb-files"></a><a name="BKMK_Find_the_source_and_symbol___pdb__files"></a> ソースとシンボル (.pdb) ファイルを検索する
プロセスのソース コードをナビゲートするには、デバッガーは、そのソース ファイルとシンボル ファイルにアクセスする必要があります。 詳細については、[シンボル (.pdb) ファイルとソース ファイル](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)の指定に関する記事をご覧ください。

プロセスのファイルにアクセスできない場合は、[**逆アセンダ**] ウィンドウを使用して移動できます。 詳細については、「[方法 : 逆アセンブリ ウィンドウを使用する](../debugger/how-to-use-the-disassembly-window.md)」を参照してください。

### <a name="switch-between-processes"></a><a name="BKMK_Switch_between_processes"></a> プロセスの切り替え

デバッグ中は複数のプロセスにアタッチできますが、デバッガーでアクティブなプロセスは 1 つのみ一度に行うことができます。 **[デバッグの場所]** ツール バーまたは **[プロセス]** ウィンドウでアクティブまたは*現在*のプロセスを設定できます。 プロセス間で切り替えるには、両方のプロセスが中断モードであることが必要です。

**[デバッグの場所] ツールバーから現在のプロセスを設定するには、次の手順を実行します。**

1. **[デバッグの場所**] ツールバーを開くには、[**ツール バーの** > **デバッグの場所**を**表示** > ] を選択します。

1. デバッグ中に、[**デバッグの場所**] ツールバーの [**プロセス**] ドロップダウンから、現在のプロセスとして設定するプロセスを選択します。

   ![プロセスを切り替える](../debugger/media/dbg_execution_switchbetweenmodules.png "DBG_Execution_SwitchBetweenModules")

**「プロセス」ウィンドウから現在のプロセスを設定するには、次の手順に従います。**

1. **[プロセス]** ウィンドウを開くには、デバッグ中に **[Windows** > **プロセスの****デバッグ** > ] を選択します。

1. 「**プロセス」** ウィンドウでは、現在のプロセスが黄色の矢印でマークされます。 現在のプロセスとして設定するプロセスをダブルクリックします。

   ![[プロセス] ウィンドウ](../debugger/media/dbg_processeswindow.png "DBG_ProcessesWindow")

プロセスに切り替えると、デバッグ用の現在のプロセスとして設定されます。 デバッガー ウィンドウには現在のプロセスの状態が表示され、ステップ コマンドは現在のプロセスにのみ影響します。

## <a name="stop-debugging-with-multiple-processes"></a>複数のプロセスでデバッグを停止する

既定では、[**デバッグ** > **の停止]** を選択すると、デバッガーが終了するか、すべてのプロセスからデタッチされます。

- 現在のプロセスがデバッガーで起動された場合、プロセスは終了します。

- デバッガーを現在のプロセスにアタッチした場合、デバッガーはプロセスからデタッチされ、プロセスは実行中のままになります。

Visual Studio ソリューションからプロセスのデバッグを開始した後、既に実行中の別のプロセスにアタッチし、デバッグ セッションを**終了**するを選択します。 Visual Studio で開始されたプロセスは終了し、アタッチしたプロセスは実行を続けます。

**デバッグの停止**が個々のプロセスに与える影響を制御するには、[**プロセス]** ウィンドウでプロセスを右クリックし、[**デバッグが停止したときにデタッチ**する] チェック ボックスをオンまたはオフにします。

>[!NOTE]
>**[1 つのプロセスがデバッガを中断したときにすべてのプロセスを中断する**] オプションは、プロセスの停止、終了、またはプロセスからのデタッチには影響しません。

### <a name="stop-terminate-and-detach-commands"></a>停止、終了、デタッチのコマンド

次の表は、複数のプロセスを含む、デバッガーの停止、終了、およびデタッチの各コマンドの動作を示しています。

|**コマンド**|**説明**|
|-|-|
|**デバッグ** > **停止デバッグ**|[**プロセス]** ウィンドウで動作が変更されない限り、デバッガーによって開始されたプロセスは終了し、アタッチされたプロセスはデタッチされます。|
|**デバッグ** > **終了すべて**|すべてのプロセスが終了します。|
|**デバッグ** > **デタッチすべて**|すべてのプロセスからデバッガーがデタッチされます。|
|**[プロセス]** ウィンドウ>**デタッチ プロセス**|選択したプロセスからデバッガーがデタッチされます。<br />他のプロセスの既存の状態 (一時停止中または実行中) が維持されます。|
|**[プロセス]** ウィンドウ>**プロセスの終了**|選択したプロセスが終了します。<br />他のプロセスの既存の状態 (一時停止中または実行中) が維持されます。|
|**デバッグが****停止したときにウィンドウ>デタッチする**プロセス|選択すると、**デバッグ** > **停止デバッグ**は、選択したプロセスからデタッチします。 <br />選択されていない場合、**デバッグ** > **停止デバッグ**は、選択したプロセスを終了します。 |

## <a name="see-also"></a>関連項目

- [シンボル (.pdb) とソース ファイルの指定](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)
- [実行中のプロセスにアタッチ](../debugger/attach-to-running-processes-with-the-visual-studio-debugger.md)
- [デバッガーでのコード間の移動](../debugger/navigating-through-code-with-the-debugger.md)
- [ジャストインタイムデバッグ](../debugger/just-in-time-debugging-in-visual-studio.md)
- [マルチスレッド アプリケーションのデバッグ](../debugger/debug-multithreaded-applications-in-visual-studio.md)