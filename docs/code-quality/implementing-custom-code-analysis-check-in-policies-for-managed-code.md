---
title: Visual Studio でマネージ コード用のカスタム コード分析チェックイン ポリシーの実装
ms.date: 11/04/2016
ms.technology: vs-ide-code-analysis
ms.topic: conceptual
f1_keywords:
- vs.code.analysis.selecttfsrulesets
- vs.code.analysis.browsefortfsruleset
- vs.code.analysis.policyeditor
ms.assetid: fd029003-5671-4b24-8b6f-032e0a98b2e8
author: gewarren
ms.author: gewarren
manager: douge
ms.workload:
- dotnet
ms.openlocfilehash: c50daf82a5dc5774cae75ecab54f1455c1a1c251
ms.sourcegitcommit: 42ea834b446ac65c679fa1043f853bea5f1c9c95
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/19/2018
---
# <a name="implement-custom-code-analysis-check-in-policies-for-managed-code"></a>マネージ コード用のカスタム コード分析チェックイン ポリシーを実装します。

コード分析チェックイン ポリシーがバージョン管理にチェックインする前に、ソース コードで、チーム プロジェクトのメンバーが実行する必要がありますされる規則のセットを指定します。 Microsoft は、一連の標準*ルール セット*そのグループのコード分析ルール機能領域に挿入します。 *カスタム チェックイン ポリシーのルール セット*チーム プロジェクトに固有のコード分析規則のセットを指定します。 規則セットは、.ruleset ファイルに格納されます。

チェックイン ポリシーでは、チーム プロジェクト レベルで設定され、バージョン コントロールのツリー内の .ruleset ファイルの場所で指定されたことができます。 チームのポリシーのカスタム規則セットのバージョン管理の場所に制限はありません。

コード分析は、各プロジェクトのプロパティ ウィンドウで個々 のコード プロジェクト用に構成されています。 カスタムのルール セットのコード プロジェクトは、ローカル コンピューター上の .ruleset ファイルの物理的な場所によって指定されます。 コード プロジェクトと同じドライブ上にある .ruleset ファイルを指定すると、Visual Studio はプロジェクトの構成内のファイルに相対パスを使用します。

チーム プロジェクトのカスタム規則セットを作成するための推奨される方法では、チェックイン ポリシーによって .ruleset ファイル、コード プロジェクトの一部ではないの特別なフォルダーに保存します。 専用のフォルダーにファイルを保存する場合は、アクセス許可を制限する規則ファイルを編集できるを適用することができます、ディレクトリ構造を簡単に移動できますを別のディレクトリまたはコンピューターに、プロジェクトが含まれます。

## <a name="create-the-team-project-custom-check-in-rule-set"></a>チーム プロジェクトのカスタム チェックインの規則セットを作成します。

チーム プロジェクトの設定カスタム ルールを作成するには、まずフォルダーを作成する特別なチェックイン ポリシーの規則セットの**ソース管理エクスプ ローラー**です。 規則セット ファイルを作成し、バージョン管理へファイルを追加します。 最後に、規則として、コード分析チェックイン ポリシーによってチーム プロジェクトのセットを指定します。

> [!NOTE]
> チーム プロジェクト内のフォルダーを作成するに最初に割り当てる必要がありますチーム プロジェクトのルートをローカル コンピューター上の場所にします。

### <a name="to-create-the-version-control-folder-for-the-check-in-policy-rule-set"></a>チェックイン ポリシーの規則セットのバージョン管理フォルダーを作成するには

1. チーム エクスプ ローラーで、チーム プロジェクト ノードを展開し、クリックして**ソース管理**です。

2. **フォルダー**  ウィンドウで、チーム プロジェクトを右クリックし、をクリックして**新しいフォルダー**です。

3. メインのソース管理 ウィンドウで右クリック**新しいフォルダー**、 をクリックして**の名前を変更**、ルール セットのフォルダーの名前を入力するとします。

### <a name="to-create-the-check-in-policy-rule-set"></a>チェックイン ポリシーの規則セットを作成するには

1. **ファイル** メニューのをポイント**新規**、クリックして**ファイル**です。

2. **カテゴリ**一覧で、クリックして**全般**です。

3. **テンプレート**リストで、ダブルクリック**コード分析規則セット**です。

4. [ルールを指定して](../code-quality/how-to-create-a-custom-rule-set.md)ルール セットに含めるし、ルールを保存するには、作成したルール セット フォルダーにファイルを設定します。

### <a name="to-add-the-rule-set-file-to-version-control"></a>ルールを追加するには、バージョン管理にファイルを設定します。

1. **ソース管理エクスプ ローラー**新しいフォルダーを右クリックし、クリックして**項目をフォルダーに追加**です。

     詳細については、次を参照してください。 [Git および VSTS](/vsts/git/overview)です。

2. 規則セットを作成したファイルをクリックし、クリック**完了**です。

     ファイルがソース管理に追加され、チェック アウトしました。

3. **ソース管理エクスプ ローラー**の詳細 ウィンドウは、ファイル名を右クリックし、をクリックして**保留中の変更をチェックイン**です。

4. **チェックイン**ダイアログ ボックスで、クリックしてコメントを追加するオプションがある**チェックイン**です。

    > [!NOTE]
    > チーム プロジェクトのコード分析チェックイン ポリシーを既に構成しているし、選択した場合、**チェックインを強制のみファイルを格納する現在のソリューションの一部である**ポリシーのエラーに関する警告がトリガーされます。 ポリシーのエラー ダイアログ ボックスで、次のように選択します。**ポリシー エラーをオーバーライドし、チェックインを続行**です。 必要なコメントを追加し、クリックして**OK**です。

### <a name="to-specify-the-rule-set-file-as-the-check-in-policy"></a>ルールを指定するには、ファイルをチェックイン ポリシーとして設定します。

1. **チーム** メニューのをポイント**チーム プロジェクトの設定**、クリックして**ソース管理**です。

2. をクリックして**チェックイン ポリシーによって**、クリックして**追加**です。

3. **チェックイン ポリシーによって**リストで、ダブルクリック**コード分析**、ことを確認し、**マネージ コードのコード分析を強制** チェック ボックスをオンします。

4. **この規則セットを実行**一覧で、クリックして**\<ソース管理からのルール セットの選択 >**です。

5. バージョン管理にチェックイン ポリシーの規則セット ファイルのパスを入力します。

     パスは、次の構文に準拠する必要があります。

     **$/** `TeamProjectName` **/** `VersionControlPath`

    > [!NOTE]
    > 次の手順のいずれかを使用してパスをコピーすることができます**ソース管理エクスプ ローラー**:

    - **フォルダー**  ウィンドウで、規則セット ファイルが含まれているフォルダーをクリックします。 表示されるフォルダーのバージョン管理パスのコピー、**ソース**ボックス、および規則セット ファイルの名前を手動で入力します。

    - [詳細] ウィンドウで、規則セット ファイルを右クリックし、クリックして**プロパティ**です。 **全般** タブの値をコピー**サーバー名**です。

## <a name="synchronize-code-projects-to-the-check-in-policy-rule-set"></a>チェックイン ポリシーの規則セットをコード プロジェクトを同期します。

チーム プロジェクト チェックイン ポリシーの規則は、コード プロジェクトのプロパティ ダイアログ ボックスで、コード プロジェクト構成のコード分析規則セットとして設定を指定します。 規則セットは、コード プロジェクトと同じドライブに配置され、パスがファイル ダイアログ ボックスから選択した場合は、ルール セットを指定する相対パスが使用されます。 相対パスにより、同じローカル バージョンを使用するその他のコンピューターに移植するプロジェクトのプロパティ設定の制御構造です。

### <a name="to-specify-a-team-project-rule-set-as-the-rule-set-of-a-code-project"></a>チーム プロジェクトの規則を指定するのには、コード プロジェクトの規則セットとして設定します。

1. 必要に応じて、バージョン コントロールからチェックイン ポリシーの規則セットのフォルダーとファイルを取得します。

   この手順を実行することができます**ソース管理エクスプ ローラー**を右クリックしてルール セットのフォルダーとクリックし、**最新バージョンの取得**です。

2. **ソリューション エクスプ ローラー**コード プロジェクトを右クリックし、クリックして**プロパティ**です。

3. **コード分析 をクリックして**です。

4. 必要に応じてで適切なオプションをクリックして、**構成**と**プラットフォーム**を一覧表示します。

5. 指定した構成を使用してコード プロジェクトをビルドするたびにコード分析を実行するには選択、**を有効にするビルドに対するコード分析 (定数 CODE_ANALYSIS を定義)**チェック ボックスをオンします。

6. 他社製のコンポーネントのコードを無視するのには、選択、**生成されたコードから結果を表示しない**チェック ボックスをオンします。

7. **この規則セットを実行**一覧で、クリックして **\<[参照...] >**です。

8. チェックイン ポリシーの規則セット ファイルのローカル バージョンを指定します。