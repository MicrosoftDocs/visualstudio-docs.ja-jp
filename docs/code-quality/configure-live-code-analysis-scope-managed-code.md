---
title: .NET のライブコード分析スコープの構成
ms.date: 09/01/2020
ms.topic: conceptual
helpviewer_keywords:
- live code analysis
- background analysis
- analysis scope
- full solution analysis
author: mikadumont
ms.author: midumont
manager: jillfra
ms.workload:
- dotnet
ms.openlocfilehash: 57ff963de193360712e92b76f3cafd7a75ee6b89
ms.sourcegitcommit: 4ae5e9817ad13edd05425febb322b5be6d3c3425
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/11/2020
ms.locfileid: "90035418"
---
# <a name="configure-live-code-analysis-for-net"></a>.NET 用にライブコード分析を構成する

Visual Studio は、エディターでソースファイルを編集している間に、一連のライブコード分析 ( *バックグラウンド分析*とも呼ばれます) を実行します。 その一部は、Visual Studio IDE の編集操作を受け入れるために最小限必要な分析です。 その一部は、IDE の機能の応答性を向上させるためのものです。 その一部は、Roslyn アナライザーからの診断やコード修正など、追加の IDE 機能を有効にすることです。 これらの分析は、機能に基づいて次のようにグループ化できます。

- **診断のバックグラウンド計算**: ソースファイル内のエラー、警告、および提案を計算するための分析。 これらの診断は、エディターの [エラー一覧] と [波線] として表示されます。 次の2つのカテゴリに分類できます。
  - C# および Visual Basic コンパイラ診断
  - Roslyn アナライザー診断: 次のものが含まれます。

    - コードスタイルの提案用の組み込みの IDE アナライザー
    - コード品質提案用の組み込みの CA アナライザー
    - 現在のソリューションのプロジェクトに対し [てインストールされている](./install-roslyn-analyzers.md) サードパーティのアナライザーパッケージ。

- **その他のバックグラウンド分析**: IDE 機能の応答性と Visual Studio の相互作用を向上させるための分析。 このような分析の例を次に示します。
  - 開いているファイルのバックグラウンド解析。
  - 特定の IDE 機能の応答性を向上させるために、開いているファイルを含むプロジェクトをバックグラウンドでコンパイルしてシンボルを実現します。
  - 構文およびシンボルキャッシュを作成しています。
  - フォーム、コントロールなどのソースファイルのデザイナーの関連付けを検出しています。

## <a name="default-analysis-scope"></a>既定の分析スコープ

既定では、Visual Studio で _開か_ れているすべてのファイルに対して、診断のバックグラウンド計算のライブコード分析が実行されます。 上記のいくつかの _バックグラウンド分析_ は、すべてのプロジェクトについて、少なくとも1つの開いているファイルを含むすべてのプロジェクトに対して実行されます。 ソリューション全体に対していくつかのバックグラウンド分析が実行されます。

## <a name="custom-analysis-scope"></a>カスタム分析スコープ

各バックグラウンド分析の既定のスコープは、お客様のほとんどのシナリオとソリューションの最適なユーザーエクスペリエンス、機能、およびパフォーマンスのためにチューニングされています。 ただし、顧客がこのスコープをカスタマイズして、バックグラウンド分析を減らしたり増やしたりする場合もあります。 次に例を示します。

- 省電力モード: ユーザーがラップトップのバッテリを使用している場合は、バッテリ寿命を長持ちさせるために電力消費を最小限に抑えることができます。 このシナリオでは、バックグラウンド分析を最小限に抑えたいと考えています。
- オンデマンドコード分析: ユーザーがライブアナライザーの実行をオフにし、手動でコード分析を実行することを希望する場合は、バックグラウンド分析を最小化することをお勧めします。 「 [方法: オンデマンドで手動でコード分析を実行する」を](./how-to-run-code-analysis-manually-for-managed-code.md)参照してください。
- 完全なソリューション分析: ユーザーが、エディターで開いているかどうかに関係なく、ソリューション内のすべてのファイルのすべての診断を常に表示する場合。 このシナリオでは、バックグラウンド分析のスコープをソリューション全体に最大化したいと考えています。

Visual Studio 2019 バージョン16.5 以降では、ユーザーは、C# および Visual Basic プロジェクトのすべてのライブコード分析 (診断計算を含む) のスコープを明示的にカスタマイズできます。 使用できる分析スコープは次のとおりです。

- **現在のドキュメント**: エディターで現在または表示されているファイルに対してのみ実行されるライブコード分析のスコープを最小化します。
- **ドキュメントを開く**: 前のセクションで説明したように、既定のライブコード分析スコープ。
- **ソリューション全体**: ソリューション全体のすべてのファイルとプロジェクトに対して実行するライブコード分析スコープを最大化します。

次の手順に従って、[ツールオプション] ダイアログで上記のカスタム分析スコープのいずれかを選択できます。

1. [**オプション**] ダイアログボックスを開くには、Visual Studio のメニューバーで [**ツール**] [オプション] の順に選択し  >  **Options**ます。

2. [**オプション**] ダイアログボックスで、[**テキストエディター**] [  >  **C#** ] または [**基本**の  >  **詳細設定**] を選択します。

3. 目的の **バックグラウンド分析スコープ** を選択して、分析スコープをカスタマイズします。 完了したら、 **[OK]** を選択します。

![分析スコープ。](./media/background-analysis-scope.png)

> [!NOTE]
> Visual Studio 2019 バージョン16.5 より前では、ユーザーは [**ツール**] [オプション] [テキストエディター] [C#] または [基本的な詳細設定] タブの [**完全なソリューション分析を有効にする**] チェックボックスを使用して、ソリューション全体に対する診断計算の分析スコープをカスタマイズでき  >  **Options**  >  **Text Editor**  >  **C#** **Basic**  >  **Advanced**ます。以前のバージョンの Visual Studio では、バックグラウンド分析の範囲を最小化することはできません。

## <a name="automatically-minimize-live-code-analysis-scope"></a>ライブコード分析スコープを自動的に最小化する

Visual Studio で 200 MB 以下のシステムメモリが使用可能であることが検出されると、ライブコード分析スコープが "現在のドキュメント" に自動的に最小化されます。 これが発生すると、Visual Studio が一部の機能を無効にしたことを通知するアラートが表示されます。 ボタンを使用すると、必要に応じて前の分析のスコープに戻ることができます。

![アラートテキストの分析範囲を最小化する](./media/fsa_alert.png)

## <a name="see-also"></a>参照

- [自動機能の中断](./automatic-feature-suspension.md)
- [省電力モード機能の要求](https://github.com/dotnet/roslyn/issues/38429)
