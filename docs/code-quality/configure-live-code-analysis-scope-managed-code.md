---
title: マネージ コードのライブ コード分析スコープを構成する
ms.date: 03/23/2018
ms.topic: conceptual
helpviewer_keywords:
- live code analysis
- background analysis
- analysis scope
- full solution analysis
author: jillre
ms.author: jillfra
manager: jillfra
ms.workload:
- dotnet
ms.openlocfilehash: 300e3f276a45cfe2115311c7d27eedce365616cf
ms.sourcegitcommit: 92361aac3665a934faa081e1d1ea89a067b01c5b
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/17/2020
ms.locfileid: "79432091"
---
# <a name="how-to-configure-live-code-analysis-scope-for-managed-code"></a>方法: マネージ コードのライブ コード分析スコープを構成する

## <a name="what-is-live-code-analysis-for-managed-code"></a>マネージ コードの "ライブ コード分析" とは何ですか。
Visual Studio は、エディタでソース ファイルを編集している間に、ライブ コード分析 (*バックグラウンド分析*とも呼ばれます) を実行します。 一部の機能は、許容できる Visual Studio IDE の編集エクスペリエンスに最小限の分析を必要とします。 IDE 機能の応答性を向上させる機能もあります。 一部の IDE 機能は、Roslyn アナライザーの診断やコード修正など、IDE の追加機能を有効にすることです。 機能に基づいて、これらの分析は次のようにグループ化できます。

- **診断のバックグラウンド計算**: ソース ファイルのエラー、警告、および提案を計算する分析。 これらの診断は、エラー一覧のエントリとして表示され、エディタでは波線として表示されます。 これらは、次の 2 つのカテゴリに分類できます。
    - C# および Visual Basic コンパイラ診断
    - Roslyn アナライザー診断には、次の項目が含まれます。

        - コードスタイルの提案と、コードスタイルの提案のための組み込み IDE アナライザ
        - 現在のソリューションのプロジェクト用に[インストールされている](./install-roslyn-analyzers.md)サードパーティのアナライザ パッケージ。

- **その他のバックグラウンド分析**: IDE 機能の応答性と Visual Studio の対話性を向上させるための分析。 このような分析の例は次のとおりです。
    - 開いているファイルのバックグラウンド解析。
    - 特定の IDE 機能の応答性を向上させるために、シンボルを実現するために、開いているファイルを含むプロジェクトのバックグラウンド コンパイル。
    - 構文キャッシュとシンボル キャッシュを構築する。
    - フォームやコントロールなどのソース ファイルのデザイナの関連付けを検出します。

## <a name="default-analysis-scope"></a>既定の分析範囲

既定では、Visual Studio で_開かれている_すべてのファイルに対して、診断のバックグラウンド計算のためのライブ コード分析が実行されます。 上記の_他のバックグラウンド分析_のほとんどは、少なくとも1つのオープンファイルを持つすべてのプロジェクトに対して実行されます。 ソリューション全体に対して実行されるバックグラウンド分析はほとんどありません。

## <a name="custom-analysis-scope"></a>カスタム分析スコープ

各バックグラウンド分析の既定のスコープは、顧客のシナリオとソリューションの大半に最適なユーザー エクスペリエンス、機能、およびパフォーマンスを実現するように調整されています。 ただし、バックグラウンド分析を減らすか、または増加するために、このスコープをカスタマイズする必要がある場合があります。 次に例を示します。

- 省電力モード: ユーザーがラップトップのバッテリで実行している場合は、バッテリ寿命を長くするために電力消費を最小限に抑える必要があります。 このシナリオでは、バックグラウンド分析を最小限に抑える必要があります。
- オンデマンド のコード分析: ユーザーがライブ アナライザーの実行をオフにし、オンデマンドでコード分析を手動で実行する場合は、バックグラウンド分析を最小限に抑えます。 [「方法 : コード分析をオンデマンドで手動で実行](./how-to-run-code-analysis-manually-for-managed-code.md)する」を参照してください。
- 完全なソリューション分析: ユーザーが、エディターで開いているかどうかにかかわらず、ソリューション内のすべてのファイルですべての診断を常に表示する場合。 このシナリオでは、ソリューション全体に対してバックグラウンド分析スコープを最大化する必要があります。

Visual Studio 2019 バージョン 16.5 以降では、ユーザーは、診断計算を含むすべてのライブ コード分析の範囲を明示的にカスタマイズできます。 使用可能な分析範囲は次のとおりです。

- **現在のドキュメント**: エディター内の現在のファイルまたは表示可能なファイルに対してのみ実行されるように、ライブ コード分析スコープを最小化します。
- **ドキュメントを開く**: 上記のセクションで説明したように、既定のライブ コード分析スコープ。
- **ソリューション全体**: ソリューション全体のすべてのファイルとプロジェクトに対して実行する、コード分析の有効範囲を最大化します。

[ツール オプション] ダイアログで、次の手順に従って、上記のカスタム分析スコープのいずれかを選択できます。

1. [**オプション]** ダイアログ ボックスを開くには、Visual Studio のメニュー バーで [**ツール** > **オプション]** を選択します。

2. [**オプション]** ダイアログ ボックスで、[**テキスト エディタ** > **C#]** または **[基本** > **詳細設定**] を選択します。

3. 目的の**バックグラウンド分析スコープ**を選択して、分析範囲をカスタマイズします。 完了したら **[OK]を選択します**。

![分析範囲。](./media/background-analysis-scope.png)

> [!NOTE]
> Visual Studio 2019 バージョン 16.5 より前のバージョンでは、ユーザーは **[ツール** > **オプション** > **] テキスト エディター** > **C#** または **[基本** > **詳細設定**] タブの [**完全なソリューション分析を有効にする**] チェック ボックスを使用して、ソリューション全体に対する診断計算の分析範囲をカスタマイズできます。以前のバージョンの Visual Studio でのバックグラウンド分析スコープを最小限に抑えるサポートはありません。

## <a name="automatically-minimize-live-code-analysis-scope"></a>ライブ コード分析スコープを自動的に最小化する

Visual Studio が 200 MB 以下のシステム メモリを使用できることを検出すると、ライブ コード分析スコープが自動的に "現在のドキュメント" に最小化されます。 この場合、Visual Studio が一部の機能を無効にしたことを通知する警告が表示されます。 ボタンを使用すると、必要に応じ、前の分析スコープに戻ることができます。

![分析範囲を最小化する警告テキスト](./media/fsa_alert.png)

## <a name="see-also"></a>関連項目

- [自動機能の中断](./automatic-feature-suspension.md)
- [省電力モード機能要求](https://github.com/dotnet/roslyn/issues/38429)
