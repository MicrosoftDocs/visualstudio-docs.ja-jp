---
title: 標準のコード分析チェックイン ポリシーを作成または更新する
ms.date: 11/04/2016
ms.topic: conceptual
f1_keywords:
- vs.codeanalysis.policyeditor
helpviewer_keywords:
- code analysis, migrating check-in policy
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: d034d65cd356ff44a42d10840ae064d81713457f
ms.sourcegitcommit: d233ca00ad45e50cf62cca0d0b95dc69f0a87ad6
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/01/2020
ms.locfileid: "75587538"
---
# <a name="how-to-create-or-update-standard-code-analysis-check-in-policies"></a>方法: 標準のコード分析チェックイン ポリシーを作成または更新する

コード分析のチェックインポリシーを使用して、Azure DevOps プロジェクト内のすべてのコードプロジェクトでコード分析を実行するように要求できます。 コード分析が必要な場合は、コードベースにチェックインされるコードの品質を向上させることができます。

> [!NOTE]
> この機能は、Team Foundation Server を使用している場合にのみ使用できます。

コード分析チェックインポリシーは、プロジェクトの設定で設定され、各コードプロジェクトに適用されます。 コード分析の実行は、コードプロジェクトのプロジェクト (.proj) ファイルのコードプロジェクトに対して構成されます。 コード分析の実行は、ローカルコンピューター上で実行されます。 コード分析のチェックインポリシーを有効にする場合、チェックインするコードプロジェクト内のファイルは、最後の編集の後にコンパイルする必要があります。また、少なくとも、プロジェクト設定の規則は、変更を含むコンピューターで実行する必要があります。が作成されました。

- マネージコードの場合は、コード分析規則のサブセットを含む*規則セット*を指定して、チェックインポリシーを設定します。

- C/C++コードの場合、Visual Studio 2017 バージョン15.6 以前では、チェックインポリシーですべてのコード分析規則が実行されている必要があります。 プリプロセッサディレクティブを追加して、Azure DevOps プロジェクト内の個々のコードプロジェクトの特定の規則を無効にすることができます。 15.7 以降では、 **/analyze: ルールセット**を使用して、実行するルールを指定できます。 詳細については、「[規則セットを使用C++して実行する規則を指定する](using-rule-sets-to-specify-the-cpp-rules-to-run.md)」を参照してください。

マネージコードのチェックインポリシーを指定すると、チームメンバーは、コードプロジェクトのコード分析設定を Azure DevOps プロジェクトポリシー設定と同期させることができます。

## <a name="to-open-the-check-in-policy-editor"></a>チェックインポリシーエディターを開くには

1. チームエクスプローラーで、プロジェクト名を右クリックし、 **[プロジェクトの設定]** をポイントして、 **[ソース管理]** をクリックします。

1. **[ソース管理]** ダイアログボックスで、 **[チェックインポリシー]** タブを選択します。

1. 次のいずれかの操作を行います。

    - **[追加]** をクリックして、新しいチェックインポリシーを作成します。

    - **[ポリシーの種類]** ボックスの一覧の既存の**コード分析**項目をダブルクリックして、ポリシーを変更します。

## <a name="to-set-policy-options"></a>ポリシーオプションを設定するには

次のオプションをオンまたはオフにします。

|OPTION|説明|
|------------|-----------------|
|**現在のソリューションの一部であるファイルのみを含めるようにチェックインを強制します。**|コード分析は、ソリューションおよびプロジェクト構成ファイルで指定されたファイルに対してのみ実行できます。 このポリシーは、ソリューションの一部であるすべてのコードが分析されることを保証します。|
|**C/C++コード分析 (/analyze) を適用する**|をチェックインする前にC++ 、コード分析を実行するために、すべての C またはプロジェクトが/analyze コンパイラオプションを使用してビルドされている必要があります。|
|**マネージコードのコード分析を強制する**|では、すべてのマネージプロジェクトをチェックインする前に、コード分析とビルドを実行する必要があります。|

## <a name="to-specify-a-managed-rule-set"></a>マネージド規則セットを指定するには

[**この規則セットを実行**する] の一覧で、次のいずれかの方法を使用します。

- Microsoft 標準規則セットを選択してください。

- [**ソース管理から規則セットを選択して\<] をクリックして、カスタム規則セットを選択してください...>** 。 次に、ソース管理ブラウザーで、規則セットのバージョンコントロールパスを入力します。 バージョンコントロールパスの構文は次のとおりです。

   **$/** `TeamProjectName` **/** `VersionControlPath`

カスタムチェックインポリシー規則セットを作成して実装する方法の詳細については、「[マネージコードのカスタムチェックインポリシーを実装](../code-quality/implementing-custom-code-analysis-check-in-policies-for-managed-code.md)する」を参照してください。

## <a name="see-also"></a>関連項目

- [マネージド コード用のカスタム コード分析チェックイン ポリシーを実装する](../code-quality/implementing-custom-code-analysis-check-in-policies-for-managed-code.md)
