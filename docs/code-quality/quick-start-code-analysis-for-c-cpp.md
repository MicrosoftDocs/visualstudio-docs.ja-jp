---
title: クイック スタート:C/C++ のコード分析
description: Visual Studio のコードC++に対して静的分析を実行し、一般的なコーディングの問題と欠陥を検出します。
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- C/C++ code analysis
- code analysis,C/C++
author: mikeblome
ms.author: mblome
manager: wpickett
ms.workload:
- cplusplus
ms.openlocfilehash: c3132db62de6f2775a739adb82b24c759e4767dc
ms.sourcegitcommit: 39a04f42d23597b70053686d7e927ba78f38a9a8
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/05/2019
ms.locfileid: "71974900"
---
# <a name="quickstart-code-analysis-for-cc"></a>クイック スタート: C/C++ のコード分析

C または C++ コードのコード分析を定期的に実行することで、アプリケーションの品質を向上できます。 これにより、一般的な問題、優れたプログラミング手法からの逸脱、テストで見つけることが難しい不具合を検出できます。 コード分析の警告はコンパイラのエラーや警告とは異なります。コード分析は、有効であってもコードの作成者やコードを利用する他のユーザーにとって問題になる可能性がある特定のコード パターンを検索するからです。

## <a name="configure-rule-sets-for-a-project"></a>プロジェクトの規則セットの構成

1. **ソリューションエクスプローラー**で、プロジェクト名のショートカットメニューを開き、 **[プロパティ]** を選択します。

2. 必要に応じて、次の手順を実行します。

    1. **[構成]** と **[プラットフォーム]** の一覧で、ビルド構成とターゲットプラットフォームを選択します。

    2. 既定では、外部ツールによって自動的に生成されたコードからの警告はコード分析では報告されません。 生成されたコードからの警告を表示するには、オフ、**結果生成されたコードを表示しない**チェック ボックスをオンします。

        > [!NOTE]
        > コード分析のエラーおよび警告がフォームやテンプレートで表示される場合、このオプションを使用しても、生成されたコードからこのエラーおよび警告の出力は抑制されません。 フォームまたはテンプレートのソース コードは表示することも保持することもできます。

3. 選択した構成を使用してプロジェクトがビルドされるたびにコード分析を実行するには、 **[C/C++ビルド時にコード分析を有効にする]** チェックボックスをオンにします。 **[分析]** メニューを開き、[ *ProjectName***でコード分析を実行**] をクリックして、手動でコード分析を実行することもできます。

4. **この規則セットを実行**ボックスの一覧で、次のいずれかの操作を行います。

    - 使用する規則セットを選択します。

    - **@No__t-1Browse >** を選択して、一覧に含まれていない既存のカスタム規則セットを指定します。

    - 定義、[カスタム規則セット](../code-quality/how-to-create-a-custom-rule-set.md)します。

### <a name="standard-cc-rule-sets"></a>標準の C/C++ 規則セット

Visual Studio には、ネイティブ コードの規則として 2 つの標準セットが含まれています。

|ルール セット|説明|
|--------------|-----------------|
|Microsoft ネイティブ最小推奨規則|この規則セットは、ネイティブ コードの最も重大な問題 (潜在的なセキュリティ ホールやアプリケーションのクラッシュなど) に関するものです。 ネイティブ プロジェクトにカスタムの規則セットを作成する場合は、必ずこの規則セットを含める必要があります。|
|Microsoft ネイティブ推奨規則|この規則セットは、広範な問題を対象としています。 これには、Microsoft ネイティブ最小推奨規則のすべての規則が含まれています。|

## <a name="run-code-analysis"></a>コード分析の実行

プロジェクト プロパティ ページの [コード分析] ページでは、プロジェクトをビルドするたびにコード分析を実行するように構成できます。 また、手動でコード分析を実行することもできます。

ソリューションでコード分析を実行するには

- **[ビルド]** メニューの **[ソリューションでコード分析を実行]** をクリックします。

プロジェクトでコード分析を実行するには

1. ソリューション エクスプローラーで、プロジェクトの名前を選択します。

2. **[ビルド]** メニューの [*プロジェクト名***でコード分析を実行**] をクリックします。

   プロジェクトまたはソリューションがコンパイルされ、コード分析が実行されます。 結果はエラー一覧に表示されます。

## <a name="analyze-and-resolve-code-analysis-warnings"></a>コード分析の警告の分析と解決

特定の警告を分析するには、エラー一覧で警告のタイトルを選択します。 警告を展開すると、問題に関する詳細情報が表示されます。 可能な場合は、コード分析に行番号と、警告の原因となった分析ロジックが表示されます。 問題の解決方法を含め、警告の詳細については、警告 ID を選択して、対応するオンラインヘルプトピックを表示します。

警告を選択すると、警告の原因となったコード行が Visual Studio のコードエディターで強調表示されます。

問題を理解した後は、コード内で解決できます。 次に、コード分析を再実行して、エラー一覧に警告が表示されなくなったこと、および修正によって新しい警告が発生していないことを確認します。

## <a name="suppress-code-analysis-warnings"></a>コード分析の警告を表示しない

コード分析警告の修正を行わないことを決定する場合があります。 コードを実装したときの警告の発生確率と、警告を解決するためのコード変更の量を比較して、解決しないことを選択できます。 または、警告で使用された分析が特定のコンテキストでは不適切であると判断できます。 個々の警告を非表示にして、エラー一覧に表示されないようにすることができます。

警告を抑制するには:

1. 詳細情報が表示されない場合は、警告のタイトルを選択して展開します。

2. 警告の下部にある **[アクション]** リンクをクリックします。

3. **[メッセージの非]** 表示 をクリックし、 **[ソース内]** を選択します。

   メッセージを非表示にすると、コード行の警告を抑制する `#pragma warning (disable:[warning ID])` が挿入されます。

## <a name="create-work-items-for-code-analysis-warnings"></a>コード分析警告用の作業項目の作成

作業項目トラッキング機能を使用して、Visual Studio 内からバグをログに記録できます。 この機能を使用するには、Team Foundation Server のインスタンスに接続する必要があります。

**1つ以上の C/C++コード警告用の作業項目を作成するには**

1. エラー一覧で、[] を展開し、警告を選択します。

2. 警告のショートカットメニューで、 **[作業項目の作成]** を選択し、作業項目の種類を選択します。

3. 選択された警告に対して作業項目が 1 つ作成され、IDE のドキュメント ウィンドウに作業項目が表示されます。

4. 追加情報を追加し、 **[作業項目の保存]** を選択します。

## <a name="search-and-filter-code-analysis-results"></a>コード分析結果の検索とフィルター処理

警告メッセージの長い一覧の検索と、複数のプロジェクトから成るソリューションの警告をフィルター処理できます。

- **タイトルまたは警告 id で警告をフィルター処理するには**:検索ボックスにキーワードを入力します。

- **警告を重要度でフィルター処理するに**は:既定では、コード分析メッセージには**警告**の重大度が割り当てられます。 1つまたは複数のメッセージの重大度を、カスタム規則セットの**エラー**として割り当てることができます。 **エラー一覧**の **重要度** 列で、ドロップダウン矢印をクリックし、フィルター アイコンをクリックします。 **[警告]** または **[エラー]** を選択すると、それぞれの重要度が割り当てられているメッセージのみが表示されます。 すべてのメッセージを表示するには、[**すべて選択]** を選択します。

## <a name="see-also"></a>関連項目

[C/のコード分析C++](../code-quality/code-analysis-for-c-cpp-overview.md)