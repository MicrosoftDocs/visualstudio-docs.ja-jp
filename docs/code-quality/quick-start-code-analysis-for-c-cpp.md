---
title: "クイック スタート: C/C++ のコード分析 | Microsoft Docs"
ms.custom: ""
ms.date: "12/03/2016"
ms.prod: "visual-studio-dev14"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-devops-test"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "C/C++ コード分析"
  - "コード分析, C/C++"
ms.assetid: 6110b8ba-0af6-4acd-b1ba-bb0551f90e44
caps.latest.revision: 8
caps.handback.revision: 8
author: "corob-msft"
ms.author: "corob"
manager: "ghogen"
---
# クイック スタート: C/C++ のコード分析
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

C または C\+\+ コードのコード分析を定期的に実行することで、アプリケーションの品質を向上できます。  これにより、一般的な問題、優れたプログラミング手法からの逸脱、テストで見つけることが難しい不具合を検出できます。  コード分析の警告は、コンパイラ エラーや警告とは異なり、有効でありながらも、コードを使用するユーザーにとって問題を引き起こす可能性のある特定のコード パターンが検索されます。  
  
## このトピックの内容  
  
-   [プロジェクトの規則セットの構成](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_ConfigureRuleSets)  
  
-   [コード分析の実行](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Run)  
  
-   [コード分析の警告の分析と解決](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Analyze)  
  
-   [コード分析の警告の抑制](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Suppress)  
  
-   [コード分析の警告のための作業項目の作成](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Creating_work_items_for_code_analysis_warnings)  
  
-   [コード分析の結果の検索とフィルター処理](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Search)  
  
##  <a name="BKMK_ConfigureRuleSets"></a> プロジェクトの規則セットの構成  
  
1.  **ソリューション エクスプローラー**で、プロジェクト名のショートカット メニューを開き、**\[プロパティ\]** を選択します。  
  
2.  必要に応じて、次の手順を実行します。  
  
    1.  **\[構成\]** および **\[プラットフォーム\]** の一覧で、ビルド構成とターゲット プラットフォームを選択します。  
  
    2.  既定では、外部ツールによって自動的に生成されたコードからの警告はコード分析では報告されません。  生成されたコードからの警告を表示するには、**\[生成されたコードから結果を表示しない\]** チェック ボックスをオフにします。  
  
        > [!NOTE]
        >  コード分析のエラーおよび警告がフォームやテンプレートで表示される場合、このオプションを使用しても、生成されたコードからこのエラーおよび警告の出力は抑制されません。  フォームまたはテンプレートのソース コードは表示することも保持することもできます。  
  
3.  選択した構成を使用してプロジェクトをビルドするたびにコード分析を実行するには、**\[ビルド時に C\/C\+\+ のコード分析を有効化\]** チェック ボックスをオンにします。  **\[分析\]** メニューを開き、**\[*\<プロジェクト名\>* でコード分析を実行\]** を選択して、コード分析を手動で実行することもできます。  
  
4.  **\[この規則セットを実行\]** ボックスの一覧で、次のいずれかの操作を行います。  
  
    -   使用する規則セットを選択します。  
  
    -   **\[\<参照...\>\]** を選択して、一覧にない、既存のカスタム規則セットを指定します。  
  
    -   カスタム規則セットを定義します。  
  
         詳細については、「[カスタム規則セットの作成](../code-quality/creating-custom-code-analysis-rule-sets.md)」を参照してください。  
  
### 標準の C\/C\+\+ 規則セット  
 Visual Studio には、ネイティブ コードの規則として 2 つの標準セットが含まれています。  
  
|ルール セット|説明|  
|-------------|--------|  
|Microsoft ネイティブ最小推奨規則|この規則セットは、ネイティブ コードの最も重大な問題 \(潜在的なセキュリティ ホールやアプリケーションのクラッシュなど\) に関するものです。  ネイティブ プロジェクトにカスタムの規則セットを作成する場合は、必ずこの規則セットを含める必要があります。|  
|Microsoft ネイティブ推奨規則|この規則セットは、広範な問題を対象としています。  これには、Microsoft ネイティブ最小推奨規則のすべての規則が含まれています。|  
  
##  <a name="BKMK_Run"></a> コード分析の実行  
 プロジェクト プロパティ ページの \[コード分析\] ページでは、プロジェクトをビルドするたびにコード分析を実行するように構成できます。  また、手動でコード分析を実行することもできます。  
  
 ソリューションでコード分析を実行するには  
  
-   **\[ビルド\]** メニューで、**\[ソリューションでコード分析を実行\]** をクリックします。  
  
 プロジェクトでコード分析を実行するには  
  
-   ソリューション エクスプローラーで、プロジェクトの名前を選択します。  
  
-   **\[ビルド\]** メニューで、**\[*\<プロジェクト名\>* でコード分析を実行\]** を選択します。  
  
 プロジェクトまたはソリューションがコンパイルされ、コード分析が実行されます。  \[コード分析\] ウィンドウに結果が表示されます。  
  
##  <a name="BKMK_Analyze"></a> コード分析の警告の分析と解決  
 特定の警告を分析するには、\[コード分析\] ウィンドウで警告のタイトルを選択します。  警告を展開すると、問題に関する詳細情報が表示されます。  可能な場合は、コード分析に行番号と、警告の原因となった分析ロジックが表示されます。  問題の解決策などの警告の詳細については、警告 ID を選択すると、そのメッセージに関する MSND ライブラリ内のヘルプ トピックが表示されます。  
  
 警告を展開すると、警告の原因となったコード行が Visual Studio コード エディターで強調表示されます。  
  
 問題を理解した後は、コード内で解決できます。  その後、コード分析に戻り、\[コード分析\] ウィンドウに警告が表示されなくなったことと、修正によって新たな警告が発生していないことを確認します。  
  
> [!TIP]
>  コード分析は \[コード分析\] ウィンドウで再実行できます。  **\[分析\]** ボタンを選択し、分析のスコープを選択します。  ソリューション全体または選択したプロジェクトに対して分析を再実行できます。  
  
##  <a name="BKMK_Suppress"></a> コード分析の警告の抑制  
 コード分析の警告を解決しないことを選択する場合があります。  警告の解決に必要な再コーディングが多すぎ、コードの実際の実装で問題が発生する可能性があると判断するかもしれません。  また、警告で使用されている分析が、特定のコンテキストに適していないと考えることもあるでしょう。  個々の警告を抑制して、\[コード分析\] ウィンドウに表示されないようにすることができます。  
  
 警告を抑制するには:  
  
1.  詳細情報が表示されない場合は、警告のタイトルを選択して展開します。  
  
2.  警告の下部にある **\[操作\]** リンクを選択します。  
  
3.  **\[メッセージの非表示\]**、**\[ソース内\]** を順に選択します。  
  
 メッセージを非表示にすると、コードの該当行に対して警告を抑制する`#pragma warning (disable:`*警告 ID*`)` が挿入されます。  
  
##  <a name="BKMK_Creating_work_items_for_code_analysis_warnings"></a> コード分析の警告のための作業項目の作成  
 作業項目トラッキング機能を使用して、Visual Studio 内からバグをログに記録できます。  この機能を使用するには、Team Foundation Server のインスタンスに接続する必要があります。  
  
 **1 つ以上の C\/C\+\+ コード警告用に作業項目を作成するには**  
  
1.  \[コード分析\] ウィンドウで、警告を展開して選択します。  
  
2.  警告のショートカット メニューで、**\[作業項目の作成\]** を選択し、作業項目の種類を選択します。  
  
3.  選択された警告に対して作業項目が 1 つ作成され、IDE のドキュメント ウィンドウに作業項目が表示されます。  
  
4.  詳細情報を追加し、**\[作業項目の保存\]** を選択します。  
  
##  <a name="BKMK_Search"></a> コード分析の結果の検索とフィルター処理  
 警告メッセージの一覧が長い場合に検索したり、複数のプロジェクトから成るソリューションの警告をフィルター処理したりすることができます。  
  
1.  **タイトルまたは警告 ID で警告をフィルター処理するには**: **\[フィルター\]** テキスト ボックスにキーワードを入力します。  
  
2.  **プロジェクトで警告をフィルター処理するには**: 複数のプロジェクトから成るソリューションで、\[コード分析\] ウィンドウの右上にある一覧から 1 つ以上のプロジェクトを選択します。  すべての警告を表示するには、ソリューション名を選択します。  
  
3.  **重大度で警告をフィルター処理するには**: 既定では、コード分析のメッセージに割り当てられている重大度は **\[警告\]** です。  カスタムの規則セットを使用して、1 つ以上のメッセージの重大度を **\[エラー\]** に割り当てることができます。  **\[警告\]** または **\[エラー\]** を選択すると、それぞれの重大度が割り当てられたメッセージのみが表示されます。  すべてのメッセージを表示するには、**\[すべて\]** を選択します。