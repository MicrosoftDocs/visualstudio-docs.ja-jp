---
title: 'クイック スタート: C/C++ のコード分析'
ms.date: 11/04/2016
ms.technology: vs-ide-code-analysis
ms.topic: conceptual
helpviewer_keywords:
- C/C++ code analysis
- code analysis,C/C++
author: mikeblome
ms.author: mblome
manager: wpickett
ms.workload:
- cplusplus
ms.openlocfilehash: e43c505716fe437f53ac1d1b8e7921ec76e153d0
ms.sourcegitcommit: 42ea834b446ac65c679fa1043f853bea5f1c9c95
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/19/2018
---
# <a name="quickstart-code-analysis-for-cc"></a>C/c++ コード分析のクイック スタート。

C または C++ コードのコード分析を定期的に実行することで、アプリケーションの品質を向上できます。 これにより、一般的な問題、優れたプログラミング手法からの逸脱、テストで見つけることが難しい不具合を検出できます。 コード分析の警告はコンパイラのエラーや警告とは異なります。コード分析は、有効であってもコードの作成者やコードを利用する他のユーザーにとって問題になる可能性がある特定のコード パターンを検索するからです。

## <a name="configure-rule-sets-for-a-project"></a>プロジェクトの規則セットの構成

1. **ソリューション エクスプ ローラー**、プロジェクト名のショートカット メニューを開きを選択し、**プロパティ**です。

2. 必要に応じて、次の手順を実行します。

    1. **構成**と**プラットフォーム**リストは、ビルド構成とターゲット プラットフォームを選択します。

    2. 既定では、外部ツールによって自動的に生成されたコードからの警告はコード分析では報告されません。 生成されたコードからの警告を表示するには、オフ、**生成されたコードから結果を表示しない**チェック ボックスをオンします。

        > [!NOTE]
        > コード分析のエラーおよび警告がフォームやテンプレートで表示される場合、このオプションを使用しても、生成されたコードからこのエラーおよび警告の出力は抑制されません。 フォームまたはテンプレートのソース コードは表示することも保持することもできます。

3. 選択した構成を使用して、プロジェクトをビルドするたびにコード分析を実行するには選択、**ビルド時に C/C++ のコード分析を有効にする**チェック ボックスをオンします。 手動では開くことによってもコード分析を実行することができます、**分析**メニュー選択して**でコード分析を実行** *ProjectName*です。

4. **この規則セットを実行**ボックスの一覧で、次のいずれかの操作します。

    - 使用する規則セットを選択します。

    - 選択 **\<[参照...] >**既存のカスタム規則セットを指定ではありません、ボックスの一覧です。

    - 定義、[カスタム規則セット](../code-quality/how-to-create-a-custom-rule-set.md)です。

### <a name="standard-cc-rule-sets"></a>標準の C/C++ 規則セット

Visual Studio には、ネイティブ コードの規則として 2 つの標準セットが含まれています。

|ルール セット|説明|
|--------------|-----------------|
|Microsoft ネイティブ最小推奨規則|この規則セットは、ネイティブ コードの最も重大な問題 (潜在的なセキュリティ ホールやアプリケーションのクラッシュなど) に関するものです。 ネイティブ プロジェクトにカスタムの規則セットを作成する場合は、必ずこの規則セットを含める必要があります。|
|Microsoft ネイティブ推奨規則|この規則セットは、広範な問題を対象としています。 これには、Microsoft ネイティブ最小推奨規則のすべての規則が含まれています。|

## <a name="run-code-analysis"></a>コード分析の実行

プロジェクト プロパティ ページの [コード分析] ページでは、プロジェクトをビルドするたびにコード分析を実行するように構成できます。 また、手動でコード分析を実行することもできます。

ソリューションでコード分析を実行するには

- **[ビルド]** メニューの **[ソリューションでコード分析を実行]** をクリックします。

 プロジェクトでコード分析を実行するには

- ソリューション エクスプローラーで、プロジェクトの名前を選択します。

- **ビルド**] メニューの [選択**でコード分析を実行***プロジェクト名*です。

 プロジェクトまたはソリューションがコンパイルされ、コード分析が実行されます。 結果は、エラー一覧に表示されます。

## <a name="analyze-and-resolve-code-analysis-warnings"></a>コード分析の警告の分析と解決

特定の警告を分析するには、エラー一覧 に、警告のタイトルを選択します。 警告を展開すると、問題に関する詳細情報が表示されます。 可能な場合は、コード分析に行番号と、警告の原因となった分析ロジックが表示されます。 など、問題の解決策の候補の警告の詳細については、対応するオンライン ヘルプ トピックを表示する警告 ID を選択します。

警告を選択すると、警告の原因となったコード行は、Visual Studio コード エディターで強調表示されます。

問題を理解した後は、コード内で解決できます。 次に、コード分析を行いことを確認して、警告がエラー一覧 に表示されないこと、修正が発生しない新しい警告を再実行します。

## <a name="suppress-code-analysis-warnings"></a>コード分析の警告を抑制します。

コード分析警告の修正を行わないことを決定する場合があります。 コードを実装したときの警告の発生確率と、警告を解決するためのコード変更の量を比較して、解決しないことを選択できます。 または、警告で使用された分析が特定のコンテキストでは不適切であると判断できます。 不要になったエラーの一覧に表示されるようにするには、個々 の警告を抑制することができます。

警告を抑制するには:

1. 詳細情報が表示されない場合は、警告のタイトルを選択して展開します。

2. 警告の下部にある **[アクション]** リンクをクリックします。

3. 選択**メッセージの非表示**を選択し**でソース**です。

 メッセージを非表示にすると、コードの該当行に対して警告を抑制する`#pragma warning (disable:`*警告 ID*`)` が挿入されます。

## <a name="create-work-items-for-code-analysis-warnings"></a>コードの作業項目の分析の警告を作成します。

作業項目トラッキング機能を使用して、Visual Studio 内からバグをログに記録できます。 この機能を使用するには、Team Foundation Server のインスタンスに接続する必要があります。

**1 つ以上の C/C++ コード警告用の作業項目を作成するには**

1. [エラー一覧] で展開し、警告を選択

2. 警告のショートカット メニューで**作業項目の作成**、作業項目の種類を選択します。

3. 選択された警告に対して作業項目が 1 つ作成され、IDE のドキュメント ウィンドウに作業項目が表示されます。

4. その他の情報を追加し、**作業項目の保存**です。

## <a name="search-and-filter-code-analysis-results"></a>検索とフィルターのコード分析の結果

警告メッセージの長い一覧の検索と、複数のプロジェクトから成るソリューションの警告をフィルター処理できます。

- **タイトルまたは警告 id でフィルターの警告を**: 検索ボックスに、キーワードを入力します。

- **重大度でフィルター警告を**: 既定では、コード分析のメッセージがの重要度を割り当てられた**警告**です。 として 1 つまたは複数のメッセージの重大度を割り当てることができます**エラー**カスタム ルールで設定します。 **重大度**の列、**エラー一覧**、ドロップダウン矢印とし、[フィルター] アイコンを選択します。 選択**警告**または**エラー**それぞれの重大度が割り当てられているメッセージのみを表示します。 選択**すべて選択**すべてのメッセージを表示します。

## <a name="see-also"></a>関連項目

[C と C++ のコード分析](../code-quality/code-analysis-for-c-cpp-overview.md)