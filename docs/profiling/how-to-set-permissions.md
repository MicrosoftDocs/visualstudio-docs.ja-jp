---
title: "方法 : プロファイリングのアクセス許可を設定する | Microsoft Docs"
ms.custom: ""
ms.date: "11/04/2016"
ms.reviewer: ""
ms.suite: ""
ms.technology: 
  - "vs-ide-debug"
ms.tgt_pltfrm: ""
ms.topic: "article"
helpviewer_keywords: 
  - "プロファイル、アクセス許可の設定"
  - "セキュリティ [Visual Studio ALM]、アクセス許可の設定"
  - "アクセス許可 [Visual Studio ALM]、プロファイル"
  - "プロファイリング ツール、プロファイルのアクセス許可の設定"
  - "パフォーマンス ツール、プロファイルのアクセス許可の設定"
ms.assetid: 69f27896-8f46-4ef3-bfb7-726d95304f3a
caps.latest.revision: 23
author: "mikejo5000"
ms.author: "mikejo"
manager: "ghogen"
caps.handback.revision: 23
---
# 方法 : プロファイリングのアクセス許可を設定する
[!INCLUDE[vs2017banner](../code-quality/includes/vs2017banner.md)]

このトピックでは、コンピューターの管理者アクセス許可を持たないユーザーまたはグループにプロファイリングに必要なセキュリティ アクセス許可をコンピューターの管理者が付与する方法について説明します。  
  
 基本的なセキュリティ原則として、必要以上のアクセス許可でアプリケーションを実行しないことが規定されています。  この原則はユーザーに対しても当てはまります。  ユーザーが Administrators グループではなく Users グループのメンバーとしてログオンしても必要な操作をすべて行うことができるのであれば、ユーザーに管理者アクセス許可を与えないでください。  最初の手順「ユーザー アクセス許可を持つユーザー アカウントを作成するには」では、Users グループのメンバーのユーザー アカウントを作成する方法を説明します。  
  
 **要件**  
  
-   [!INCLUDE[vsUltLong](../code-quality/includes/vsultlong_md.md)], [!INCLUDE[vsPreLong](../code-quality/includes/vsprelong_md.md)], [!INCLUDE[vsPro](../code-quality/includes/vspro_md.md)]  
  
 Users グループのメンバーの場合は、チームの他のメンバーとの間で共有されるディスク上のフォルダーおよびファイルにアクセスする必要があります。  2 番目の手順「共有プロジェクトファイルへのアクセスを許可するには」では、共有プロジェクトファイルへのアクセスを許可する方法を説明します。  
  
 Users グループのメンバーは、管理者が、プロファイリング ツールのソフトウェア ドライバーへのアクセスを許可するプロファイリング ツールを実行できます。  最後の手順「プロファイリング ドライバーへのアクセスを許可するには」では、ドライバーへのアクセスを許可する方法について説明します。  
  
> [!NOTE]
>  これらの手順を実行するには、管理者アクセス許可が必要です。  
  
### ユーザー アクセス許可を持つユーザー アカウントを作成するには  
  
1.  **\[マイ コンピューター\]** を右クリックし、**\[管理\]** をクリックします。  
  
     **\[コンピューターの管理\]** ウィンドウが開きます。  
  
2.  **\[ローカル ユーザーとグループ\]** を展開します。  
  
3.  **\[ユーザー\]** フォルダーを右クリックし、**\[新しいユーザー\]** をクリックします。  
  
     **\[新しいユーザー\]** ダイアログ ボックスが表示されます。  
  
4.  このダイアログ ボックスの各フィールドに、作成するユーザー アカウントの情報を入力します。  パスワードを指定します。  オプションとして、ユーザーが次回ログオンしたときにパスワードを変更するように求めるオプションのチェック ボックスをオンにします。  
  
5.  **\[作成\]** をクリックし、**\[閉じる\]** をクリックします。  
  
     Users グループに新しいユーザーが作成されます。このグループのユーザーには、管理者アクセス許可が与えられていません。  
  
### 共有プロジェクトファイルへのアクセスを許可するには  
  
1.  Windows エクスプローラー \(またはファイル エクスプローラー\) で、このユーザーによって使用され、プロジェクト チームによって共有されるプロジェクト ファイルのフォルダー ツリーのルートに移動します。  
  
     このフォルダーのパスの一例を次に示します。  
  
    ```  
    D:\ourProject  
    ```  
  
2.  フォルダーを右クリックし、**\[プロパティ\]** をクリックします。  
  
     **\[\<フォルダー名\> プロパティ\]** ダイアログ ボックスが表示されます。  
  
3.  **\[セキュリティ\]** タブをクリックします。  
  
4.  **\[グループ名またはユーザー名\]** ボックスのユーザー アカウントの名前をクリックします。  
  
5.  **\[アクセス許可の \<ユーザー名\>\]** ボックスで、**\[フル コントロール\]** のチェック ボックスをオンにします。  
  
6.  \[OK\] をクリックします。  
  
     これにより、手順 5. で選択したフォルダーで始まる共有フォルダー ツリーに対するアクセス許可がユーザーに与えられます。  
  
### プロファイリング ドライバーへのアクセスを許可するには  
  
1.  管理者としてコマンド プロンプトを開きます。  
  
2.  次のディレクトリに移動します。  
  
    ```  
    <drive>:\Program Files\Microsoft Visual Studio 10\Team Tools\Performance Tools  
    ```  
  
3.  次のコマンドを実行します。  
  
    ```  
    vsperfcmd /admin:driver,start /admin:service,start  
    ```  
  
     このコマンドは、プロファイリング ツールのドライバーをインストールおよび起動します。  
  
     このコマンドにより、プロファイリング ドライバーとプロファイリング サービスが開始され、管理者以外のユーザーがユーザーのプロセス空間でプロファイリング機能を使用できるようになります。  このコマンドを実行できるのは Administrators グループのユーザーだけです。Users グループのユーザーが実行すると失敗します。  
  
     この一連の手順の最後の手順を実行しない限り、コンピューターを再起動するとこの手順の設定は元に戻ります。  
  
4.  コマンドを実行し、コンピューターに対する管理者アクセスを持たないユーザーまたはグループがプロファイリング ドライバーの機能にアクセスできるようにします。  
  
    ```  
    vsperfcmd /admin:security,allow,<right[,right],<user name|group name>  
    ```  
  
     このコマンドは、プロファイリング \<ツール\>  \<にユーザー名 \> またはグループ アカウント名のアクセス権が付与されます。  \<右側の\> オプションはユーザーがアクセスできるプロファイリング機能が決まります。  \<右側の\> オプションには、次の値を一つ以上指定できます。:  
  
    -   FullAccess \- サービスからのパフォーマンス データの収集、サンプリング、およびセッション間プロファイリングを含む、すべてのプロファイリング方式にアクセスできます。  
  
    -   SampleProfiling \- サンプル プロファイリング方式にアクセスできます。  
  
    -   CrossSession \- サービスのプロファイリングに必要なセッション間プロファイリングにアクセスできます。  
  
5.  \(省略可能\) コンピューターの再起動後にもここまでの手順の結果を保存するには、次のコマンドを実行します。  
  
    ```  
    vsperfcmd /admin:driver,autostart,on  
    ```  
  
 指定されたユーザーは、ログインすると、管理者アクセス許可を持たずにプロファイリング ツールを使用できるようになります。  
  
## 参照  
 [パフォーマンス セッションの構成](../profiling/configuring-performance-sessions.md)   
 [VSPerfCmd](../profiling/vsperfcmd.md)   
 [プロファイルと Windows Vista のセキュリティ](../profiling/profiling-and-windows-vista-security.md)