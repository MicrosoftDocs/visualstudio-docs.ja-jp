---
title: 方法 - インストルメント化前のコマンドおよびインストルメント化後のコマンドを指定する | Microsoft Docs
ms.date: 11/04/2016
ms.topic: how-to
f1_keywords:
- vs.performance.property.instrument
helpviewer_keywords:
- profiling tools, pre-instrument events
- events [Visual Studio], pre-instrument
- pre-instrument events, performance tools
ms.assetid: 6a8d5340-1d1b-4d81-88dd-8e1f435eb828
author: mikejo5000
ms.author: mikejo
manager: jillfra
monikerRange: vs-2017
ms.workload:
- multiple
ms.openlocfilehash: ba91e04342b9b78e3c6acae5296857a6f00f2aba
ms.sourcegitcommit: 57d96de120e0574e506dfd80bb7adfbac73f96be
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/24/2020
ms.locfileid: "85328998"
---
# <a name="how-to-specify-pre--and-post-instrument-commands"></a>方法: インストルメント前のコマンドおよびインストルメント後のコマンドを指定する

パフォーマンス セッションのバイナリがインストルメント化される前か後に実行されるコマンドを指定できます。 コマンド ラインから発行できるコマンドはすべて、インストルメント化前のイベントまたはインストルメント化後のイベントとして指定できます。 たとえば、バイナリのインストルメント化後に実行されるバッチ ファイルで、厳密な名前キーを持つアセンブリの再署名を自動化するコマンドを指定できます。

プロファイル実行におけるインストルメント化されたすべてのバイナリ、または個々のバイナリに対してコマンドを指定できます。 ただし、インストルメンテーション プロセスの前に実行するよう指定できるインストルメント化前のコマンドは 1 つだけであり、インストルメンテーション プロセスの後に実行するよう指定できるインストルメント化後のコマンドも 1 つだけです。 すべてのバイナリと個々のバイナリの両方に対してコマンドを指定することはできません。 すべてのバイナリに対してコマンドを指定すると、そのコマンドはセッションの各バイナリのインストルメンテーションの前または後に実行されます。

コマンドが実行される作業ディレクトリは、[!INCLUDE[vs_current_short](../code-quality/includes/vs_current_short_md.md)] を実行しているオペレーティング システムと、プロファイリング対象アプリケーションの対象プラットフォームによって異なります。

プロファイル ツールへのパスを取得するには、[コマンド ライン ツールへのパスの指定](../profiling/specifying-the-path-to-profiling-tools-command-line-tools.md)に関する記事をご覧ください。

## <a name="to-specify-pre-instrument-commands"></a>インストルメント化前のコマンドを指定するには

1. 次のいずれかの操作を実行します。

    - パフォーマンス セッションのすべてのバイナリに対してインストルメント化前のコマンドを指定するには、**パフォーマンス エクスプローラー**でパフォーマンス セッション ノードを選択し、右クリックして **[プロパティ]** を選択します。

    - 特定のバイナリにインストルメント化前のコマンドを指定するには、パフォーマンス セッションの **[ターゲット]** リストにあるバイナリの名前を右クリックし、 **[プロパティ]** を選択します。

2. **[プロパティ ページ]** で、 **[インストルメンテーション]** をクリックします。

3. **[インストルメント化前のイベント]** の **[コマンド ライン]** テキスト ボックスにコマンドを入力します。

    > [!NOTE]
    > **[コマンド ライン]** ボックスの横にある省略記号ボタン **(...)** をクリックし、適切な .exe、.cmd、または .bat ファイルを参照して選択できます。

4. **[OK]** をクリックします。

     コマンドを削除することなくその実行を無効にするには、 **[インストルメンテーションから除外]** チェック ボックスを選択します。 コンパイラまたはリンカーの設定を変更するには、プロジェクトのプロパティ ページを使用します。

## <a name="to-specify-post-instrument-commands"></a>インストルメント化後のコマンドを指定するには

1. 次のいずれかの操作を実行します。

    - パフォーマンス セッションのすべてのバイナリに対してインストルメント化後のコマンドを指定するには、**パフォーマンス エクスプローラー**でパフォーマンス セッション ノードを選択し、右クリックして **[プロパティ]** を選択します。

    - 特定のバイナリにインストルメント化後のコマンドを指定するには、パフォーマンス セッションの **[ターゲット]** リストにあるバイナリの名前を右クリックし、 **[プロパティ]** を選択します。

2. **[プロパティ ページ]** で、 **[インストルメンテーション]** をクリックします。

3. **[インストルメント化後のイベント]** の **[コマンド ライン]** テキスト ボックスにコマンドを入力します。

    > [!NOTE]
    > **[コマンド ライン]** ボックスの横にある省略記号ボタン **(...)** をクリックし、適切な .exe、.cmd、または .bat ファイルを参照して選択できます。

4. **[OK]** をクリックします。

     コマンドを削除することなくその実行を無効にするには、 **[インストルメンテーションから除外]** チェック ボックスを選択します。 コンパイラまたはリンカーの設定を変更するには、プロジェクトのプロパティ ページを使用します。

## <a name="see-also"></a>関連項目

[パフォーマンス セッションの構成](../profiling/configuring-performance-sessions.md)
