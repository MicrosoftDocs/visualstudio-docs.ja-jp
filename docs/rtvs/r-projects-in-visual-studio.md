---
title: R プロジェクト
description: プロパティ、プロジェクト コマンド、テンプレートなど、Visual Studio で R プロジェクトを作成および管理する方法を説明します。
ms.date: 06/29/2017
ms.topic: conceptual
author: kraigb
ms.author: kraigb
manager: jmartens
ms.workload:
- data-science
ms.openlocfilehash: 42cdc6e964d23b5aafdfe225c04d5d35b151cc08
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/08/2021
ms.locfileid: "99936406"
---
# <a name="create-r-projects-in-visual-studio"></a>Visual Studio で R プロジェクトを作成する

R プロジェクト ( *.rxproj* ファイル) は、プロジェクトに関連付けられているすべてのソースとコンテンツ ファイルを識別します。 R プロジェクトは、各ファイルのビルド情報の格納、ソース管理システムと統合するための情報の保持、論理コンポーネントへのアプリケーションの整理の補助なども行います。 ただし、インストールされているパッケージの一覧など、ワークスペース関連の情報は、ワークスペース自体とは別に保持されます。

プロジェクトは常に Visual Studio の *ソリューション* 内で管理され、ソリューションは相互に参照する可能性のある任意の数のプロジェクトを含むことができます。 「[Visual Studio で複数種類のプロジェクトを使用する](#use-multiple-project-types-in-visual-studio)」を参照してください。

## <a name="creating-a-new-r-project"></a>新規 R プロジェクトを作成する

1. Visual Studio を開きます。
1. **[ファイル] > [新規] > [プロジェクト]** の順に選択します (**Ctrl**+**Shift**+**N** キー)。
1. **[テンプレート]** の **[R]** から "R Project" を選択し、プロジェクトに名前と場所を指定し、 **[OK]** を選択します。

    ![Visual Studio 内の R (VS2017 の RTVS) の [新しいプロジェクト] ダイアログ ボックス](media/getting-started-01-new-project.png)

このコマンドにより、エディターに空の *script.R* ファイルが開き、プロジェクトが作成されます。 また、**ソリューション エクスプローラー** では、プロジェクト内に他の 2 つのファイルが表示されます。

![テンプレートから作成される R プロジェクトの内容](media/projects-template-results.png)

*.Rhistory* では、[[R インタラクティブ]](interactive-repl-for-r-in-visual-studio.md) ウィンドウに入力したすべてのコマンドが記録されます。 **[R ツール]** 、 **[Windows]** の順に選択し、 **[履歴]** コマンドで、専用の履歴ウィンドウを開くことができます。 そのウィンドウには、履歴の内容を消去するためのツール バー ボタンとコンテキスト メニュー項目が含まれています。

*rproject.rproj* ファイルには、Visual Studio では管理されていない一部の R 固有のプロジェクト設定が保持されています。

| プロパティ | Default | 説明 |
| --- | --- | --- |
| バージョン | 1 | プロジェクトの作成に使用された R Tools for Visual Studio のバージョン。 |
| RestoreWorkspace | Default | プロジェクト ディレクトリの `.RData` ファイルから以前のワークスペース変数を自動的に読み込みます。 |
| SaveWorkspace | Default | プロジェクトを閉じるときに、現在のワークスペース変数をプロジェクト ディレクトリの `.RData` ファイルに保存します。 |
| AlwaysSaveHistory | Default | プロジェクトを閉じるときに、現在の対話型ウィンドウ履歴をプロジェクト ディレクトリの `.RHistory` ファイルに保存します。 |
| EnableCodeIndexing | はい | コード検索速度を向上するために、バックグラウンドのインデックス作成タスクを実行するかどうかを決定します。 |
| UseSpacesForTab | はい | エディターで **Tab** キーが押されたときに、スペースを挿入するか (Yes)、またはタブ文字を挿入するか (No) を決定します。 |
| NumSpacesForTab | 2 | UseSpacesForTab が Yes の場合に挿入するスペースの数。 |
| エンコード | UTF-8 | `.R` ファイルの既定のエンコーディング。 |
| RnwWeave | Sweave | Rnw ファイルを編集するときに使用するパッケージ。 |
| LaTeX | pdfLaTeX | RMarkdown を PDF に変換するときに使用されるライブラリ。 |

### <a name="converting-a-folder-of-files-to-an-r-project"></a>ファイルのフォルダーを R プロジェクトに変換する

プロジェクトでの管理を希望する *.R* ファイルの既存のフォルダーがある場合は、次の手順を行います。

1. 前のセクションに従って Visual Studio で新しいプロジェクトを作成します。
1. プロジェクト フォルダーにファイルをコピーします。
1. Visual Studio ソリューション エクスプローラーでプロジェクトを右クリックし、 **[追加]**  >  **[既存の項目]** の順に選択し、追加するファイルを参照します。 それらのファイルは **[OK]** を選択するとプロジェクト ツリーに表示されます。
1. コードをサブフォルダーに移動して整理するには、プロジェクトを右クリックし、 **[追加]** 、 **[新しいフォルダー]** の順に選択し、そのフォルダーにファイルをコピーして、手順 3 の既存の項目を追加します。

## <a name="project-properties"></a>プロジェクト プロパティ

プロジェクトのプロパティ ページを開くには、**ソリューション エクスプローラー** でプロジェクトを右クリックし、 **[プロパティ]** を選択するか、 **[プロジェクト]、[<プロジェクト名> のプロパティ]** メニュー項目の順に選択します。 開いているウィンドウには、次のようなプロジェクトのプロパティが表示されます。

| タブ | プロパティ | 説明 |
| --- | --- | --- |
| 実行 | スタートアップ ファイル | **[Source startup file]\(ソース スタートアップ ファイル\)** コマンドを選択し、**F5** キーを押し、 **[デバッグ]**  >  **[デバッグの開始]** の順に選択するか、 **[デバッグ]**  >  **[デバッグなしで開始]** の順に選択して実行するファイルの名前。 プロジェクトでファイルを右クリックし、 **[R スタートアップ スクリプトとして設定]** を選択して、そのファイルをスタートアップ ファイルとして設定することもできます。 |
| | Reset R Interactive on Run (実行時に R インタラクティブをリセットする) | プロジェクトの実行時に、インタラクティブ ウィンドウのワークスペースのすべての変数を消去します。 この操作を実行することで、前回の実行結果のワークスペース内容が確実に消去されます。 |
| | Remote Project Path (リモート プロジェクト パス) | リモート ワークスペースのパス。 |
| | Transfer files on run (実行時にファイルを転送する) | **[Files to transfer]\(転送するファイル\)** のフィルターに従って、実行ごとにプロジェクト ファイルをリモート ワークスペースにコピーするかどうかを指定します。 |
| | Files to transfer (転送するファイル) | **[Transfer files on run]\(実行時にファイルを転送する\)** がオンの場合に、コピーする特定のファイルを示すファイル名とワイルドカード。 |
| 設定 | (Settings.R ファイル) | プロジェクト内にある *Settings.R* または * *.Settings.R* ファイルに由来する R プロジェクト設定。 設定ファイルがない場合は、変数を追加してページを保存すると、既定の *Settings.R* ファイルが作成されます。 また、 **[ファイル]** 、 **[新しい項目の追加]** メニュー コマンドの順に選択して、設定ファイルをプロジェクトに追加することもできます。 <br/> 設定は R コードとして保存され、そのファイルをソースにして他のモジュールを実行できるので、事前に定義した設定で環境を事前に設定することができます。 |

## <a name="r-specific-project-commands"></a>R 固有のプロジェクト コマンド

Visual Studio プロジェクトでは、右クリック メニューと **[プロジェクト]** メニューのどちらからでも、複数の一般的なコマンドを使用できます。 これらの一般的な機能については、「[Visual Studio のソリューションおよびプロジェクト](../ide/solutions-and-projects-in-visual-studio.md)」を参照してください。 しかしながら、R Tools for Visual Studio (RTVS) は独自のコマンドをたくさん、R プロジェクトの右クリック メニューとプロジェクト内のファイルとフォルダーの右クリック メニューに追加することにご留意ください。

| コマンド | 説明 |
| --- | --- |
| [作業ディレクトリをここに設定] | R インタラクティブ ウィンドウの作業ディレクトリをプロジェクト フォルダーに設定します。これは、プロジェクト内の任意のサブフォルダーでも使用することができます。 |
| [含んでいるフォルダーを開く] | Windows エクスプローラーで選択したファイルの場所を開きます。 |
| [R スクリプトを追加] | 既定の名前で新しい *.R* ファイルを作成して開きます。 また、 **[追加]** 、 **[新しい項目]** コマンドの順に選択して *.R* ファイルや他のファイルの種類を作成することもできます。 「[R 固有の項目テンプレート](#r-specific-item-templates)」を参照してください。 |
| [R Markdown を追加] | 既定の名前で新しい *.rmd* ドキュメントを作成して開きます。 また、 **[追加]** 、 **[新しい項目]** コマンドの順に選択して *.rmd* ファイルや他のファイルの種類を作成することもできます。 「[R 固有の項目テンプレート](#r-specific-item-templates)」を参照してください。  |
| [ストアド プロシージャの公開] | プロセスを開始して、R スクリプトにストアド プロシージャが含まれている場合はそれを公開します。 「[SQL Server ストアド プロシージャの使用](integrating-sql-server-with-r.md#work-with-sql-server-stored-procedures)」を参照してください。 |

## <a name="r-specific-item-templates"></a>R 固有の項目テンプレート

RTVS には、各ファイルの種類用に複数のテンプレートが含まれています。 このテンプレートにアクセスするには、R プロジェクトを右クリックして **[追加]** 、 **[新しい項目]** の順に選択するか、 **[プロジェクト]** 、 **[新しい項目の追加]** の順に選択するか、 **[ファイル]** 、 **[新規]** 、 **[ファイル]** の順に選択して、 **[R]** タブを選択します。テンプレートを確認するには、新しいプロジェクトを作成してさまざまな種類のファイルを挿入してみることをお勧めします。

> [!Note]
> **[追加]** 、 **[新しい項目]** コマンドの順に選択すると、以下の一覧にはない一般的なファイルの種類も表示されます。 **[ファイル]** 、 **[新規]** 、 **[ファイル]** の順に選択した場合は、 **[全般]** タブに表示されます。

| ファイルの種類 | 説明 |
| --- | --- |
| R スクリプト | R コマンド ラインに入力できるものと同じコマンドを含むテキスト ファイル。 |
| R Markdown | [R Markdown](rmarkdown-with-r-in-visual-studio.md) ドキュメントを含むファイル。 |
| R 設定 | R アプリケーション設定を含むファイル。 |
| R ドキュメント | 名前、エイリアス、およびタイトルの各フィールドのみを含む一般的な R ドキュメント ファイル。 |
| R ドキュメント (関数) | 関数を説明するコメントが指定された多くのフィールドを含む R ドキュメント ファイル。 |
| R ドキュメント (データセット) | データセットを説明するコメントが指定された多くのフィールドを含む R ドキュメント ファイル。 |
| SQL クエリ | 空の *.sql* ファイル。 「[SQL Server と R の使用](integrating-sql-server-with-r.md)」を参照してください。 |
| R を使用したストアド プロシージャ | 子の SQL クエリと子のストアド プロシージャ テンプレート ファイルを含む R ファイル。 「[SQL Server と R の使用](integrating-sql-server-with-r.md)」を参照してください。 |

## <a name="use-multiple-project-types-in-visual-studio"></a>Visual Studio で複数種類のプロジェクトを使用する

Visual Studio ソリューションには、1 つの論理的な場所に関連するプロジェクトを集めて管理できる便利な場所が用意されています。 この場所を利用してコードを整理し、チーム内のコラボレーションを容易にすることができます。

以下の例では、R と Azure Machine Learning を使用して構築したモデルを含む R プロジェクト、Python/scikit-learn プロジェクト、演算処理が集中するモジュールを含む C++ プロジェクト、データ管理用の SQL プロジェクト、結果を公開する Web サイト用の Python/Bottle プロジェクトがソリューションに含まれています。

![ソリューション内の複数の関連するプロジェクトが表示された Visual Studio ソリューション エクスプローラー](media/projects-polyglot.png)

太字のプロジェクトはソリューションの "スタートアップ" プロジェクトです。これを変更するには、別のプロジェクトを右クリックし、 **[スタートアップ プロジェクトに設定]** を選択します。

> [!Note]
> 現時点では、明示的に R から C#/C++ 言語に統合する機能はありません (Python 用にはあります。「[Python 用 C++ 拡張機能の作成](../python/working-with-c-cpp-python-in-visual-studio.md)」を参照してください)。  ただし、R 用の C# および C++ ブリッジを提供するライブラリは利用できます。

プロジェクトとソリューションの一般的な管理方法の詳細については、「[Visual Studio のソリューションおよびプロジェクト](../ide/solutions-and-projects-in-visual-studio.md)」を参照してください。
