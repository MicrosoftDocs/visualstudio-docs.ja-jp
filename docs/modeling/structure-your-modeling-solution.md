---
title: モデリング ソリューションの構築
ms.date: 11/04/2016
ms.topic: conceptual
author: jillre
ms.author: jillfra
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 73a1c6458bf6afc5d6fce34208dd8c2c3ddda37f
ms.sourcegitcommit: 5f6ad1cefbcd3d531ce587ad30e684684f4c4d44
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/22/2019
ms.locfileid: "72748212"
---
# <a name="structure-your-modeling-solution"></a>モデリング ソリューションの構築

開発プロジェクトでモデルを効果的に使用するため、チーム メンバーは、プロジェクトのさまざまな部分のモデルを同時に作業する必要があります。 このトピックでは、アプリケーションを、レイヤー図全体の各レイヤーに対応する複数の部分に分割するスキームを提案します。

プロジェクトやサブプロジェクトを迅速に開始するため、選択したプロジェクト構造に準拠したプロジェクト テンプレートを用意すると便利です。 ここでは、このようなテンプレートを作成して使用する方法について説明します。

このトピックでは、複数のチーム メンバーと、複数のチームを必要とするほどの大規模なプロジェクトでの作業を想定しています。 プロジェクトのコードとモデルは、[!INCLUDE[esprtfs](../code-quality/includes/esprtfs_md.md)] などのソース管理システムに格納されます。 少なくとも数人のチーム メンバーが Visual Studio を使用してモデルを開発しているときに、他のチーム メンバーは他のバージョンの Visual Studio を使って、モデルを表示できます。

各ツールとモデリング機能をサポートする Visual Studio のバージョンを確認するには、「[アーキテクチャツールとモデリングツールのバージョンサポート](../modeling/what-s-new-for-design-in-visual-studio.md#VersionSupport)」を参照してください。

## <a name="solution-structure"></a>ソリューション構造

中規模または大規模プロジェクトでは、チームの構造はアプリケーションの構造に基づいています。 各チームが、Visual Studio ソリューションを使用します。

### <a name="to-divide-an-application-into-layers"></a>1 つのアプリケーションを複数のレイヤーに分割するには

1. Web アプリケーション、サービス アプリケーション、デスクトップ アプリケーションなど、アプリケーションの構造に基づいて、ソリューションの構造を決定します。 さまざまな一般的なアーキテクチャについ[ては、「Microsoft アプリケーションアーキテクチャガイド](http://go.microsoft.com/fwlink/?LinkId=196681)」の「application アーキタイプ」で説明しています。

2. Visual Studio ソリューションを作成します。ここでは、アーキテクチャソリューションを呼び出します。 このソリューションは、システムの全体設計の作成に使われます。 このソリューションにはモデルは含まれますが、コードは含まれません。

   このソリューションに依存関係図を追加します。 依存関係図で、アプリケーションに対して選択したアーキテクチャを描画します。 たとえば、この図には、プレゼンテーション、ロジック、データの各レイヤーと、そのレイヤー間の依存関係が示されることがあります。

4. アーキテクチャの依存関係図で、レイヤーごとに個別の Visual Studio ソリューションを作成します。

   これらのソリューションを使って、レイヤーのコードを開発します。

5. レイヤーのデザインと、すべてのレイヤーに共通の概念を表すモデルを作成します。 すべてのモデルがアーキテクチャ ソリューションから確認できるように、また関連モデルが各レイヤーから確認できるように、モデルを配置します。

   これは、次の手順のいずれかを使用して実現できます。 最初の方法は、レイヤーごとに個別のモデリング プロジェクトを作成する方法、2 つ目の方法は、レイヤー間で共有されるモデリング プロジェクトを 1 つ作成する方法です。

#### <a name="use-a-separate-modeling-project-for-each-layer"></a>レイヤーごとに個別のモデリングプロジェクトを使用する

1. 各レイヤー ソリューションでモデリング プロジェクトを作成します。

   このモデルには、そのレイヤーの要件と設計を説明する図が含まれます。 入れ子になったレイヤーを示す依存関係図を含めることもできます。

   これで、レイヤーごとのモデルと、アプリケーション アーキテクチャ用のモデルが準備できました。 各モデルは、独自のソリューションに含まれます。 これにより、チーム メンバーが同時に、複数のレイヤー上で作業できます。

2. アーキテクチャ ソリューションに、各レイヤー ソリューションのモデリング プロジェクトを追加します。 そのためには、アーキテクチャ ソリューションを開きます。 **ソリューションエクスプローラー**で、ソリューションノードを右クリックして 追加 をポイントし、**既存のプロジェクト** をクリックします。 1 つのレイヤー ソリューションのモデリング プロジェクト (.modelproj) に移動します。

   各モデルは 2 つのソリューション ("ホーム" ソリューションとアーキテクチャ ソリューション) に表示されるようになりました。

3. 各レイヤーのモデリングプロジェクトに、依存関係図を追加します。 アーキテクチャの依存関係図のコピーから開始します。 依存関係図の依存関係にない部分は削除できます。

   また、このレイヤーの詳細な構造を表す依存関係図を追加することもできます。

   これらの図は、このレイヤーで開発されたコードの検証に使用されます。

4. アーキテクチャ ソリューションでは、Visual Studio を使って、すべてのレイヤーの要件と設計モデルを編集します。

   各レイヤー ソリューションでは、モデルを参照しながら、そのレイヤーのコードを開発します。 開発が終了し、同じコンピューターを使ってモデルを更新する必要がなくなったら、モデルの作成を実行できないバージョンの Visual Studio を使って、モデルの読み取りとコードの開発を実行できます。 また、これらのバージョンで、モデルからコードを生成することもできます。

   この方法を使用すると、同時にレイヤー モデルを編集する複数の開発者によって、干渉が発生することはありません。

   ただし、モデルは個別に作成されるため、共通の概念を参照することは難しくなります。 各モデルには、他のレイヤーやアーキテクチャと依存関係にある要素の独自コピーが存在する必要があります。 各レイヤーの依存関係図は、アーキテクチャの依存関係図と同期しておく必要があります。 これを実現するツールを開発することはできますが、これらの要素の変更時に同期を維持するのは困難です。

#### <a name="use-a-separate-package-for-each-layer"></a>レイヤーごとに個別のパッケージを使用する

1. 各レイヤーのソリューションで、アーキテクチャ モデリング プロジェクトを追加します。 **ソリューションエクスプローラー**で、ソリューションノードを右クリックして **[追加]** をポイントし、 **[既存のプロジェクト]** をクリックします。 これで 1 つのモデリング プロジェクトに、すべてのソリューション (アーキテクチャ プロジェクトと各レイヤーの開発プロジェクト) からアクセスできるようになりました。

2. 共有モデルで、レイヤーごとにパッケージを作成します。**ソリューションエクスプローラー**で、モデリングプロジェクトを選択します。 **UML モデルエクスプローラー**で、モデルルートノードを右クリックし、 **[追加]** をポイントして、 **[パッケージ]** をクリックします。

   各パッケージには、対応するレイヤーの要件と設計を記述した図が含まれています。

3. 必要に応じて、各レイヤーの内部構造にローカルの依存関係図を追加します。

   この方法を使用すると、各レイヤーの設計要素から、レイヤーの設定要素と、そのレイヤーが依存している共通アーキテクチャを直接参照することができます。

   複数のパッケージに対する同時作業では競合が発生することがありますが、パッケージは個別ファイルに保存されるため、競合を非常に簡単に管理できます。

## <a name="create-architecture-templates"></a>アーキテクチャテンプレートを作成する

実際には、すべての Visual Studio ソリューションを同時に作成するのではなく、プロジェクトの進行に合わせて追加します。 また、今後のプロジェクトでも同じソリューション構造を使用することになります。 新しいソリューションを短時間で作成しやすくするため、ソリューションまたはプロジェクトのテンプレートを作成できます。 簡単に他のコンピューターに配布してインストールできるようにするため、Visual Studio Integration Extension (VSIX) でテンプレートをキャプチャすることができます。

たとえば、プレゼンテーション、ビジネス、およびデータの各レイヤーが存在するソリューションを頻繁に使用する場合、その構造を持つ新しいソリューションを作成するテンプレートを構成できます。

### <a name="to-create-a-solution-template"></a>ソリューション テンプレートを作成するには

1. [テンプレートのエクスポートウィザードをダウンロードしてインストール](http://go.microsoft.com/fwlink/?LinkId=196686)します。

2. 将来のプロジェクトの開始点として使用するソリューション構造を作成します。

3. **[ファイル]** メニューの **[VSIX としてテンプレートをエクスポート]** をクリックします。

   [ **VSIX としてテンプレートをエクスポート] ウィザード**が開きます。

4. ウィザードの指示に従って、テンプレートに含めるプロジェクトを追加し、テンプレートの名前と説明を入力して、出力する場所を指定します。

## <a name="watch-a-video"></a>ビデオを見る

[モデルの整理と管理](https://channel9.msdn.com/blogs/clinted/uml-with-vs-2010-part-9-organizing-and-managing-your-models)

## <a name="see-also"></a>関連項目

- [開発プロセス内でのモデルの使用](../modeling/use-models-in-your-development-process.md)
- [Visual Studio アーキテクチャ ツーリング ガイダンス](../modeling/visual-studio-architecture-tooling-guidance.md)
