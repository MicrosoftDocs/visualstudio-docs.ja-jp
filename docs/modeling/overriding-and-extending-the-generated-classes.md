---
title: 生成済みクラスのオーバーライドおよび拡張
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- Domain-Specific Language, providing overridable classes
author: gewarren
ms.author: gewarren
manager: douge
ms.workload:
- multiple
ms.prod: visual-studio-dev15
ms.openlocfilehash: 3ea0446d53ad3cc74bd8af96e95fabada1098da5
ms.sourcegitcommit: 37fb7075b0a65d2add3b137a5230767aa3266c74
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/02/2019
ms.locfileid: "53929281"
---
# <a name="override-and-extend-the-generated-classes"></a>オーバーライドし、生成されたクラスを拡張

DSL 定義は、ドメイン固有言語に基づくツールの強力なセットを構築するためのプラットフォームです。 多くの拡張機能と適応をオーバーライドし、DSL 定義から生成されるクラスを拡張することによって作成できます。 これらのクラスには DSL 定義図で明示的に定義されているドメイン クラスだけでなくもツールボックス、エクスプ ローラー、シリアル化、およびなどを定義するその他のクラスが含まれます。

## <a name="extensibility-mechanisms"></a>拡張メカニズム

生成されたコードを拡張することができるように、いくつかのメカニズムが提供されます。

### <a name="override-methods-in-a-partial-class"></a>部分クラスのメソッドをオーバーライドします。

部分クラス定義では、複数の場所で定義するクラスを許可します。 これにより、自分で作成したコードから生成されたコードを分離することができます。 手作業で記述されたコードでは、生成されたコードによって継承されるクラスをオーバーライドできます。

たとえば、という名前のドメイン クラスを定義する、DSL 定義で`Book`、オーバーライド メソッドを追加するカスタム コードを記述する可能性があります。

```csharp
public partial class Book
{
   protected override void OnDeleting()
   {
      MessageBox.Show("Deleting book " + this.Title);
      base.OnDeleting();
   }
}
```

> [!NOTE]
> 生成されたクラスでメソッドをオーバーライドするには、常に、生成されたファイルから分離されたファイルにコードを記述します。 通常、CustomCode という名前のフォルダーにファイルが含まれています。 生成されたコードを変更する場合は失われます、DSL 定義からコードを再生成する場合。

どのようなメソッドをオーバーライドすることができますを検出するには、次のように入力します。**オーバーライド**空白が続く、クラスでします。 IntelliSense のツールヒントがわかりますどのようなメソッドをオーバーライドすることができます。

### <a name="double-derived-classes"></a>Double 型の派生クラス

生成されたクラスのメソッドのほとんどは、モデリングの名前空間のクラスの固定セットから継承されます。 ただし、一部のメソッドは、生成されたコードで定義されます。 通常、これは、意味; それらをオーバーライドできません。同じクラスの別の部分定義で定義されているメソッドを 1 つの部分クラスでオーバーライドすることはできません。

ただし、これらのメソッドを設定して上書きできます、 **Double Derived の生成**ドメイン クラスのフラグ。 この原因として 2 つのクラスを生成する、1 つが、他の抽象基本クラス。 すべてのメソッドおよびプロパティの定義は、基底クラスであり、コンス トラクターのみが、派生クラスでは。

Library.dsl、サンプルなどで、`CirculationBook`ドメイン クラスには、`Generates``Double Derived`プロパティに設定`true`します。 そのドメイン クラスに対して生成されたコードには、2 つのクラスが含まれています。

-   `CirculationBookBase`、抽象であるし、すべてのメソッドとプロパティが含まれています。

-   `CirculationBook`、から派生`CirculationBookBase`します。 そのコンス トラクターを除く、空になります。

任意のメソッドをオーバーライドするには、作成する派生クラスの部分定義など`CirculationBook`します。 生成されたメソッドとモデリング framework から継承されたメソッドの両方をオーバーライドすることができます。

このメソッドは、モデル要素、リレーションシップ、図形、図、およびコネクタを含む要素のすべての種類で使用できます。 生成された他のクラスのメソッドをオーバーライドすることもできます。 クラスは、ToolboxHelper は double 型の派生では常になどいくつか生成されます。

### <a name="custom-constructors"></a>カスタム コンス トラクター

コンス トラクターをオーバーライドすることはできません。 Double 型から派生したクラスであっても、コンス トラクターは、派生クラスでなければなりません。

独自のコンス トラクターを提供する場合は、これを行う設定`Has Custom Constructor`の DSL 定義内のドメイン クラス。 クリックすると**すべてのテンプレートの変換**、生成されたコードはそのクラスのコンス トラクターは含まれません。 不足しているコンス トラクターの呼び出しが含まれます。 これにより、ソリューションをビルドするときに、エラー報告をします。 指定する必要がありますを説明する生成されたコードにコメントを表示するエラー レポートをダブルクリックします。

生成されたファイルとは別ファイルで、部分クラス定義を記述し、コンス トラクターを提供します。

### <a name="flagged-extension-points"></a>フラグが設定された拡張ポイント

フラグが設定された拡張機能ポイントは、プロパティまたはカスタム メソッドを指定することを示すチェック ボックスを設定する DSL 定義内の場所です。 カスタム コンス トラクターは、1 つの例です。 その他の例は、設定、 `Kind` Calculated またはカスタム ストレージ設定には、ドメイン プロパティの**カスタム**接続ビルダーのフラグ。

各ケースにフラグを設定し、コードを再生成すると、ビルド エラーが発生します。 指定した内容を説明するコメントを表示するエラーをダブルクリックします。

### <a name="rules"></a>ルール

トランザクション マネージャーのプロパティの変更など、指定されたイベントを発生がトランザクションの終了前に実行するルールを定義することができます。 ルールは通常、ストア内のさまざまな要素間 synchronism を維持するために使用されます。 たとえば、図に、モデルの現在の状態が表示されるかどうかを確認する規則が使用されます。

ルールは、クラスごとに定義されて、オブジェクトごとにルールを登録するコードを持っている必要はありませんように。 詳細については、次を参照してください。[ルール反映されるまで変更内で、モデル](../modeling/rules-propagate-changes-within-the-model.md)します。

### <a name="store-events"></a>ストア イベント

モデリングのストアは、特定の種類のプロパティの値に対する変更、要素の追加と削除など、ストアでの変更をリッスンするを使用して、イベント メカニズムを提供します。 変更を行ったトランザクションの終了後は、イベント ハンドラーが呼び出されます。 通常、これらのイベントは、ストア外のリソースの更新に使用されます。

### <a name="net-events"></a>.NET イベント

図形の一部のイベントをサブスクライブすることができます。 たとえば、図形のマウス クリックのリッスンできます。 各オブジェクトのイベントをサブスクライブするコードを記述する必要があります。 InitializeInstanceResources() のオーバーライドでは、このコードを記述することができます。

ShapeFields、デコレーターを図形の描画に使用するには、一部のイベントが生成されます。 例については、次を参照してください。[方法。シェイプまたはデコレーターに対するクリック](../modeling/how-to-intercept-a-click-on-a-shape-or-decorator.md)します。

これらのイベントは、通常、トランザクション内では発生しません。 ストアに変更する場合は、トランザクションを作成する必要があります。