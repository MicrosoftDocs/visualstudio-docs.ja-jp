---
title: "オーバーライドして、生成されるクラスを拡張 |Microsoft ドキュメント"
ms.custom: 
ms.date: 11/04/2016
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords: Domain-Specific Language, providing overridable classes
author: gewarren
ms.author: gewarren
manager: ghogen
ms.workload: multiple
ms.openlocfilehash: 568fc8c53ea7a7be79d8f8169c964f1ec7e02c0a
ms.sourcegitcommit: f89ed5fc2e5078213e30a6ade4604e34df48181f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/13/2018
---
# <a name="overriding-and-extending-the-generated-classes"></a>生成済みクラスのオーバーライドおよび拡張
DSL 定義は、プラットフォーム強力な一連のドメイン固有言語に基づくツールをビルドすることができます。 多くの拡張機能と製を採用したは、オーバーライドして、DSL 定義から生成されるクラスを拡張して作成できます。 これらのクラスには、DSL 定義ダイアグラムで明示的に定義したドメイン クラスだけでなくもツールボックス、エクスプ ローラー、シリアル化、およびなどを定義するその他のクラスが含まれます。  
  
## <a name="extensibility-mechanisms"></a>機能拡張機構  
 生成されたコードを拡張できるようにするいくつかのメカニズムが提供されます。  
  
### <a name="overriding-methods-in-a-partial-class"></a>部分クラスにメソッドのオーバーライド  
 部分クラス定義には、複数の場所で定義されるクラスができるようにします。 これにより、自分で記述したコードから生成されたコードを分離することができます。 手動で記述されたコードでは、生成されたコードによって継承されたクラスをオーバーライドできます。  
  
 DSL 定義という名前のドメイン クラスを定義する場合など、 `Book`、オーバーライド メソッドを追加するカスタム コードを記述できます。  
  
 `public partial class Book`  
  
 `{`  
  
 `protected override void OnDeleting()`  
  
 `{`  
  
 `MessageBox.Show("Deleting book " + this.Title);`  
  
 `base.OnDeleting();`  
  
 `} }`  
  
> [!NOTE]
>  生成されたクラスのメソッドをオーバーライドするには、生成されたファイルから分離されているファイルにコードを記述常にします。 通常、ファイルは、CustomCode という名前のフォルダーに含まれます。 生成されたコードを変更する場合は失われます DSL 定義からコードを再生成するとします。  
  
 どのようなメソッドをオーバーライドすることができますを検出するには、次のように入力します。**オーバーライド**空白が続く、クラスでは、します。 IntelliSense のツールヒントがわかりますどのようなメソッドをオーバーライドすることができます。  
  
### <a name="double-derived-classes"></a>二重から派生したクラス  
 生成されたクラスのメソッドのほとんどは、固定一連のモデリング名前空間のクラスから継承されます。 ただし、一部のメソッドは、生成されたコードで定義されます。 通常、つまり、オーバーライドすることできません。1 つの部分クラスには、同じクラスの別の部分定義で定義されているメソッドをオーバーライドできません。  
  
 ただし、これらのメソッドを設定して上書きできます、 **double 型の派生を生成**ドメイン クラスのフラグ。 この原因として 2 つのクラスを生成する、1 つが、他の抽象基本クラスです。 すべてのメソッドとプロパティの定義は、基本クラスにおよび、派生クラスでは、コンス トラクターのみです。  
  
 たとえば、Library.dsl、このサンプルで、`CirculationBook`ドメイン クラスには、`Generates``Double Derived`プロパティに設定`true`です。 そのドメイン クラスに対して生成されたコードには、2 つのクラスが含まれています。  
  
-   `CirculationBookBase`、抽象であるし、すべてのメソッドとプロパティが含まれています。  
  
-   `CirculationBook`、から派生した`CirculationBookBase`です。 そのコンス トラクターを除くは空です。  
  
 任意のメソッドをオーバーライドするを作成する派生クラスの部分定義など`CirculationBook`です。 生成されたメソッドとモデリング フレームワークから継承されたメソッドの両方をオーバーライドすることができます。  
  
 このメソッドは、モデル要素をリレーションシップ、図形、図、およびコネクタも含め、要素のすべての種類で使用できます。 生成された他のクラスのメソッドをオーバーライドすることもできます。 クラスは、ToolboxHelper は、常に double 派生など、いくつか生成されます。  
  
### <a name="custom-constructors"></a>カスタム コンス トラクター  
 コンス トラクターをオーバーライドすることはできません。 倍から派生したクラスであっても、派生クラスでコンス トラクターがあります。  
  
 独自のコンス トラクターを提供する場合は、これを行う設定して`Has Custom Constructor`ドメイン内のクラス、DSL 定義します。 クリックすると、**すべてのテンプレートの変換**、生成されたコードでは、そのクラスのコンス トラクターは含まれません。 不足しているコンス トラクターの呼び出しが含まれます。 これにより、ソリューションをビルドする際に、エラー報告が原因です。 生成されたコードを提供する必要がありますを説明するコメントを表示するエラー レポートをダブルクリックします。  
  
 生成されたファイルから別のファイル内の部分クラス定義を作成し、コンス トラクターを提供します。  
  
### <a name="flagged-extension-points"></a>フラグ付きの拡張点  
 フラグ付きの拡張ポイントは、プロパティまたはカスタム メソッドを指定することを示すためのチェック ボックスを設定する DSL 定義内の場所です。 カスタム コンス トラクターは、1 つの例です。 その他の例は、設定、`Kind`計算またはカスタムの記憶域の設定をドメイン プロパティの**はカスタム**接続ビルダーのフラグ。  
  
 各ケースでフラグを設定し、コードを再生成すると、ビルド エラーが発生します。 指定する必要があるかを説明するコメントを表示するエラーをダブルクリックします。  
  
### <a name="rules"></a>ルール  
 トランザクション マネージャーでは、プロパティの変更など、指定されたイベントを発生しました、トランザクションが終了する前に実行するルールを定義することができます。 ルールは通常、ストア内の別の要素間 synchronism を維持するために使用されます。 たとえば、ルールは、図に、モデルの現在の状態が表示されるかどうかを確認に使用されます。  
  
 ルールは、クラス単位で定義された、各オブジェクトに対してルールを登録できるように、コードがある必要はありません。 詳細については、次を参照してください。[ルール反映されるまで変更内で、モデル](../modeling/rules-propagate-changes-within-the-model.md)です。  
  
### <a name="store-events"></a>イベントを保存します。  
 モデリング ストアでは、特定の種類の要素、プロパティ値に対する変更の追加と削除を含む、ストアの変更をリッスンするを使用してするイベント機構を提供します。 変更を行ったトランザクションの終了後は、イベント ハンドラーが呼び出されます。 通常、これらのイベントは、外部ストアにあるリソースの更新に使用されます。  
  
### <a name="net-events"></a>.NET イベント  
 図形の一部のイベントをサブスクライブすることができます。 たとえば、図形にマウスのクリックを待機できます。 各オブジェクトのイベントにサブスクライブするコードを記述する必要があります。 InitializeInstanceResources() のオーバーライドでは、このコードを記述することができます。  
  
 デコレーターの図形の描画に使用される ShapeFields で一部のイベントが生成されます。 例については、次を参照してください。[する方法: 図形またはデコレーターのクリックをインターセプト](../modeling/how-to-intercept-a-click-on-a-shape-or-decorator.md)です。  
  
 これらのイベントは、通常、トランザクションの内部は行われません。 ストアに変更する場合は、トランザクションを作成する必要があります。