---
title: モデル、クラス、およびリレーションシップについて
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- Domain-Specific Language, models
author: gewarren
ms.author: gewarren
manager: douge
ms.workload:
- multiple
ms.prod: visual-studio-dev15
ms.technology: vs-ide-modeling
ms.openlocfilehash: 408c74dbbf23abee5d548484014e0f2ddc66963e
ms.sourcegitcommit: e13e61ddea6032a8282abe16131d9e136a927984
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/26/2018
---
# <a name="understanding-models-classes-and-relationships"></a>モデル、クラス、およびリレーションシップについて
ドメイン固有言語 (DSL) は、作成した場合、カスタム プログラム コードと共にその DSL 定義ファイルで定義されます。 DSL ソリューション内のプログラム コードのほとんどは、このファイルから生成されます。

 このトピックでは、DSL 定義のサーバーの全体の機能について説明します。

## <a name="the-dsl-definition"></a>DSL 定義
 開くと`Dsl\DslDefinition.dsl`、[!INCLUDE[vsprvs](../code-quality/includes/vsprvs_md.md)]ウィンドウ次の図のようになります。

 ![dsl designer](../modeling/media/dsl_designer.png "dsl_designer")

 DSL 定義で最も重要な情報は、DSL 定義ダイアグラムに表示されます。 詳細についても DslDefinition.dsl の一部であるは、ダイアグラムの横にある通常表示 DSL のエクスプ ローラーに表示されます。 最も一般的なタスクについては、図とのより高度なカスタマイズの DSL のエクスプ ローラーを操作するとします。

 DSL 定義ダイアグラムは、モデル要素、およびモデルの要素間のリンクを定義するリレーションシップを定義するドメイン クラスを示しています。 図形と、ユーザーにモデル要素を表示するために使用するコネクタも示しています。

 ![スイムレーンを含む dsl デザイナー](../modeling/media/dsl_desinger.png "dsl_desinger")

 図または DSL のエクスプ ローラーで、DSL 定義内の項目を選択するプロパティ ウィンドウでそれに関する情報が表示されます。 詳細については、[DSL 詳細] ウィンドウに表示されます可能性があります。

### <a name="models-are-instances-of-dsls"></a>モデルは、Dsl のインスタンス
 A*モデル*ユーザーによって作成された、DSL のインスタンスです。 モデルには、定義すると、ドメイン クラスと、要素は、定義したドメインの関係のインスタンス間のリンクのインスタンスが、モデル要素が含まれています。 モデルは、図形とコネクタ、図のモデル要素とのリンクを表示することもできます。 DSL 定義には、図形のクラス、コネクタ クラス、およびダイアグラムのクラスが含まれています。

 DSL 定義とも呼ばれます、*ドメイン モデル*です。 DSL 定義またはドメイン モデルは、モデルは、実行時のインスタンス化、ドメイン固有言語、ドメイン固有言語のデザイン時の表示です。

## <a name="domain-classes-define-model-elements"></a>ドメイン クラスは、モデル要素を定義します。
 ドメイン クラスは、ドメイン内のさまざまな要素の作成に使用して、ドメインの関係は、要素間のリンク。 これらは、要素とそのモデルを作成するときに、デザイン固有の言語のユーザーによってインスタンス化にするリンクのデザイン時の表現です。

 この図は、音楽ライブラリ DSL のユーザーによって作成されたモデルを示しています。 音楽のアルバムの曲の一覧を含むボックスとして表されます。 アーティストはボックスの角の丸いによって表されに関与するアルバムに接続しています。

 ![生成された DSL のインスタンス モデル](../modeling/media/music_instance.png "Music_Instance")

 DSL 定義は、2 つの側面を分離します。 モデル図のモデル要素の外観を定義するには、クラスの図形とコネクタ クラスを使用します。 モデルに含まれる情報は、ドメイン クラスおよびドメインの関係を使用して定義されます。

 次の図は、音楽ライブラリの DSL 定義でドメイン クラスとリレーションシップを示しています。

 ![リレーションシップの埋め込みと参照リレーションシップ](../modeling/media/music_classes.png "Music_Classes")

 図に示す 4 つのドメイン クラス: 音楽、アルバム、アーティスト、曲。 ドメイン クラスは、名前、タイトルなどのドメインのプロパティを定義します。 モデルでは、インスタンス、これらのプロパティの一部の値は、ダイアグラムに表示されます。

 ドメインの関係は、クラス間: MusicHasAlbums、MusicHasArtists、AlbumbHasSongs、および ArtistAppearedOnAlbums です。 リレーションシップがある 1..1 などの多重度 0.. * です。 たとえば、すべての曲は、AlbumHasSongs リレーションシップにより 1 つだけのアルバムに関連する必要があります。 すべてのアルバムには、曲の任意の数を持つことができます。

### <a name="rearranging-the-dsl-definition-diagram"></a>DSL 定義ダイアグラムを再配置
 アルバムは、この図では、ドメイン クラスが、複数回を DSL 定義ダイアグラムに表示できることに注意してください。 1 つのメイン ビューでは常とがあるいくつか*参照*ビュー。

 DSL 定義ダイアグラムを並べ替えるには、次のことができます。

-   メイン スワップし、ビューを使用して、参照、**ツリーをここに表示**と**分割ツリー**コマンド。 これらのコマンドを表示する 1 つのドメイン クラスを右クリックします。

-   再を ctrl キーと上と Ctrl + Down を押してドメイン クラスと図形クラスで注文します。

-   折りたたむか、各図形の右上にあるアイコンを使用して、クラスを拡張します。

-   ドメイン クラスの下部にあるマイナス記号 (-) をクリックして、ツリーの部分を折りたたみます。

## <a name="inheritance"></a>継承
 ドメイン クラスは、継承を使用して定義することができます。 継承派生を作成するに継承ツール をクリックして、派生クラスをクリックし、基本クラスをクリックします。 モデル要素には、基本クラスから継承されたすべてのプロパティと一緒に、独自のドメイン クラスで定義されているすべてのプロパティがあります。 また、そのロールのリレーションシップにも継承します。

 継承は、リレーションシップ、図形、およびコネクタの間も使用できます。 継承は、同じグループ内に保つ必要があります。 図形は、ドメイン クラスから継承できません。

## <a name="domain-relationships"></a>ドメインの関係
 モデル要素は、リレーションシップによってリンクできます。 リンクは、常にバイナリです。それらは、正確に 2 つの要素をリンクします。 ただし、いずれかの要素は、他のオブジェクトへのリンクを持つことができます、同じ要素のペアの間の 1 つ以上のリンクにもあります。

 要素のさまざまなクラスを定義できますが、同様のリンクのさまざまなクラスを定義できます。 リンクのクラスが呼び出されます、*ドメイン リレーションシップ*です。 ドメイン リレーションシップでは、そのインスタンスに接続できる要素のクラスを指定します。 リレーションシップの両端が呼び出されます、*ロール*、およびドメインの関係は、リレーションシップ自体だけでなく 2 つのロールの名前を定義します。

 ドメイン リレーションシップの 2 種類があります: リレーションシップと参照リレーションシップを埋め込むことです。 DSL 定義ダイアグラムで、埋め込みリレーションシップがある各ロールの純色の線と参照リレーションシップの破線がします。

### <a name="embedding-relationships"></a>埋め込みリレーションシップ
 モデルでは、そのルートを除くすべての要素は、1 つの埋め込みリンクの対象です。 そのため、モデル全体では、埋め込みリンクの 1 つのツリーを形成します。 埋め込みリレーションシップでは、包含または所有権を表します。 この方法で関連する 2 つのモデル要素は、親と子とも呼ばれます。 子は、親に埋め込まれると呼ばれます。

 埋め込みリンクは通常表示されません明示的にダイアグラムのコネクタとして。 代わりに、包含の表現は通常です。 モデルのルートは図では、によって表され、それに埋め込まれた要素は、ダイアグラムの図形として表示されます。

 例では、ルート クラス音楽は、埋め込みの関係を持つ曲に埋め込みの AlbumHasSongs アルバムに MusicHasAlbums を持っています。 曲は、各アルバム内の一覧で項目として表示されます。 音楽もあり、そのインスタンスは、ダイアグラムの図形として表示、アーティスト クラスに埋め込みの MusicHasArtists されています。

 既定では、埋め込まれた要素はその親が削除されたときに自動的に削除されます。

 モデルが保存される際に XML 形式のファイル、埋め込まれた要素の入れ子でその親シリアル化をカスタマイズする場合を除きます。

> [!NOTE]
>  埋め込みは継承とは異なります。 埋め込みリレーションシップ内の子は、親のプロパティを継承しません。 埋め込まれたアイテムは、モデル要素間のリンクの種類です。 継承では、クラス間のリレーションシップし、モデルの要素間のリンクは作成されません。

### <a name="embedding-rules"></a>ルールの埋め込み
 インスタンス モデルのすべての要素は、モデルのルートを除く、1 つだけ埋め込みリンクのターゲットにする必要があります。

 したがって、ルート クラスを除く、すべての非抽象ドメイン クラスは、少なくとも 1 つの埋め込みリレーションシップのターゲットである必要があります。 または基底クラスからの埋め込みを継承する必要があります。 クラスは 2 つ以上の埋め込みのターゲットにすることができますが、そのインスタンスのモデル要素が、一度に 1 つの親を持てるです。 ターゲットからソースへの多重度 0..1 または 1..1 必要があります。

### <a name="the-explorer-displays-the-embedding-tree"></a>エクスプ ローラーには、埋め込みのツリーが表示されます。
 DSL 定義には、ユーザーがそのモデル図と共に「エクスプ ローラーも作成されます。

 ![DSL のエクスプ ローラーが生成された](../modeling/media/music_explorer.png "Music_Explorer")

 エクスプ ローラーは、モデルでは、すべての図形を定義していないものも、すべての要素を示します。 要素と埋め込みの関係を示していますが、リレーションシップを参照していません。

 要素のドメインのプロパティの値を表示するには、ユーザーがモデル エクスプ ローラーで、またはモデルのダイアグラムで、要素を選択し、プロパティ ウィンドウを開きます。 します。 ダイアグラムに表示されていないものも含めのすべてのドメイン プロパティが表示されます。 例では、各曲があり、両方のタイトル、ジャンルがダイアグラム上のタイトルの値のみが表示されます。

## <a name="reference-relationships"></a>参照リレーションシップ
 参照リレーションシップでは、任意の種類の埋め込みがないリレーションシップを表します。

 参照リレーションシップは、図形間のコネクタとして通常ダイアグラムに表示されます。

 使用して 2 つの要素間の参照リンクを表す、モデルの XML 表現で*モニカーです。* つまり、モニカーは、モデル内の各要素を一意に識別する名前です。 各モデル要素の XML ノードには、リレーションシップの名前とその他の要素のモニカーを指定するノードが含まれています。

## <a name="roles"></a>役割
 各ドメイン リレーションシップには、2 つのロール、ソース ロールとターゲット ロールがあります。

 次の図の間の線で、**パブリッシャー**ドメイン クラスおよび**PublisherCatalog**ドメイン リレーションシップ ソース ロールは、します。 ドメイン リレーションシップの間の線、および**アルバム**ドメイン クラスは、ターゲット ロールです。

 ![ロールおよびプロパティです。] (../modeling/media/propertycode.png "PropertyCode")

 リレーションシップに関連付けられている名前は、モデルを走査するプログラム コードを記述するときに特に重要です。 たとえば、DSL ソリューションをビルドするときに、生成されたクラスでは、パブリッシャーには、アルバムのコレクションであるカタログ プロパティがあります。 クラスのアルバムには、パブリッシャー クラスの 1 つのインスタンスは、パブリッシャーのプロパティがあります。

 DSL 定義でリレーションシップを作成するときに、プロパティとリレーションシップの名前には既定値が指定されます。 ただし、それらを変更することができます。

## <a name="multiplicities"></a>多重度
 多重度は、ドメイン リレーションシップで要素の数が、同じロールを持つことができますを指定します。 例では、0 対多 (0..\*) の多重度の設定、**カタログ**ロールを指定するの任意のインスタンス、**パブリッシャー**ドメイン クラスに指定できるは多く**PublisherCatalog**リレーションシップ リンクを指定します。

 ダイアグラムで入力するか、変更することによって、ロールの多重度を構成、`Multiplicity`プロパティに、**プロパティ**ウィンドウです。 次の表では、このプロパティの設定について説明します。

|多重度の種類|説明|
|-----------------------|-----------------|
|0.. * (0 対多)|ドメイン クラスの各インスタンスは、リレーションシップの複数のインスタンスまたはリレーションシップのインスタンスがないことができます。|
|0..1 (0..1)|ドメイン クラスの各インスタンスは、リレーションシップの 2 つ以上のインスタンスまたはリレーションシップのインスタンスがないことができます。|
|1..1 (1 つ)|ドメイン クラスの各インスタンスは、リレーションシップの 1 つのインスタンスを持つことができます。 Role クラスの任意のインスタンスからこのリレーションシップの 1 つ以上のインスタンスを作成することはできません。 検証が有効になっている場合、role クラスの任意のインスタンスには、リレーションシップのインスタンスがあるないときに、検証エラーが表示されます。|
|1.. * (1 対多)|この多重度がロールのクラスの各インスタンスは、リレーションシップの複数のインスタンスを持つことができ、各インスタンスは、リレーションシップの少なくとも 1 つのインスタンスが必要です。 検証が有効になっている場合、role クラスの任意のインスタンスには、リレーションシップのインスタンスがあるないときに、検証エラーが表示されます。|

## <a name="domain-relationships-as-classes"></a>クラスとドメインの関係
 リンクは、ModelElement の派生クラスである LinkElement のインスタンスとして、ストアで表されます。 ドメイン リレーションシップのドメイン モデルの図では、これらのプロパティを定義できます。

 ソースまたはその他の関係のターゲット リレーションシップを作成することもできます。 ドメイン モデル ダイアグラムで、ドメインの関係を右クリックし、をクリックして**クラスとして表示**です。 その他のクラス ボックスが表示されます。 リレーションシップに接続できます。

 ドメイン クラスと同様、継承、その一部によってリレーションシップを定義することができます。 派生リレーションシップを選択し、設定**基本リレーションシップ**プロパティ ウィンドウでします。

 派生リレーションシップには、その基本リレーションシップ専門としています。 ドメインは、リンクはから派生する必要がありますが、または基本リレーションシップによってリンクされたクラスと同じクラスです。 派生リレーションシップのリンク作成すると、モデルでは、派生クラスと基本リレーションシップの両方のインスタンスです。 プログラム コードでは、ベースか、派生クラスによって生成されるプロパティを使用して、リンクの反対側の端に移動することができます。

## <a name="see-also"></a>関連項目

- [ドメイン固有言語ツールの用語集](http://msdn.microsoft.com/ca5e84cb-a315-465c-be24-76aa3df276aa)
