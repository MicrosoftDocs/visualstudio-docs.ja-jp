---
title: UML モデルとダイアグラムの編集 |Microsoft Docs
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-modeling
ms.topic: conceptual
f1_keywords:
- vs.teamarch.modelingproject
- vs.teamarch.UMLModelExplorer
- vs.teamarch.UMLModelExplorer.rootnode
helpviewer_keywords:
- diagrams - modeling
- UML, copy and paste
- UML, models
- UML model
- UML, element properties
- UML
- UML, diagrams
ms.assetid: 87affd40-8127-4ee9-9d3a-ad977abe2ed6
caps.latest.revision: 86
author: jillre
ms.author: jillfra
manager: jillfra
ms.openlocfilehash: 6585fbfa7c16e710633e81841b4c8eb380f9f564
ms.sourcegitcommit: a8e8f4bd5d508da34bbe9f2d4d9fa94da0539de0
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/19/2019
ms.locfileid: "72669725"
---
# <a name="edit-uml-models-and-diagrams"></a>UML モデルおよびダイアグラムの編集
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

UML モデルは、いくつかの異なる種類の図によって提供されるビューを使用して作成および編集できます。 図を使用することにより、システムを異なる角度から検討できるため、システムの設計と要件のさまざまな側面について理解し、話し合うのに役立ちます。 Visual Studio には、最も一般的に使用される 5 種類の UML 図のテンプレートが用意されています。

 この機能をサポートする Visual Studio のバージョンを確認するには、「 [Version support for architecture and modeling tools](../modeling/what-s-new-for-design-in-visual-studio.md#VersionSupport)」を参照してください。

 このトピックでは、各種の図に共通のモデルを編集する方法について説明します。 特定の種類の図に固有の詳細については、「[アプリのモデルを作成](../modeling/create-models-for-your-app.md)する」を参照してください。

## <a name="in-this-topic"></a>このトピックの内容

- [Uml 図は UML モデルのビューです](#Views)

- [UML モデリング図の作成](#Creating)

- [UML モデリング図の描画](#Drawing)

- [図形とコネクタの編集](#Editing)

- [モデルに対する変更を元に戻す](#Undo)

- [ダイアグラム間での要素の共有](#Sharing)

- [要素と関連要素のグループのコピー](#Copying)

- [モデル要素またはそのビューの削除](#Deleting)

- [ダイアグラム内のテキストの検索](#Searching)

- [図をプレゼンテーション用に準備する](#presentation)

- [UML デザイナーの拡張](#extensions)

## <a name="Views"></a>Uml 図は UML モデルのビューです
 UML 図は、モデリング プロジェクトでのみ作成および使用できます。 ダイアグラムとプロジェクトを作成する方法の詳細については、「 [UML モデリングプロジェクトおよびダイアグラムを作成](../modeling/create-uml-modeling-projects-and-diagrams.md)する」を参照してください。

- モデリング プロジェクトには UML モデルが 1 つ存在します。 プロジェクト内の UML 図はすべて UML モデルのビューです。

- モデルは**UML モデルエクスプローラー**で確認できます。 **[アーキテクチャ]** メニューの **[ウィンドウ]** をポイントし、 **[UML モデルエクスプローラー]** をクリックします。

- 図の中のシェイプはすべてモデル内の要素のビューです。 図に新しいシェイプを配置するということは、そのモデルに新しい要素を作成するということです。

- ダイアグラムを保存すると、Visual Studio によってモデル全体、そのすべてのダイアグラム、およびモデリングプロジェクトファイルが保存されます。

## <a name="Creating"></a>UML モデリング図の作成

1. Visual Studio の **[アーキテクチャ]** メニューで、 **[新しい UML またはレイヤー図]** をクリックします。

2. 図を選択し、名前を付けます。

3. **[モデリングプロジェクトへの追加]** で、既存のモデリングプロジェクトを選択するか、 **[新しいモデリングプロジェクトの作成]** を選択します。

   > [!NOTE]
   > モデリング図はモデリング プロジェクト内に存在している必要があります。

   ソリューション エクスプローラーで既存のモデリング プロジェクトに図を追加することもできます。 モデリングプロジェクトを右クリックし、 **[追加]** をポイントして、 **[新しい項目]** をクリックします。

#### <a name="to-create-an-empty-uml-modeling-project"></a>空の UML モデリング プロジェクトを作成するには

- **[ファイル]** メニューの **[新規作成]** をポイントし、 **[プロジェクト]** をクリックします。 **[新しいプロジェクト]** ダイアログボックスで、 **[モデリングプロジェクト]** をダブルクリックします。

  モデリングプロジェクトの管理方法の詳細については、「 [UML モデリングプロジェクトおよびダイアグラムを作成](../modeling/create-uml-modeling-projects-and-diagrams.md)する」を参照してください。

## <a name="Drawing"></a>UML モデリング図の描画
 モデリング図には、関係によってリンクされたモデル要素のコレクションが表示されます。 それぞれの要素はシェイプとして表示され、それぞれの関係は 2 つのシェイプをつなぐコネクタとして表示されます。

 要素用と関係用の 2 種類のツールが存在します。 たとえば、UML クラスダイアグラムツールボックスでは、 **class**は要素ツールであり、 **Association**はリレーションシップツールです。

> [!NOTE]
> 特定の種類の図に固有の情報が必要な場合は、「[アプリのモデルを作成](../modeling/create-models-for-your-app.md)する」を参照してください。

#### <a name="to-create-elements-and-relationships-in-a-uml-modeling-diagram"></a>UML モデリング図の要素および関係を作成するには

1. モデル要素を作成するには、ツールボックスで要素ツールをクリックし、その表示場所となる図をクリックします。 要素を作成したら、そのハンドルをドラッグしてサイズと形状を調整します。

    場合によっては、新しい要素を別の要素内に配置することができます。 たとえば、UML クラス図では、パッケージ内にクラスを配置できます。

   > [!NOTE]
   > ツールボックスが表示されない場合は、 **[表示]** メニューの **[ツールボックス]** をクリックします。

2. 関係を作成するには、関係ツールをクリックし、関係の起点となる要素をクリックしてから、終点となる要素をクリックします。

    起点および終点として選択できる要素の種類は関係の種類によって異なります。 たとえば、UML クラス図では、Comment 要素を起点または終点とする Association の関係は作成できません。

   > [!NOTE]
   > 同じツールを複数回使用するには、ツールをダブルクリックします。 操作が完了したら、 **[ポインター]** ツールをクリックします。

   一部の種類の図では、単純なシェイプを描画することもできます。 これらのシェイプはモデルの一部ではありませんが、図のパーツを強調したり、図を複数の領域に分割したりするために使用できます。

## <a name="Editing"></a>図形とコネクタの編集
 シェイプのサイズ変更または色付けを行ったり、コネクタのルートを変更したりしても、基になるモデルは影響を受けません。 ただし、図または UML モデル エクスプローラーでシェイプの名前を変更すると、対応する要素の名前が UML モデル エクスプローラー内およびその要素を表示するその他の図の中でも変更されます。

> [!NOTE]
> ツールボックス アイテムを使用すると、要素のグループを作成したり、独自に選んだプロパティを持つ要素を作成したりできます。新しいツールボックス アイテムは簡単に作成できます。 詳細については、「[カスタムモデリングツールボックスアイテムの定義](../modeling/define-a-custom-modeling-toolbox-item.md)」を参照してください。

 次の図は、シェイプのサイズまたは名前を変更する方法を示しています。

 ![モデル要素の調整](../modeling/media/uml-drawadjust1.png "UML_DrawAdjust1")

> [!TIP]
> 組み込みコマンドには、図形をきれいに整列させるためのコマンドは含まれていません。 ただし、「[図に UML モデルを表示](../modeling/display-a-uml-model-on-diagrams.md)する」の例のコードをコピーすると、独自の配置コマンドを簡単に作成できます。

 次の図は、コネクタまたはそのラベルのルートと位置を調整する方法を示しています。

 ![コネクタの調整](../modeling/media/uml-drawadjust2.png "UML_DrawAdjust2")

#### <a name="to-move-one-end-of-a-connector-to-another-shape"></a>コネクタの片端を別のシェイプに移動するには

1. 次のいずれかの操作を行います。

   - Ctrl キーを押し**ながら**終了位置を移動します。

     \- または

   - コネクタを右クリックし、 **[再接続]** をクリックします。

2. 移動するコネクタの端をクリックします。

3. コネクタの移動先のシェイプをクリックします。

#### <a name="to-change-color-or-other-properties-of-an-element-relationship-or-diagram"></a>要素、関係、または図の色およびその他のプロパティを変更するには

- 要素をクリックし、 **[プロパティ]** ウィンドウでフィールドを設定します。

     **プロパティ** ウィンドウが表示されない場合は、要素を右クリックし、プロパティ をクリックし**ます。**

#### <a name="to-zoom-in-and-out-on-a-modeling-diagram"></a>モデリング図を拡大または縮小するには

- **Ctrl**キーを押しながらマウスホイールを回転させます。

     \- または

- Ctrl キーを押しながら**shift**キーを押しながら、マウスの左ボタンまたは右ボタンをクリックします。

     \- または

- **アーキテクチャデザイナー**のツールバーで、プラス記号 ( **+** ) または負符号 ( **-** ) をクリックするか、ズームレベルを選択します。

## <a name="Searching"></a>ダイアグラム内の検索
 図のアイテムを検索するには、クイック検索機能を使用します。 **検索対象:** **現在のドキュメント**に設定する必要があります。

#### <a name="to-search-for-text-in-a-modeling-diagram"></a>モデリング図内のテキストを検索するには

1. **Ctrl + F**キーを押します。

     \- または

     **[編集]** メニューの **[検索と置換]** をポイントし、 **[クイック検索]** をクリックします。

    > [!NOTE]
    > **[検索と置換]** ダイアログボックスでは、 **[検索対象]** フィールドを **[現在のドキュメント]** に設定したままにする必要があります。 その他のオプションはサポートされていません。

2. 検索するテキストを入力し、 **[次を検索]** をクリックします。

    > [!NOTE]
    > 検索したテキストが折りたたまれたシェイプ内にある場合、シェイプが強調表示されます。 図形を展開し、 **[次を検索]** をもう一度クリックします。

## <a name="Undo"></a>モデルに対する変更を元に戻す
 **[編集]** メニューの **[元に戻す]** および **[やり直し]** コマンドを使用して、モデルおよび図に対して行った変更を元に戻したり、やり直したりすることができます。

 **各モデリングプロジェクトには、変更のスタックが1つあります。** モデルおよび図に対して行った変更はすべてこのスタックに記録されます。 スタックには図から図へのフォーカスの切り替えも含まれます。 [元に戻す] コマンドは、このスタックに記録された変更を逆にたどることによって実行されます。

 たとえば、Diagram1 に変更を加え、フォーカスを Diagram 2 に切り替えてから、Diagram2 に変更を加えたとします。 ここで、[元に戻す] コマンドを 3 回実行すると、1 回目には最後の変更が取り消され、2 回目にはフォーカスが Diagram1 に戻され、3 回目には Diagram1 に対する変更が取り消されます。

 **ダイアグラムを閉じると、変更のスタックが切り捨てられます。** 図を閉じると、その図に対して実行した変更は元に戻せなくなります。また、それ以前にモデルまたはその図に対して加えた変更も元に戻せなくなります。

 **プロパティの編集中に元に戻すことはできません。** プロパティ ウィンドウでプロパティを編集しているとき、または図のラベルのプロパティを編集しているときは、そのプロパティに対する変更しか元に戻すことができません。 Enter キーを押してプロパティの変更を確定するか、Esc キーを押して変更を取り消してください。 これで、モデルおよび図に対する変更を元に戻すことができるようになります。

 **図を保存せずに閉じると、期待どおりの効果が得られない場合があります。** 図に変更を加えた後にその図を保存せずに閉じても、変更内容はモデルで保持されます。 図を保存せずに閉じる必要がある場合は、モデル全体を閉じることをお勧めします。

## <a name="Sharing"></a>ダイアグラム間での要素の共有
 モデル要素の特定のインスタンスが複数の図に表示されるようにすることができます。 クラス、インターフェイス、コンポーネント、ユース ケース、およびアクターがこれに該当します。

 この機能は、図ごとに異なる関係のグループを表示する必要がある場合に便利です。 たとえば、ある図の中で Customer クラスと Address クラスとの間の関連を表示し、 別の図では、同じ Address クラスを Postal Area クラスに関連付けて表示できます。

 名前などのモデル要素のプロパティは、任意の図でそのビューのいずれかを選択するか、UML モデル エクスプローラーでそれを選択することによって変更できます。

 それぞれの図の種類で表示できるモデル要素の種類は限られています。 たとえば、コンポーネント図にユース ケースを表示することはできません。 したがって、モデル要素と図の組み合わせによっては、以下の手順を使用できない場合があります。

#### <a name="to-add-a-new-view-of-a-model-element-by-using-uml-model-explorer"></a>UML モデル エクスプローラーを使用してモデル要素の新しいビューを追加するには

1. **Uml モデルエクスプローラー**を開くには、 **[アーキテクチャ]** メニューの **[ウィンドウ]** をポイントし、 **[uml モデルエクスプローラー]** をクリックします。

2. **UML モデルエクスプローラー**から、同じプロジェクト内の互換性のある図にモデル要素をドラッグします。

     モデル要素のビューを表すシェイプが表示されます。これは、他の図または同じ図のビューに追加される形で表示される場合があります。

    > [!NOTE]
    > クラスまたはコンポーネントをシーケンス図にドラッグした場合、結果は異なります。 その場合は、そのクラスまたはコンポーネントと同じ型の新しい生存線が作成されます。 詳細については、「 [UML シーケンス図: ガイドライン](../modeling/uml-sequence-diagrams-guidelines.md)」を参照してください。

#### <a name="to-add-a-new-view-of-a-model-element-by-using-paste-reference"></a>[参照の貼り付け] を使用してモデル要素の新しいビューを追加するには

1. 既存の要素を右クリックし、 **[コピー]** をクリックします。

    - 複数の要素を同時にコピーすることができます。 CTRL キーを押しながら各要素をクリックし、いずれかを右クリックして、 **[コピー]** をクリックします。

2. 互換性のある図の空の部分を右クリックし、 **[参照の貼り付け]** をクリックします。

     同じ要素のもう 1 つのビューが表示されます。

    > [!NOTE]
    > これは、 **[貼り付け]** コマンドとは異なり、モデルに新しい要素が作成されます。 詳細については、「[要素と関連要素のグループのコピー](#Copying)」を参照してください。

> [!NOTE]
> 既に特定の関係で接続されている 2 つのモデル要素から成る図のビューに対して追加した場合、その関係のビューも図に表示されます。 このビューを削除するには、要素の 1 つを図から削除するか、要素間の関係をモデルから削除します。

## <a name="Copying"></a>要素と関連要素のグループのコピー
 モデル要素はコピーして貼り付けることができます。また、要素のグループをその要素間の関係も含めてコピーして貼り付けることもできます。

> [!NOTE]
> **貼り付け**と**貼り付けの参照**コマンドにはさまざまな効果があります。 **貼り付け**によって、コピーした要素のプロパティと同じプロパティを持つ新しい要素が作成されます。 **貼り付け参照**は、同じ要素の新しいビューを作成します。

#### <a name="to-copy-elements-and-their-relationships"></a>要素とその関係をコピーするには

1. コピーする要素がある図で、1 つ以上の要素を選択します。

    > [!NOTE]
    > 要素のグループから関係だけを切り離してコピーすることはできません。

2. **[編集]** メニューの **[コピー]** をクリックします。

3. 要素を別の図にコピーする場合は、新しい図を作成するか、既存の図を開きます。

4. **[編集]** メニューの **[貼り付け]** をクリックします。

    - 要素のコピーが、要素間に存在するすべての関係のコピーと共に表示されます。

    - それぞれの新しい要素には、自動的に生成された新しい名前が付けられます。

5. 新しい要素と関係の位置や名前などのプロパティを調整します。

> [!NOTE]
> 2 つのモデルが同じソリューションに存在する場合などに、モデル間でモデル要素をコピーすることはできません。 しかし、1 つの図と別の図との間で要素をコピーすることはできます。

#### <a name="to-copy-an-entire-diagram"></a>図全体をコピーするには

1. 新しい図を作成します。

2. 既存の図のすべての要素を選択し、それらをコピーして、新しい図に貼り付けます。

   図の複製は、ソリューション エクスプローラーでコピーと貼り付けをして行うことはできません。

## <a name="Deleting"></a>モデル要素またはそのビューの削除
 分類子などの特定の種類の要素は、モデルからは削除せず、図からのみ削除することができます。 分類子は、クラス図、コンポーネント図、およびユース ケース図に表示される主要な要素です。 複数の図に表示される場合もあります。 これらの種類の要素には、 **[ダイアグラムから削除]** と **[モデルから削除]** の2つの異なるコマンドがあります。

 一方、図から関係を削除すると、その関係は自動的にモデルからも削除されます。

> [!NOTE]
> UML 図の特定の種類の要素にはラベルがあります。 要素の周囲に四角形を描画して選択すると、ラベルを選択することはできますが、そのラベルを所有する要素は選択できません。 この方法で選択された要素のサブセットの削除はサポートされていません。 これらの要素のサブセットを選択するには、 **ctrl**キーを押しながら各要素をクリックします。

#### <a name="to-remove-a-classifiers-view-from-a-diagram"></a>分類子のビューを図から削除するには

- 図の要素を右クリックし、 **[ダイアグラムから削除]** をクリックします。

  \- または

- 図の要素をクリックし、 **del**キーを押します。

  - この要素のビューが削除されます。 ただし、要素はモデル内に残りますが、 **UML モデルエクスプローラー**では引き続き見つけることができます。 同じ要素の他のビューもすべて残っています。

  - このシェイプに接続されているコネクタはすべて図から削除されますが、それが表している関係はモデル内に残ります。 **UML モデルエクスプローラー**で**は、接続**する各要素の下にリレーションシップが表示されます。

#### <a name="to-delete-an-element-from-the-model"></a>モデルから要素を削除するには

- **UML モデルエクスプローラー**または図で要素を右クリックし、 **[モデルから削除]** をクリックします。

  - 要素は、表示されていたすべての図から削除されます。

  - この要素に接続されている関係もすべてモデルから削除されます。

#### <a name="to-delete-a-relationship-from-the-model"></a>モデルから関係を削除するには

- 図または**UML モデルエクスプローラー**でリレーションシップを右クリックし、 **[モデルから削除]** をクリックします。

    > [!CAUTION]
    > 関係をモデルからは削除せずに図からのみ削除することはできません。

     関係がモデルから削除され、それが表示されていたすべての図からも削除されます。

## <a name="presentation"></a>図をプレゼンテーション用に準備する
 次に示す機能は、図の特定のパーツを強調する場合や、説明を追加する場合、または 1 つの図を複数の関心領域に分割する場合に役立ちます。

- 図の任意のパーツを Word や PowerPoint などのドキュメントにコピーできます。 目的の図形とコネクタを選択し、右クリックして、 **[コピー]** をクリックします。

- 任意のシェイプまたはコネクタの色を変更できます。 1つまたは複数の図形を選択し、 **[色]** プロパティを変更します。 **[プロパティ]** ウィンドウが表示されない場合は、**F4** キーを押します。

- 一部の種類の図では、ツールボックスの **[単純な図形]** セクションから線、四角形、および楕円を描画できます。 これらのシェイプは UML モデルの一部を形成するものではありません。

- 領域にラベルを付けるには、ツールボックスからコメントをドラッグし、その**Transparent**プロパティを**True**に設定します。 単純なシェイプと同様に、コメントは UML モデルの一部を形成するものではないため、UML モデル エクスプローラーには表示されません。

- モデル要素にメモおよび説明を追加するには、コメントを作成し、要素にリンクします。

- 図で列または行の形をきれいに整列させるために、[図形の整列] コマンドをインストールできます。 これは、UML 拡張機能のサンプルとして提供されています。 [uml: Command To Align Shapes](http://code.msdn.microsoft.com/UML-command-to-Align-4139c0d7)

### <a name="to-export-a-diagram-as-an-image"></a>ダイアグラムをイメージとしてエクスポートするには
 詳細については、「[イメージとしてダイアグラムをエクスポート](../modeling/export-diagrams-as-images.md)する」を参照してください。

## <a name="extensions"></a>UML デザイナーの拡張
 UML ツールに新しい機能を追加し、各自のニーズに合わせてダイアグラムの表記を調整できます。 詳細については、「 [UML モデルと図の拡張](../modeling/extend-uml-models-and-diagrams.md)」を参照してください。

 サンプル拡張機能をご利用いただけます。 単にインストールして使用することも、独自の拡張機能の基礎としてソース コードを使用することもできます。 サンプルには以下のものが含まれています。

|||
|-|-|
|[図形の整列](http://code.msdn.microsoft.com/UML-command-to-Align-4139c0d7)|図を整頓するのに役立つメニュー コマンド。|
|[ドキュメントへのリンク](http://code.msdn.microsoft.com/Link-UML-elements-to-0adbf5a8)|任意の UML 要素を、Word の見出し、PowerPoint のスライド、任意の種類のファイル、UML 図、その他の要素にリンクします。 リンクはドラッグして簡単に設定できます。 設定後に要素をダブルクリックすると、リンクされた項目を表示できます。 たとえば、Word で作成した仕様書や詳細なアクティビティ図にユース ケースをリンクしたり、アクションをストーリーボードのスライドにリンクしたりできます。|
|[迅速な入力](http://code.msdn.microsoft.com/UML-Rapid-Entry-using-Text-0813ad8a)|テキスト入力を使用してモデルをすばやく作成します。 会議でアイデアをキャプチャするのに役立ちます。|
|[ステレオタイプ別の色](http://code.msdn.microsoft.com/UML-Color-Classes-by-07de2b70)|クラスをステレオタイプに従って色付けします。 簡単にコードを拡張して独自のステレオタイプで活用できます。|
|[ドメインモデリング](http://code.msdn.microsoft.com/UML-Domain-Modeling-6df6f7f4)|ビジネス モデルとして便利な既定値です。 既定では、関連は矢印を使用せずに表示され、操作はクラスに表示されません。|

## <a name="see-also"></a>参照
 [UML モデリングプロジェクトおよびダイアグラムの作成](../modeling/create-uml-modeling-projects-and-diagrams.md)[アーキテクチャを分析およびモデリング](../modeling/analyze-and-model-your-architecture.md)する[アプリのモデルを作成する](../modeling/create-models-for-your-app.md)
