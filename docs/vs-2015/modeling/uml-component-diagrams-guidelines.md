---
title: 'UML コンポーネント図: ガイドライン |Microsoft Docs'
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-modeling
ms.topic: conceptual
helpviewer_keywords:
- UML diagrams, component
- diagrams - modeling, component
- diagrams - modeling, UML component
- UML, component diagrams
- component diagrams
ms.assetid: 6c1bdd60-369e-477e-83ed-7f6fe75c9f0b
caps.latest.revision: 37
author: jillre
ms.author: jillfra
manager: jillfra
ms.openlocfilehash: 7abc869ebebf4ca2ae8aa1776eaae75f1543176b
ms.sourcegitcommit: a8e8f4bd5d508da34bbe9f2d4d9fa94da0539de0
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/19/2019
ms.locfileid: "72652255"
---
# <a name="uml-component-diagrams-guidelines"></a>UML コンポーネント図: ガイドライン
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Visual Studio では、*コンポーネント図*を描画して、ソフトウェアシステムの構造を示すことができます。 ビデオデモについては、「[コンポーネント図を使用した物理構造の設計](http://channel9.msdn.com/posts/clinted/UML-with-VS-2010-Part-6-Designing-a-Projects-Physical-Structure/)」を参照してください。

 この機能をサポートする Visual Studio のバージョンを確認するには、「 [Version support for architecture and modeling tools](../modeling/what-s-new-for-design-in-visual-studio.md#VersionSupport)」を参照してください。

 UML コンポーネント図を作成するには、 **[アーキテクチャ]** メニューの **[新しい Uml またはレイヤー図]** をクリックします。

 コンポーネントとは、環境内で置き換えることのできるモジュール式のユニットのことです。 その内部構造は非表示になっていますが、その関数にアクセスするための1つ以上の明確に定義*されたインターフェイス*があります。 コンポーネントには、*必要なインターフェイス*を含めることもできます。 要求インターフェイスは、他のコンポーネントに対して要求する機能またはサービスを定義します。 複数のコンポーネントの提供インターフェイスと要求インターフェイスを接続することで、より大規模なコンポーネントを構築できます。 完全なソフトウェア システムを 1 つのコンポーネントとして見なすことができます。

 コンポーネント図を描画することには、次のような利点があります。

- 設計を主要なブロックの観点から考察することは、開発チームが既存の設計を理解したり、新しい設計を生成したりするのに役立ちます。

- 正しく定義された提供インターフェイスおよび要求インターフェイスを持つコンポーネントのコレクションとしてシステムを見なすことで、それぞれのコンポーネントをより明確に分離して取り扱うことができます。 その結果、理解しやすい設計を実現でき、要求が変更されたときに容易に変更を加えることができるようになります。

  コンポーネント図を使用すると、設計で使用されている、または将来使用される予定の言語またはプラットフォームに関係なく、設計を表すことができます。

## <a name="OtherDiagrams"></a>他の図との関係
 コンポーネント図は他の図と共に使用できます。

|図の種類|確認できる設計の側面|
|-------------------|--------------------------------------------------------------------|
|UML シーケンス図|-システムのコンポーネント間の相互作用<br />-コンポーネント内のパート間の相互作用。<br /><br /> 詳細については、「 [UML シーケンス図: ガイドライン](../modeling/uml-sequence-diagrams-guidelines.md)」を参照してください。|
|UML クラス図|-コンポーネントのインターフェイス。 クラス図を使用すると、インターフェイスのメソッドを詳しく示すことができます。<br />-コンポーネントのインターフェイス間でパラメーターで送信されるデータ。<br /><br /> 詳細については、「 [UML クラス図: ガイドライン](../modeling/uml-class-diagrams-guidelines.md)」を参照してください。|
|アクティビティ図|-受信メッセージへの応答としてコンポーネントによって実行される内部処理。<br /><br /> 詳細については、「 [UML アクティビティ図: ガイドライン](../modeling/uml-activity-diagrams-guidelines.md)」を参照してください。|
|レイヤー図|-コンポーネントの論理アーキテクチャ層。<br /><br /> 詳細については、「[レイヤー図: リファレンス](../modeling/layer-diagrams-reference.md)」を参照してください。|

## <a name="Basics"></a>コンポーネント図を描画するための基本的な手順
 コンポーネント図の要素に関するリファレンス情報については、「 [UML コンポーネント図: リファレンス](../modeling/uml-component-diagrams-reference.md)」を参照してください。

 コンポーネント図を設計プロセスで使用する方法の詳細については、「[アプリのアーキテクチャのモデル](../modeling/model-your-app-s-architecture.md)化」を参照してください。

> [!NOTE]
> モデリング図を作成するための詳細な手順については、「 [UML モデルとダイアグラムの編集](../modeling/edit-uml-models-and-diagrams.md)」を参照してください。

#### <a name="to-create-a-component-diagram"></a>コンポーネント図を生成するには

1. **[アーキテクチャ]** メニューの **[新しい UML またはレイヤー図]** をクリックします。

2. **[テンプレート]** の **[UML コンポーネント図]** をクリックします。

3. 図に名前を付けます。

4. **[モデリングプロジェクトへの追加]** で、ソリューション内の既存のモデリングプロジェクトを選択するか、**新しいモデリングプロジェクトを作成**し、[ **OK]** をクリックします。

     新しいコンポーネント図が、UML**コンポーネント図**ツールボックスと共に表示されます。 ツールボックスには、必要な要素および関係が含まれています。

### <a name="drawing-components"></a>コンポーネントの描画
 ![インターフェイスを持つコンポーネント](../modeling/media/uml-compdrawing.png "UML_CompDrawing")

 システムまたはアプリケーションの主要な機能ユニットごとに*コンポーネント*(1) を作成します。

 たとえば、アプリケーション、ハードウェア デバイス、Web サービス、.NET アセンブリ、プログラム クラス、クラス グループ、プログラムの分離可能なセグメントなどがこれに該当します。

##### <a name="to-create-components"></a>コンポーネントを生成するには

1. ツールボックス の **コンポーネント** をクリックし、図の空白部分をクリックします。

     \- または

     既存のコンポーネントをコピーし、貼り付けます。

    1. 図または**UML モデルエクスプローラー**で既存のコンポーネントを検索します。

    2. コンポーネントを右クリックし、 **[コピー]** をクリックします。

    3. コピーしたコンポーネントを貼り付ける図を開きます。

    4. 図の空白部分を右クリックし、 **[貼り付け]** をクリックします。

         新しい名前が付けられたコンポーネントが表示されます。

2. コンポーネントの名前をクリックし、変更します。

3. コンポーネントのヘッダーのみを表示するには、シェブロン (5) をクリックします。

### <a name="showing-the-ports-of-a-component"></a>コンポーネントのポートの表示
 *ポート*(2、3) は、コンポーネントとの間でやり取りされるメッセージまたは操作の呼び出しのグループを表します。 このグループは、ポートの型を定義するインターフェイスによって記述されます。 ポートは、インターフェイスを提供するか、またはインターフェイスを要求することができます。

 *指定さ*れたインターフェイス (2) を持つポートは、コンポーネントによって実装され、他のコンポーネントで使用できる操作を提供します。

 たとえば、ユーザー インターフェイス、Web サービス、.NET インターフェイス、任意のプログラミング言語の関数のコレクションなどがこれに該当します。

 *要求インターフェイス*(3) を持つポートは、他のコンポーネントまたは外部システムによって提供される操作またはサービスのグループに対するコンポーネントの要件を表します。

 たとえば、Web ブラウザーの場合は Web サーバーが求められ、アプリケーション アドインの場合はアプリケーションからのサービスが求められます。

 1 つのコンポーネントは任意の数のポートを持つことができます。

##### <a name="to-add-ports-to-a-component"></a>ポートをコンポーネントに追加するには

1. ツールボックス で、**指定されたインターフェイス** または **必要なインターフェイス** をクリックします。

2. ポートを追加するコンポーネントをクリックします。

    コンポーネントの境界上にポートが表示されます。

    新しいインターフェイスがポートの型として生成されます。 このインターフェイスは、 **UML モデルエクスプローラー**に表示されます。

3. コンポーネント境界上でポートをドラッグして、目的の位置に配置します。

4. ポートのラベルをドラッグしてその位置を調整します。

5. ラベルをクリックし、変更します。 ラベルは、インターフェイスの名前を示します。 ラベルを変更することは、インターフェイスの名前を変更することになります。

   インターフェイスの属性と操作を一覧表示する場合は、UML モデル エクスプローラーのインターフェイスに追加すると表示できます。 または、UML モデル エクスプローラーからインターフェイスをクラス図にドラッグし、そこで操作と属性を追加することもできます。

### <a name="linking-between-components"></a>コンポーネント間のリンクの設定
 依存関係 (4) は、あるコンポーネントの要求を他のコンポーネントによって提供される操作またはサービスで満たすことができることを示すために使用します。

##### <a name="to-show-that-a-provided-interface-can-satisfy-a-required-interface"></a>提供インターフェイスが要求インターフェイスの要求を満たすことを示すには

1. ツールボックスで、 **[依存関係]** をクリックします。

2. 最初に操作またはサービスを要求するコンポーネント上の要求インターフェイスを持つポートをクリックし、次に操作またはサービスを提供するコンポーネントの提供インターフェイスを持つポートをクリックします。

   グループ内のすべてのコンポーネントが他のすべてのコンポーネントに依存するような依存関係ループを設計しないように注意してください。

##### <a name="to-add-a-port-for-an-existing-interface-to-a-component"></a>既存のインターフェイスのポートをコンポーネントに追加するには

- **UML モデルエクスプローラー**でインターフェイスを見つけ、そこからコンポーネントにドラッグします。

     -または-

- インターフェイスへの参照を図からコピーし、貼り付けます。

    1. クラスダイアグラムまたはコンポーネント図で、インターフェイスを右クリックし、 **[コピー]** をクリックします。

    2. コンポーネント図でコンポーネントを右クリックし、 **[参照の貼り付け]** をクリックします。

         提供インターフェイスがコンポーネント上に表示されます。 隣にアクション タグが表示されます。

        > [!NOTE]
        > **[参照の貼り付け]** ではなく **[貼り付け]** を使用すると、新しい名前を持つ新しいインターフェイスが作成されます。

    3. 必要なインターフェイスを作成する場合は、アクションタグをクリックし、 **[必須インターフェイスに変換]** をクリックします。

## <a name="Parts"></a>コンポーネントの内部部分を表示する
 ![内部部分を示すコンポーネント図](../modeling/media/uml-compshowing.png "UML_CompShowing")

 コンポーネントが相互に対話するより小規模なコンポーネントから構成されることを示すために、パート (3) をコンポーネント (1) 内に配置できます。

 この例の図は、Dinner Now Web Service 型のすべてのインスタンスに、Customer Server の 1 つのインスタンスと Kitchen Server の 1 つのインスタンスが含まれていることを示しています。

 パートは、通常のクラスに属する属性に似た、親コンポーネントのプロパティです。 パートは、独自の型を持ちます。通常はこれもコンポーネントです。 パートのラベルは、通常の属性と同じ形式を持ちます。

 `+ partName : TypeName`

 親コンポーネント内の各パートは、その型 (4、5) に対して定義されている提供インターフェイスおよび要求インターフェイスを示します。 あるパートで必要とされる操作またはサービスを別のパートが提供できます。 **パートアセンブリ**コネクタを使用して、パートが相互に接続されているかどうかを示すことができます (6)。

 また、親コンポーネントのインターフェイスがそのいずれかのパートによって実際に提供または要求されることを示すこともできます。 **委任**関係 (9) を使用して、親のポートを内部パートのポートに接続できます。 2 つのポートは同じ種類 (提供ポートまたは要求ポート) である必要があり、インターフェイス型に互換性がある必要があります。

 新しい型または既存の型の新しいパートを生成できます。

#### <a name="to-add-parts-to-a-component"></a>パートをコンポーネントに追加するには

1. 親コンポーネントの構成要素と考える主要な機能ユニットごとにパートを生成します。

    1. ツールボックス の **コンポーネント** をクリックし、親コンポーネント (1) の内側をクリックします。

         親コンポーネントの内側に新しいパート (3) が表示されます。

         **UML モデルエクスプローラー**に新しいコンポーネントが作成されます。 これが、新しいパートの型です。

         \- または

         既存のコンポーネントを UML モデル エクスプローラーから親コンポーネント上にドラッグします。

         親コンポーネントの内側に新しいパート (3) が表示されます。 その型は、UML モデル エクスプローラーからドラッグしたコンポーネントです。

         \- または

         図または UML モデルエクスプローラーでコンポーネントを右クリックし、 **[コピー]** をクリックします。

         親コンポーネントを右クリックし、 **[参照の貼り付け]** をクリックします。

         親コンポーネントの内側に新しいパート (3) が表示されます。 その型は、コピーしたコンポーネントです。

    2. 新しいパートの名前をクリックし、変更します。 型を変更することはできません。

    3. 提供インターフェイスと要求インターフェイス (4、5) を新しいパートに追加できます。 **指定さ**れたインターフェイスまたは**必要なインターフェイス**ツールをクリックし、パーツ内をクリックします。

         \- または

         既存のインターフェイスを**UML モデルエクスプローラー**からパーツにドラッグします。

         インターフェイスがパートの型に追加され、パート上に表示されます。 必要に応じて、親コンポーネントのサイズが調整されます。

2. パートを相互に接続します。

    - 異なる部分のポートを接続するには、**依存関係**ツールを使用します (6)。

3. パートを親コンポーネントのポートに接続します。

    1. 親コンポーネント上に 1 つ以上のポート (7) を生成します。 ツールボックス の **必要なインターフェイス** または **指定されたインターフェイス** をクリックし、親コンポーネントをクリックします。

    2. ポートを 1 つ以上のパートに委譲 (9) します。 **[委任]** ツールをクリックし、次に親コンポーネントのポートをクリックし、次にパートのポートをクリックします。 同じ方法で、インターフェイスを提供または要求するポートを接続できます。

### <a name="showing-the-parts-of-a-part"></a>パートの内部パートの表示
 コンポーネントをパートに分解した後、各パート型をそれに固有の内部パートに分解できます。

 各層の分解を別々のコンポーネント図で行うと作業が簡単です。 最初に、パートの型を見つける必要があります。 たとえば、この図の 1 つのパートは `DNCustomerServer` という名前を持ち、その型は `CustomerServer` という名前のコンポーネントです。 この型を UML モデル エクスプローラー内で見つけ、別の図に配置することができます。 これにより、それに固有の内部パートを生成できます。

##### <a name="to-place-a-parts-type-on-a-diagram"></a>パートの型を図に配置するには

1. パートの型の完全修飾名を確認します。

     パーツを右クリックし、 **[プロパティ]** をクリックします。

     型名は、プロパティウィンドウの**type**フィールドに表示されます。

2. **UML モデルエクスプローラー**で、パートの型を見つけます。

     **[表示]** をクリックし、 **[その他のウィンドウ]** をポイントし、 **[UML モデルエクスプローラー]** をクリックします。

     プロジェクトを展開し、必要に応じて型が属しているパッケージを展開します。

     型は**コンポーネント**として一覧表示されます。

     必要に応じて、ここで名前を変更できます。

3. 別のコンポーネント図を開くかまたは生成します。

4. UML モデル エクスプローラーから図上に型をドラッグします。

     型のビューが、図内でコンポーネントとして表示されます。

     これは、パートに対して定義したのと同じインターフェイスを持ちます。

     この段階で、その内部にパートを追加できます。

## <a name="Designing"></a>コンポーネントの設計

### <a name="describing-how-the-parts-collaborate"></a>パートのコラボレーションの記述
 シーケンス図を描画して、親コンポーネントが受信するメッセージに対する応答においてパートがどのように連携して動作するかを示すことができます。

 これらの図は、既存のコンポーネントを説明するため、および新しいコンポーネントを設計するために使用できます。

 コンポーネントを設計している途中であれば、配置するパートを決定する前にシーケンス図を描画できます。 シーケンス図を使用して、さまざまなパート、要求インターフェイス、およびメッセージ シーケンスを試すことができます。 最も頻繁に発生する最も重要な受信メッセージを対象に、シーケンス図を描画します。 これにより、決定した生存線に対応するパートをコンポーネント内に生成できます。

 シーケンス図を使用して、どのようにシステムの処理を複数の異なるコンポーネントに配分するかを評価します。

- 1 つのパートが担当する処理があまりに多い場合、処理を均等に配分した場合に比べて、アプリケーションの更新が困難になります。

- 処理を少しずつ多数の相互作用に配分した場合、システムのパフォーマンスが低下し、システムを理解するのが困難になります。

  ![コラボレーションパーツを示すシーケンス図](../modeling/media/uml-compdescparts.png "UML_CompDescParts")

##### <a name="to-draw-a-sequence-diagram-that-shows-collaboration-between-parts"></a>パート間のコラボレーションを示すシーケンス図を描画するには

1. 新しいシーケンス図を生成します。

     詳細については、「 [UML シーケンス図: ガイドライン](../modeling/uml-sequence-diagrams-guidelines.md)」を参照してください。

2. このコンポーネントにメッセージを送信する外部コンポーネント、ユーザー、デバイス、またはその他のアクター (1) の生存線を生成します。

     この生存線の**アクター**プロパティを true に設定して、考慮する必要があるコンポーネントの外部であることを示すことができます。 生存線の上にスティック図形が表示されます。

3. 選択したアクターからメッセージが送信されるこのコンポーネントの提供インターフェイス (2) の生存線を生成します。

4. コンポーネントの各パート (3) の生存線を生成します。

5. コンポーネントの要求インターフェイス (4) の生存線を生成します。

6. 外部アクター (5) からのメッセージを描画します。 メッセージがどのようにパートに渡されるか、およびパートがどのように連携してメッセージに応答するかを示します。

7. 必要に応じて、要求インターフェイス (6) に送信されるメッセージを示します。 メッセージの実行の詳細は省略してください。

### <a name="is-the-component-more-than-its-parts"></a>コンポーネントとそのパートの役割の重要性の相違
 場合によっては、コンポーネントはパートのコレクションに与えられた名前にすぎません。 すべての処理はパートによって実行され、実行時にはコンポーネントを表すコードまたはその他の成果物はありません。

 モデルでこれを示すには、コンポーネントの **[間接的にインスタンス化される]** プロパティを設定します。 この場合、すべてのコンポーネントのインターフェイスがポート上にあり、内部パートへの委譲が設定されている必要があります。

### <a name="describing-the-process-inside-each-part"></a>各パート内のプロセスの記述
 アクティビティ図を使用すると、コンポーネントがそれぞれの受信メッセージをどのように処理するかを示すことができます。 詳細については、「 [UML アクティビティ図: ガイドライン](../modeling/uml-activity-diagrams-guidelines.md)」を参照してください。

 ![データバッファーを含むアクティビティ図](../modeling/media/uml-compdescribingproc.png "UML_CompDescribingProc")

 イベント受理アクション (1) を使用して、受信メッセージによって新しいスレッドが開始されることを示します。

 オブジェクト ノードおよび入出力ピンを使用して、情報の流れと、情報が格納される場所を示します。 この例のオブジェクト ノード (2) は、スレッド間でバッファリングされる項目を示します。

### <a name="defining-data-and-classes"></a>データおよびクラスの定義
 UML クラス図を使用することで、次の項目の詳細な内容を記述できます。

- コンポーネントのインターフェイス。 必要な、または用意されているポートをコンポーネントに追加すると、インターフェイスが UML モデル エクスプローラーに表示されます。 これを UML クラス図にドラッグまたはコピーして、その属性と操作、および他のインターフェイスとの関係を示すことができます。

- インターフェイスの操作のパラメーターで渡されるデータ。

- アクティビティ図のオブジェクト フローに示されるようなコンポーネントに格納されているデータ。

### <a name="general-dependencies-between-components"></a>コンポーネント間の一般的な依存関係
 コンポーネント図を使用して、設計の主要な構成要素とその相互依存関係のみを示すことができます。

 ![コンポーネント間の依存関係](../modeling/media/uml-compdepend.png "UML_CompDepend")

 **依存関係ツールを**使用して依存関係を描画します。 これは、あるコンポーネントの設計が他のコンポーネントに依存することを示します。

 依存関係の代表的な例を次に示します。

- あるコンポーネントが、他のコンポーネント内のコードを呼び出す。

- あるコンポーネントが、他のクラス内で定義されているクラスをインスタンス化する。

- あるコンポーネントが、他のコンポーネントによって生成された情報を使用する。

  依存関係矢印の名前を使用して、特定の用途を表すことができます。 名前を設定するには、矢印を右クリックし、 **[プロパティ]** をクリックして、プロパティ ウィンドウの **[名前]** フィールドを設定します。

## <a name="see-also"></a>参照
 [Uml モデルとダイアグラムの編集](../modeling/edit-uml-models-and-diagrams.md) [uml コンポーネント図: リファレンス](../modeling/uml-component-diagrams-reference.md) [uml シーケンス図: リファレンス](../modeling/uml-sequence-diagrams-reference.md)uml[ユースケース図:](../modeling/uml-use-case-diagrams-reference.md)リファレンス uml[クラス図](../modeling/uml-class-diagrams-reference.md): リファレンス[uml コンポーネント図: リファレンス](../modeling/uml-component-diagrams-reference.md) [ビデオ: コンポーネント図を使用した物理構造のデザイン](http://channel9.msdn.com/posts/clinted/UML-with-VS-2010-Part-6-Designing-a-Projects-Physical-Structure/)
