---
title: '方法: ジオメトリ ベースのグラデーション シェーダーを作成する |Microsoft Docs'
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-designers
ms.topic: conceptual
ms.assetid: 4b204405-ba95-4c5e-bd51-ec033a3ebfb6
caps.latest.revision: 20
author: gewarren
ms.author: gewarren
manager: jillfra
ms.openlocfilehash: eda8424aeb28231df0ae0355931989bec13a89b7
ms.sourcegitcommit: 47eeeeadd84c879636e9d48747b615de69384356
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/23/2019
ms.locfileid: "63436172"
---
# <a name="how-to-create-a-geometry-based-gradient-shader"></a>方法: ジオメトリベースのグラデーション シェーダーを作成する
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

このドキュメントでは、シェーダー デザイナーと Directed Graph Shader Language を使用してジオメトリベースのグラデーション シェーダーを作成する方法を説明します。 このシェーダーは、ワールド空間におけるオブジェクトの各ポイントの高さによって、定数の RGB 色の値をスケーリングします。  
  
 このドキュメントでは、以下のアクティビティについて説明します。  
  
- シェーダー グラフへのノードの追加  
  
- ノードのプロパティの設定  
  
- ノードの接続の解除  
  
- ノードの接続  
  
## <a name="creating-a-geometry-based-gradient-shader"></a>ジオメトリベースのグラデーション シェーダーの作成  
 シェーダーにピクセルの位置を組み込むことによって、ジオメトリ ベースのシェーダーを実装できます。 シェーディング言語では、ピクセルには単なるカラーと 2-D 画面の場所より詳しい情報が含まれています。 ピクセルとは、システムによっては*フラグメント*とも呼ばれ、ピクセルに対応するサーフェイスを表す値のコレクションのことです。 このドキュメントで説明するシェーダーは、ワールド空間内の 3-D オブジェクトの各ピクセルの高さを使用して、フラグメントの最終的な出力の色に影響を及ぼします。  
  
 開始する前に、**[プロパティ]** ウィンドウと**ツールボックス**が表示されていることを確認します。  
  
#### <a name="to-create-a-geometry-based-gradient-shader"></a>ジオメトリベースのグラデーション シェーダーを作成するには  
  
1. 操作する DGSL シェーダーを作成します。 プロジェクトに DGSL シェーダーを追加する方法については、「[シェーダー デザイナー](../designers/shader-designer.md)」の「作業の開始」を参照してください。  
  
2. **[最終的な色]** ノードから **[ポイントの色]** ノードを接続解除します。 **[ポイントの色]** ノードの **[RGB]** ターミナルを選択し、**[リンクの解除]** を選択します。 これにより、次の手順で追加するノードのための領域を確保できます。  
  
3. グラフに **[乗算記号]** ノードを追加します。 **ツールボックス**の **[数式]** で **[乗算記号]** を選択し、デザイン サーフェイスに移動します。  
  
4. グラフに **[ベクターのマスク]** ノードを追加します。 **ツールボックス**の **[ユーティリティ]** で **[ベクターのマスク]** を選択し、デザイン サーフェイスに移動します。  
  
5. **[ベクターのマスク]** ノードのマスク値を指定します。 **[選択]** モードで **[ベクターのマスク]** ノードを選択し、**[プロパティ]** ウィンドウで **[Green / Y]** プロパティを **[True]** に設定し、**[Red / X]**、**[Blue / Z]**、**[Alpha / W]** プロパティを **[False]** に設定します。 この例では、**[Red / X]**、**[Green / Y]**、**[Blue / Z]** プロパティは **[ワールド位置]** ノードの x、y、z コンポーネントに対応し、**[Alpha / W]** は使用されません。 マスク後 **[Green / Y]** のみ **[True]** に設定されるため、入力のベクターの y コンポーネントだけが残ります。  
  
6. グラフに **[ワールド位置]** ノードを追加します。 **ツールボックス**の **[定数]** で **[ワールド位置]** を選択し、デザイン サーフェイスに移動します。  
  
7. フラグメントのワールド空間の位置をマスクします。 **[選択]** モードで、**[ワールド位置]** ノードの **[出力]** ターミナルを **[ベクターのマスク]** ノードの **[ベクター]** ターミナルに移動します。 この接続は、フラグメントの位置をマスクして x コンポーネントと z コンポーネントを無視します。  
  
8. マスクされたワールド空間の位置で RGB 色の定数を乗算します。 **[ポイントの色]** ノードの **[RGB]** ターミナルを **[乗算記号]** ノードの **[Y]** ターミナルに移動し、**[ベクターのマスク]** ノードの **[出力]** ターミナルを **[乗算記号]** ノードの **[X]** ターミナルに移動します。 この接続は、ワールド空間のピクセルの高さによって色の値をスケーリングします。  
  
9. スケーリングされた色の値を最終的な色に接続します。 **[乗算記号]** ノードの **[出力]** ターミナルを **[最終的な色]** ノードの **[RGB]** ターミナルに移動します。  
  
   次の図は、完成したシェーダー グラフと、球に適用されるシェーダーのプレビューを示します。  
  
> [!NOTE]
> この図では、シェーダーの効果をわかりやすく示すためにオレンジ色が指定されていますが、ワールド空間にプレビュー図形の位置がないため、シェーダー デザイナーでシェーダーを完全にプレビューすることができません。 完全な効果を確認するには、シェーダーを実際のシーンでプレビューする必要があります。  
  
 ![シェーダー グラフとその効果のプレビュー](../designers/media/digit-gradient-effect-graph.png "Digit-Gradient-Effect-Graph")  
  
 シェーダーによっては、特定の図形を使用すると、より適切にプレビューできる可能性があります。 シェーダー デザイナーでシェーダーをプレビューする方法については、「[シェーダー デザイナー](../designers/shader-designer.md)」の「**シェーダーのプレビュー**」を参照してください。  
  
 次の図は、」に示した 3-D シーンに適用するこのドキュメントで説明したシェーダーを示します[方法。3-D 地形をモデル化](../designers/how-to-model-3-d-terrain.md)します。 ここでは、色の輝度とワールド空間のポイントの高さが共に増加しています。  
  
 ![3&#45;D 地形モデルに適用されたグラデーション効果](../designers/media/digit-gradient-effect-result.png "Digit-Gradient-Effect-Result")  
  
 シェーダーを 3-D モデルに適用する方法の詳細については、次を参照してください。[方法。シェーダーを 3-D モデルに適用する](../designers/how-to-apply-a-shader-to-a-3-d-model.md)します。  
  
## <a name="see-also"></a>関連項目
 [方法: シェーダーを 3-D モデルに適用します。](../designers/how-to-apply-a-shader-to-a-3-d-model.md)   
 [方法: シェーダーをエクスポートします。](../designers/how-to-export-a-shader.md)   
 [方法: 3-D 地形をモデル](../designers/how-to-model-3-d-terrain.md)   
 [方法: グレースケール テクスチャ シェーダーを作成します。](../designers/how-to-create-a-grayscale-texture-shader.md)   
 [シェーダー デザイナー](../designers/shader-designer.md)   
 [シェーダー デザイナー ノード](../designers/shader-designer-nodes.md)
