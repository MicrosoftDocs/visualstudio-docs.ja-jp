---
title: 'クイック スタート: C/C++ のコード分析 |Microsoft Docs'
ms.custom: ''
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.reviewer: ''
ms.suite: ''
ms.technology:
- vs-devops-test
ms.tgt_pltfrm: ''
ms.topic: article
helpviewer_keywords:
- C/C++ code analysis
- code analysis,C/C++
ms.assetid: 6110b8ba-0af6-4acd-b1ba-bb0551f90e44
caps.latest.revision: 10
author: corob-msft
ms.author: gewarren
manager: ghogen
ms.openlocfilehash: 3d841150a35e88a1ac5bf8a300f9c74fc8bbdf99
ms.sourcegitcommit: 240c8b34e80952d00e90c52dcb1a077b9aff47f6
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/23/2018
ms.locfileid: "49851063"
---
# <a name="quick-start-code-analysis-for-cc"></a>クイック スタート: C/C++ のコード分析
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

C または C++ コードのコード分析を定期的に実行することで、アプリケーションの品質を向上できます。 これにより、一般的な問題、優れたプログラミング手法からの逸脱、テストで見つけることが難しい不具合を検出できます。 コード分析の警告は、コンパイラ エラーや警告とは異なり、有効でありながらも、コードを使用するユーザーにとって問題を引き起こす可能性のある特定のコード パターンが検索されます。  
  
## <a name="in-this-topic"></a>このトピックの内容  
  
-   [プロジェクトの規則セットを構成します。](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_ConfigureRuleSets)  
  
-   [コード分析を実行します。](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Run)  
  
-   [分析およびコード分析の警告を解決します。](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Analyze)  
  
-   [コード分析警告の抑制](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Suppress)  
  
-   [分析の警告コードの作業項目を作成します。](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Creating_work_items_for_code_analysis_warnings)  
  
-   [コード分析結果の検索とフィルター処理](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Search)  
  
##  <a name="BKMK_ConfigureRuleSets"></a> プロジェクトの規則セットを構成します。  
  
1.  **ソリューション エクスプ ローラー**、プロジェクト名のショートカット メニューを開き、選択し、**プロパティ**します。  
  
2.  必要に応じて、次の手順を実行します。  
  
    1.  **構成**と**プラットフォーム**リスト、ビルド構成とターゲット プラットフォームを選択します。  
  
    2.  既定では、外部ツールによって自動的に生成されたコードからの警告はコード分析では報告されません。 生成されたコードからの警告を表示するには、オフ、**結果生成されたコードを表示しない**チェック ボックスをオンします。  
  
        > [!NOTE]
        >  コード分析のエラーおよび警告がフォームやテンプレートで表示される場合、このオプションを使用しても、生成されたコードからこのエラーおよび警告の出力は抑制されません。 フォームまたはテンプレートのソース コードは表示することも保持することもできます。  
  
3.  選択した構成を使用して、プロジェクトをビルドするたびに、コード分析を実行するには、選択、**ビルド時に C/C++ のコード分析を有効にする**チェック ボックスをオンします。 手動では開くことでもコード分析を実行することができます、**分析**メニューを**でコード分析を実行** *ProjectName*します。  
  
4.  **この規則セットを実行**ボックスの一覧で、次のいずれかの操作を行います。  
  
    -   使用する規則セットを選択します。  
  
    -   選択 **\<[参照...] >** を既存のカスタム規則セットを指定されていないリスト。  
  
    -   カスタム規則セットを定義します。  
  
         詳細については、次を参照してください。[カスタム規則セットの作成](../code-quality/creating-custom-code-analysis-rule-sets.md)です。  
  
### <a name="standard-cc-rule-sets"></a>標準の C/C++ 規則セット  
 Visual Studio には、ネイティブ コードの規則として 2 つの標準セットが含まれています。  
  
|ルール セット|説明|  
|--------------|-----------------|  
|Microsoft ネイティブ最小推奨規則|この規則セットは、ネイティブ コードの最も重大な問題 (潜在的なセキュリティ ホールやアプリケーションのクラッシュなど) に関するものです。 ネイティブ プロジェクトにカスタムの規則セットを作成する場合は、必ずこの規則セットを含める必要があります。|  
|Microsoft ネイティブ推奨規則|この規則セットは、広範な問題を対象としています。 これには、Microsoft ネイティブ最小推奨規則のすべての規則が含まれています。|  
  
##  <a name="BKMK_Run"></a> コード分析を実行します。  
 プロジェクト プロパティ ページの [コード分析] ページでは、プロジェクトをビルドするたびにコード分析を実行するように構成できます。 また、手動でコード分析を実行することもできます。  
  
 ソリューションでコード分析を実行するには  
  
- **[ビルド]** メニューの **[ソリューションでコード分析を実行]** をクリックします。  
  
  プロジェクトでコード分析を実行するには  
  
- ソリューション エクスプローラーで、プロジェクトの名前を選択します。  
  
- **ビルド**] メニューの [選択**でコード分析を実行***プロジェクト名*します。  
  
  プロジェクトまたはソリューションがコンパイルされ、コード分析が実行されます。 結果は、[コード分析] ウィンドウに表示されます。  
  
##  <a name="BKMK_Analyze"></a> 分析およびコード分析の警告を解決します。  
 特定の警告を分析するには、[コード分析] ウィンドウで警告のタイトルを選択します。 警告を展開すると、問題に関する詳細情報が表示されます。 可能な場合は、コード分析に行番号と、警告の原因となった分析ロジックが表示されます。 問題の解決策などの警告の詳細については、警告 ID を選択すると、そのメッセージに関する MSND ライブラリ内のヘルプ トピックが表示されます。  
  
 警告を展開すると、警告の原因となったコード行が Visual Studio コード エディターで強調表示されます。  
  
 問題を理解した後は、コード内で解決できます。 その後、コード分析に戻り、[コード分析] ウィンドウに警告が表示されなくなったことと、修正によって新たな警告が発生していないことを確認します。  
  
> [!TIP]
>  コード分析は、[コード分析] ウィンドウから再実行できます。 選択、**分析**ボタンをクリックし、分析の範囲を選択します。 ソリューション全体または選択したプロジェクトの分析を再実行できます。  
  
##  <a name="BKMK_Suppress"></a> コード分析警告の抑制  
 コード分析警告の修正を行わないことを決定する場合があります。 コードを実装したときの警告の発生確率と、警告を解決するためのコード変更の量を比較して、解決しないことを選択できます。 または、警告で使用された分析が特定のコンテキストでは不適切であると判断できます。 個々の警告を抑制して、[コード分析] ウィンドウに表示されないように設定できます。  
  
 警告を抑制するには:  
  
1. 詳細情報が表示されない場合は、警告のタイトルを選択して展開します。  
  
2. 警告の下部にある **[アクション]** リンクをクリックします。  
  
3. 選択**メッセージの非表示**選び、**でソース**します。  
  
   メッセージを非表示にすると、コードの該当行に対して警告を抑制する`#pragma warning (disable:`*警告 ID*`)` が挿入されます。  
  
##  <a name="BKMK_Creating_work_items_for_code_analysis_warnings"></a> 分析の警告コードの作業項目を作成します。  
 作業項目トラッキング機能を使用して、Visual Studio 内からバグをログに記録できます。 この機能を使用するには、Team Foundation Server のインスタンスに接続する必要があります。  
  
 **1 つ以上の C/C++ コード警告用の作業項目を作成するには**  
  
1.  [コード分析] ウィンドウで、警告を展開して選択します。  
  
2.  警告のショートカット メニューで**作業項目の作成**、し、作業項目の種類を選択します。  
  
3.  選択された警告に対して作業項目が 1 つ作成され、IDE のドキュメント ウィンドウに作業項目が表示されます。  
  
4.  その他の情報を追加し、**作業項目の保存**します。  
  
##  <a name="BKMK_Search"></a> コード分析結果の検索とフィルター処理  
 警告メッセージの長い一覧の検索と、複数のプロジェクトから成るソリューションの警告をフィルター処理できます。  
  
1.  **タイトルまたは警告 id でフィルターの警告を**: でキーワードを入力して、**フィルター**テキスト ボックス。  
  
2.  **プロジェクトで警告をフィルターする**: マルチ プロジェクト ソリューションでは、上部にある一覧で 1 つまたは複数のプロジェクトを選択して、コード分析 ウィンドウの右。 すべての警告を表示するには、ソリューション名を選択します。  
  
3.  **重要度別にフィルター警告を**: コード分析のメッセージには既定での重大度が割り当てられます**警告**します。 として 1 つまたは複数のメッセージの重大度を割り当てることができます**エラー**では、カスタム ルールを設定します。 いずれかを選択**警告**または**エラー**それぞれの重大度が割り当てられているメッセージのみを表示します。 選択**すべて**すべてのメッセージを表示します。



