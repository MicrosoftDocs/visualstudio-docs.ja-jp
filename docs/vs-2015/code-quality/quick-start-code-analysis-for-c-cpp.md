---
title: 'クイックスタート: C/C + + | のコード分析Microsoft Docs'
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-code-analysis
ms.topic: conceptual
helpviewer_keywords:
- C/C++ code analysis
- code analysis,C/C++
ms.assetid: 6110b8ba-0af6-4acd-b1ba-bb0551f90e44
caps.latest.revision: 10
author: corob-msft
ms.author: corob
manager: jillfra
ms.openlocfilehash: e9db06ec0748ce4499afb423fac03886cd763301
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/02/2020
ms.locfileid: "77278487"
---
# <a name="quick-start-code-analysis-for-cc"></a>クイック スタート: C/C++ のコード分析
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

C または C++ コードのコード分析を定期的に実行することで、アプリケーションの品質を向上できます。 これにより、一般的な問題、優れたプログラミング手法からの逸脱、テストで見つけることが難しい不具合を検出できます。 コード分析の警告はコンパイラのエラーや警告とは異なります。コード分析は、有効であってもコードの作成者やコードを利用する他のユーザーにとって問題になる可能性がある特定のコード パターンを検索するからです。  
  
## <a name="in-this-topic"></a>このトピックの内容  
  
- [プロジェクトの規則セットの構成](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_ConfigureRuleSets)  
  
- [コード分析の実行](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Run)  
  
- [コード分析の警告の分析と解決](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Analyze)  
  
- [コード分析警告の抑制](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Suppress)  
  
- [コード分析の警告のための作業項目の作成](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Creating_work_items_for_code_analysis_warnings)  
  
- [コード分析結果の検索とフィルター処理](../code-quality/quick-start-code-analysis-for-c-cpp.md#BKMK_Search)  
  
## <a name="configure-rule-sets-for-a-project"></a><a name="BKMK_ConfigureRuleSets"></a> プロジェクトの規則セットを構成する  
  
1. **ソリューションエクスプローラー**で、プロジェクト名のショートカットメニューを開き、[**プロパティ**] を選択します。  
  
2. 必要に応じて、次の手順を実行します。  
  
    1. [ **構成** ] と [ **プラットフォーム** ] の一覧で、ビルド構成とターゲットプラットフォームを選択します。  
  
    2. 既定では、外部ツールによって自動的に生成されたコードからの警告はコード分析では報告されません。 生成されたコードからの警告を表示するには、[ **生成されたコードから結果** を表示しない] チェックボックスをオフにします。  
  
        > [!NOTE]
        > コード分析のエラーおよび警告がフォームやテンプレートで表示される場合、このオプションを使用しても、生成されたコードからこのエラーおよび警告の出力は抑制されません。 フォームまたはテンプレートのソース コードは表示することも保持することもできます。  
  
3. 選択した構成を使用してプロジェクトがビルドされるたびにコード分析を実行するには、[ **ビルド時に C/c + + のコード分析を有効** にする] チェックボックスをオンにします。 [**分析**] メニューを開き、[ *ProjectName***でコード分析を実行**] をクリックして、手動でコード分析を実行することもできます。  
  
4. [ **この規則セットを実行** する] の一覧で、次のいずれかの操作を行います。  
  
    - 使用する規則セットを選択します。  
  
    - **\<Browse...>** 一覧に含まれていない既存のカスタム規則セットを指定する場合に選択します。  
  
    - カスタム規則セットを定義します。  
  
         詳細については、「 [カスタム規則セットの作成](../code-quality/creating-custom-code-analysis-rule-sets.md)」を参照してください。  
  
### <a name="standard-cc-rule-sets"></a>標準の C/C++ 規則セット  
 Visual Studio には、ネイティブ コードの規則として 2 つの標準セットが含まれています。  
  
|ルール セット|説明|  
|--------------|-----------------|  
|Microsoft ネイティブ最小推奨規則|この規則セットは、ネイティブ コードの最も重大な問題 (潜在的なセキュリティ ホールやアプリケーションのクラッシュなど) に関するものです。 ネイティブ プロジェクトにカスタムの規則セットを作成する場合は、必ずこの規則セットを含める必要があります。|  
|Microsoft ネイティブ推奨規則|この規則セットは、広範な問題を対象としています。 これには、Microsoft ネイティブ最小推奨規則のすべての規則が含まれています。|  
  
## <a name="run-code-analysis"></a><a name="BKMK_Run"></a> コード分析の実行  
 プロジェクト プロパティ ページの [コード分析] ページでは、プロジェクトをビルドするたびにコード分析を実行するように構成できます。 また、手動でコード分析を実行することもできます。  
  
 ソリューションでコード分析を実行するには  
  
- [**ビルド**] メニューの [**ソリューションでコード分析を実行**] をクリックします。  
  
  プロジェクトでコード分析を実行するには  
  
- ソリューション エクスプローラーで、プロジェクトの名前を選択します。  
  
- [**ビルド**] メニューの [*プロジェクト名***でコード分析を実行**] をクリックします。  
  
  プロジェクトまたはソリューションがコンパイルされ、コード分析が実行されます。 結果は、[コード分析] ウィンドウに表示されます。  
  
## <a name="analyze-and-resolve-code-analysis-warnings"></a><a name="BKMK_Analyze"></a> コード分析警告の分析と解決  
 特定の警告を分析するには、[コード分析] ウィンドウで警告のタイトルを選択します。 警告を展開すると、問題に関する詳細情報が表示されます。 可能な場合は、コード分析に行番号と、警告の原因となった分析ロジックが表示されます。 問題の解決策などの警告の詳細については、警告 ID を選択すると、そのメッセージに関する MSND ライブラリ内のヘルプ トピックが表示されます。  
  
 警告を展開すると、警告の原因となったコード行が Visual Studio Code エディターで強調表示されます。  
  
 問題を理解した後は、コード内で解決できます。 その後、コード分析に戻り、[コード分析] ウィンドウに警告が表示されなくなったことと、修正によって新たな警告が発生していないことを確認します。  
  
> [!TIP]
> コード分析は、[コード分析] ウィンドウから再実行できます。 [ **分析** ] ボタンをクリックし、分析の範囲を選択します。 ソリューション全体または選択したプロジェクトの分析を再実行できます。  
  
## <a name="suppressing-code-analysis-warnings"></a><a name="BKMK_Suppress"></a> コード分析警告の抑制  
 コード分析警告の修正を行わないことを決定する場合があります。 コードを実装したときの警告の発生確率と、警告を解決するためのコード変更の量を比較して、解決しないことを選択できます。 または、警告で使用された分析が特定のコンテキストでは不適切であると判断できます。 個々の警告を抑制して、[コード分析] ウィンドウに表示されないように設定できます。  
  
 警告を抑制するには:  
  
1. 詳細情報が表示されない場合は、警告のタイトルを選択して展開します。  
  
2. 警告の下部にある [**アクション**] リンクをクリックします。  
  
3. [ **メッセージの非** 表示] をクリックし、[ **ソース内**] を選択します。  
  
   メッセージを非表示にすると、 `#pragma warning (disable:` *WarningId* `)` コード行の警告を抑制する警告 id が挿入されます。  
  
## <a name="creating-work-items-for-code-analysis-warnings"></a><a name="BKMK_Creating_work_items_for_code_analysis_warnings"></a> コード分析警告用の作業項目の作成  
 作業項目トラッキング機能を使用して、Visual Studio 内からバグをログに記録できます。 この機能を使用するには、Team Foundation Server のインスタンスに接続する必要があります。  
  
 **1 つ以上の C/C++ コード警告用に作業項目を作成するには**  
  
1. [コード分析] ウィンドウで、警告を展開して選択します。  
  
2. 警告のショートカットメニューで、[ **作業項目の作成**] を選択し、作業項目の種類を選択します。  
  
3. 選択された警告に対して作業項目が 1 つ作成され、IDE のドキュメント ウィンドウに作業項目が表示されます。  
  
4. 追加情報を追加し、[ **作業項目の保存**] を選択します。  
  
## <a name="searching-and-filtering-code-analysis-results"></a><a name="BKMK_Search"></a> コード分析結果の検索とフィルター処理  
 警告メッセージの長い一覧の検索と、複数のプロジェクトから成るソリューションの警告をフィルター処理できます。  
  
1. **タイトルまたは警告 id で警告をフィルター処理するに**は、[ **フィルター** ] テキストボックスにキーワードを入力します。  
  
2. **プロジェクト別に警告をフィルター処理するに**は: 複数のプロジェクトから成るソリューションで、[コード分析] ウィンドウの右上にある一覧で1つ以上のプロジェクトを選択します。 すべての警告を表示するには、ソリューション名を選択します。  
  
3. **警告を重要度順にフィルター処理する**: 既定では、コード分析メッセージには **警告**の重大度が割り当てられます。 1つまたは複数のメッセージの重大度を、カスタム規則セットの **エラー** として割り当てることができます。 **警告**または**エラー**のいずれかを選択して、それぞれの重要度が割り当てられているメッセージのみを表示します。 すべてのメッセージを表示するには、[ **すべて** ] を選択します。
