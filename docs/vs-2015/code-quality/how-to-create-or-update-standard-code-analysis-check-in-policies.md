---
title: '方法: 標準コード分析チェックインポリシーを作成または更新します。Microsoft Docs'
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-code-analysis
ms.topic: conceptual
f1_keywords:
- vs.codeanalysis.policyeditor
helpviewer_keywords:
- code analysis, migrating check-in policy
ms.assetid: 458eb3b8-bb5e-4056-82b7-7079ce9c4089
caps.latest.revision: 31
author: jillre
ms.author: jillfra
manager: wpickett
ms.openlocfilehash: 5e8016032a0ea8d1b8c62b2dfc2bbdf72251590c
ms.sourcegitcommit: a8e8f4bd5d508da34bbe9f2d4d9fa94da0539de0
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/19/2019
ms.locfileid: "72661778"
---
# <a name="how-to-create-or-update-standard-code-analysis-check-in-policies"></a>方法: 標準のコード分析チェックイン ポリシーを作成または更新する
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

コード分析のチェックインポリシーを使用して、チームプロジェクトのすべてのコードプロジェクトでコード分析を実行するように要求できます。 コード分析が必要な場合は、コードベースにチェックインされるコードの品質を向上させることができます。

> [!NOTE]
> この機能は、Team Foundation Server を使用している場合にのみ使用できます。

 コード分析チェックインポリシーは、チームプロジェクトの設定で設定され、チームプロジェクトの各コードプロジェクトに適用されます。 コード分析の実行は、コードプロジェクトのプロジェクト (. proj) ファイルのコードプロジェクトに対して構成されます。 コード分析の実行は、ローカルコンピューター上で実行されます。 コード分析のチェックインポリシーを有効にする場合、チェックインするコードプロジェクト内のファイルは、最後の編集の後にコンパイルする必要があります。また、少なくとも、チームプロジェクト設定の規則は、c が含まれているコンピューターで実行する必要があります。h) が作成されました。

- マネージコードの場合は、コード分析規則のサブセットを含む*規則セット*を指定して、チェックインポリシーを設定します。

- C/C++コードの場合、チェックインポリシーでは、すべてのコード分析規則が実行されている必要があります。 事前プロセッサディレクティブを追加して、チームプロジェクト内の個々のコードプロジェクトの特定の規則を無効にすることができます。

  マネージコードのチェックインポリシーを指定すると、チームメンバーは、コードプロジェクトのコード分析設定をチームプロジェクトポリシー設定と同期させることができます。

### <a name="to-open-the-check-in-policy-editor"></a>チェックインポリシーエディターを開くには

1. チームエクスプローラーで、チームプロジェクト名を右クリックし、 **[チームプロジェクトの設定]** をポイントして、 **[ソース管理]** をクリックします。

2. **[ソース管理]** ダイアログボックスで、 **[チェックインポリシー]** タブを選択します。

3. 次のいずれかの操作を行います。

    - **[追加]** をクリックして、新しいチェックインポリシーを作成します。

    - **[ポリシーの種類]** ボックスの一覧の既存の**コード分析**項目をダブルクリックして、ポリシーを変更します。

### <a name="to-set-policy-options"></a>ポリシーオプションを設定するには

- 次のオプションをオンまたはオフにします。

    |オプション|説明|
    |------------|-----------------|
    |**現在のソリューションの一部であるファイルのみを含めるようにチェックインを強制します。**|コード分析は、ソリューションおよびプロジェクト構成ファイルで指定されたファイルに対してのみ実行できます。 このポリシーは、ソリューションの一部であるすべてのコードが分析されることを保証します。|
    |**C/C++コード分析 (/analyze) を適用する**|をチェックインする前にC++ 、コード分析を実行するために、すべての C またはプロジェクトが/analyze コンパイラオプションを使用してビルドされている必要があります。|
    |**マネージコードのコード分析を強制する**|では、すべてのマネージプロジェクトをチェックインする前に、コード分析とビルドを実行する必要があります。|

-

### <a name="to-specify-a-managed-rule-set"></a>マネージド規則セットを指定するには

- [**この規則セットを実行**する] の一覧で、次のいずれかの方法を使用します。

  - Microsoft 標準規則セットを選択してください。

  - カスタム規則セットを選択するには、**ソース管理から規則セットを \<Select をクリックします。>** をクリックし、ソース管理ブラウザーで規則セットのバージョンコントロールパスを入力します。 バージョンコントロールパスの構文は次のとおりです。

  - **$/** `TeamProjectName` **/** `VersionControlPath`

  - カスタムチェックインポリシー規則セットを作成して実装する方法の詳細については、「[マネージコードのカスタムチェックインポリシーの実装](../code-quality/implementing-custom-code-analysis-check-in-policies-for-managed-code.md)」を参照してください。

## <a name="see-also"></a>関連項目
 [コード分析を用いたチェックイン ポリシーの作成と使用](../code-quality/creating-and-using-code-analysis-check-in-policies.md)
