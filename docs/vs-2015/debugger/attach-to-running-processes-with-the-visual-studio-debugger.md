---
title: Visual Studio デバッガーで実行中のプロセスのアタッチ |Microsoft Docs
ms.custom: ''
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.reviewer: ''
ms.suite: ''
ms.technology:
- vs-ide-debug
ms.tgt_pltfrm: ''
ms.topic: article
f1_keywords:
- vs.debug.processes.attach
- vs.debug.process
- vs.debug.programs
- vs.debug.detaching
- vs.debug.processes
- vs.debug.error.attach
- vs.debug.remotemachine
dev_langs:
- C++
- CSharp
- FSharp
- VB
- c++
helpviewer_keywords:
- remote debugging, attaching to programs
- processes, attaching to running processes
- Attach to Process dialog box
- debugging [Visual Studio], attaching to processes
- debugger, processes
ms.assetid: 27900e58-090c-4211-a309-b3e1496d5824
caps.latest.revision: 62
author: MikeJo5000
ms.author: mikejo
manager: ghogen
ms.openlocfilehash: 5ca0b2e1ada7e91f5f32f29aba8e89ffc26ac629
ms.sourcegitcommit: af428c7ccd007e668ec0dd8697c88fc5d8bca1e2
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/16/2018
ms.locfileid: "51783085"
---
# <a name="attach-to-running-processes-with-the-visual-studio-debugger"></a>実行中のプロセスへのアタッチ
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

ローカルまたはリモート コンピューターで実行中のプロセスに、Visual Studio デバッガーをアタッチできます。 プロセスを実行すると後でクリックして**デバッグ/プロセスにアタッチ**(またはキーを押します**CTRL + ALT + P**) を開く、**プロセスにアタッチ** ダイアログ ボックス。 

この機能を使用すると、ローカルまたはリモート コンピューターで実行されているアプリのデバッグ、同時に、複数のプロセスをデバッグまたは Visual Studio で作成されていないアプリケーションをデバッグすることができます。 アプリをデバッグするときに多くの場合に便利ですが (なんらかの理由により) を起動していないアプリから Visual Studio でデバッガーをアタッチします。 たとえば、デバッガーなしのアプリを実行するいるし、例外が発生すると、する可能性がありますし、プロセスにアタッチ、デバッグを開始するアプリを実行しています。

> [!TIP]
> わからない場合は、かどうかを使用する必要が**プロセスにアタッチ**デバッグ シナリオのでしょうか。 参照してください[デバッグ シナリオ共通](#BKMK_Scenarios)します。 IIS に配置されている、参照される ASP.NET アプリケーションをデバッグする場合[リモート IIS コンピューター上の Remote Debugging ASP.NET](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md)します。

##  <a name="BKMK_Attach_to_a_running_process"></a> ローカル コンピューターで実行中のプロセスにアタッチします。  
 プロセスにアタッチするには、プロセスの名前を知る必要があります (を参照してください[デバッグ シナリオ共通](#BKMK_Scenarios)のいくつかの一般的なプロセス名)。
  
1.  Visual Studio で、次のように選択します。**デバッグ]/[プロセスにアタッチ**(またはキーを押します**CTRL + ALT + P**)。
  
2.  **[プロセスにアタッチ]** ダイアログ ボックスの **[選択可能なプロセス]** ボックスの一覧で、アタッチするプログラムを探します。  

     簡単にプロセスを選択するには、プロセス名の最初の文字を入力します。 プロセス名がわからない場合は、次を参照してください。[デバッグ シナリオ共通](#BKMK_Scenarios)します。
     
     ![DBG_Basics_Attach_To_Process](../debugger/media/dbg-basics-attach-to-process.png "DBG_Basics_Attach_To_Process") 
  
     プロセスが別のユーザー アカウントで実行されている場合は、 **[すべてのユーザーからのプロセスを表示する]** チェック ボックスをオンにします。
  
3.  **[アタッチ先]** ボックスに、デバッグするコードの種類が表示されていることを確認します。 既定の **[自動]** 設定では、デバッグするコードの種類が自動的に判断されます。 コードの種類を手動で設定するには、次の操作を行います  
  
    1.  **[プロセスにアタッチ]** ボックスで、 **[選択]** をクリックします。  
  
    2.  **[コードの種類の選択]** ダイアログ ボックスで、 **[次のコードの種類をデバッグする]** をクリックし、デバッグする種類を選択します。  
  
    3.  **[OK]** をクリックします。  
  
4.  **[アタッチ]** をクリックします。

##  <a name="BKMK_Attach_to_a_process_on_a_remote_computer"></a> リモート コンピューター上のプロセスにアタッチします。  
 プロセスにアタッチするには、プロセスの名前を知る必要があります (を参照してください[デバッグ シナリオ共通](#BKMK_Scenarios)のいくつかの一般的なプロセス名)。 IIS に配置された ASP.NET アプリのより詳細なガイダンスについては、次を参照してください。[リモート IIS コンピューター上の Remote Debugging ASP.NET](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md)します。 他のアプリについては、タスク マネージャーで、プロセスの名前を検索できる場合があります。
  
 **[プロセスにアタッチ]** ダイアログ ボックスでは、リモート デバッグ用にセットアップした他のコンピューターを選択できます。 詳細については、次を参照してください。[リモート デバッグ](http://msdn.microsoft.com/library/90f45630-0d26-4698-8c1f-63f85a12db9c)します。 リモート コンピューターを選択すると、そのコンピューターで実行されている選択可能なプロセスの一覧を表示して、1 つ以上のプロセスにアタッチしてデバッグを実行できます。
  
 **リモート コンピューターを選択します。**  

1. Visual Studio で、次のように選択します。**デバッグ]/[プロセスにアタッチ**(またはキーを押します**CTRL + ALT + P**)。

2. **[プロセスにアタッチ]** ダイアログ ボックスの **[トランスポート]** ボックスの一覧で、該当する接続の種類を選択します。 **[既定値]** は、ほとんどの場合に適切な設定です。

   **[トランスポート]** の設定は、デバッグ セッション間で保持されます。 
  
3. **[修飾子]** ボックスの一覧でリモート コンピューター名を選択します。以下のいずれかの方法を使用します。  
  
   1. **[修飾子]** ボックスの一覧に名前を入力します。
    
      >**注**場合、後の手順では、リモート コンピューター名を使用してを接続することはできません、IP アドレスを使用します。 (ポート番号が自動的に表示、プロセスを選択した後。 手動で入力することもできます。 次の図では、4020 はリモート デバッガーの既定のポート) です。  
  
   2. **[修飾子]** ボックスの一覧の横のドロップダウン矢印をクリックし、一覧でコンピューター名を選択します。  
  
   3. をクリックして、**検索**横に、**修飾子**を開く ボックスの一覧、**リモート デバッガー接続の選択** ダイアログ ボックス。 **[リモート デバッガー接続の選択]** ダイアログ ボックスには、ローカル サブネット上にあるデバイスと、イーサネット ケーブルで自分のコンピューターに直接接続されているデバイスがすべて表示されます。 目的のコンピューターまたはデバイスをクリックし、 **[選択]** をクリックします。 
  
      **[修飾子]** の設定は、その修飾子でデバッグ接続が成功した場合のみ、デバッグ セッション間で保持されます。
     
4. クリックして**更新**します。

     **[プロセス]** ダイアログ ボックスを開くと、 **[選択可能なプロセス]** ボックスが自動的に表示されます。 このダイアログ ボックスが開いている間に、プロセスをバックグラウンドで開始および停止できます。 このため、内容が常に最新であるとは限りません。 **[更新]** をクリックすると、いつでも一覧の内容を更新して、現在のプロセス一覧を確認できます。 
     
5. **[プロセスにアタッチ]** ダイアログ ボックスの **[選択可能なプロセス]** ボックスの一覧で、アタッチするプログラムを探します。  
  
    プロセスが別のユーザー アカウントで実行されている場合は、 **[すべてのユーザーからのプロセスを表示する]** チェック ボックスをオンにします。
     
6. **[アタッチ]** をクリックします。  

## <a name="additional-info"></a>追加情報

デバッグ中には複数のプログラムにアタッチできますが、デバッガーでアクティブになっているプログラムは常に 1 つだけです。 アクティブなプログラムは、 **[デバッグの場所]** ツール バーまたは **[プロセス]** ウィンドウで設定できます。 詳細については、「 [方法 : 現在のプロセスを設定する](http://msdn.microsoft.com/en-us/7e1d7fa5-0e40-44cf-8c41-d3dba31c969e)」を参照してください。  
  
信頼関係のないユーザー アカウントによって所有されているプロセスにアタッチしようとすると、セキュリティ警告の確認ダイアログ ボックスが表示されます。 詳細については、次を参照してください。[セキュリティ警告: 信頼されていないユーザーによって所有されているプロセスにアタッチするのは危険です。次の情報に関して疑わしい、または不明ながこのプロセスにアタッチしない](../debugger/security-warning-attaching-to-a-process-owned-by-an-untrusted-user-can-be-dangerous-if-the-following-information-looks-suspicious-or-you-are-unsure-do-not-attach-to-this-process.md)します。  
  
リモート デスクトップ (ターミナル サービス) セッションでのデバッグ時には、 **[選択可能なプロセス]** ボックスに、使用可能なプロセスのすべてが表示されない場合があります。 Visual Studio を、制限付きユーザー アカウントを持つユーザーとして実行している場合、 **[選択可能なプロセス]** ボックスの一覧には、セッション 0 で実行しているプロセスは表示されません。セッション 0 は、サービスおよび w3wp.exe を含むその他のサーバー プロセス用に使用されます。 この問題を解決するには、管理者アカウントで [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] を実行するか、ターミナル サービス セッションからではなくサーバー コンソールから [!INCLUDE[vsprvs](../includes/vsprvs-md.md)] を実行します。 どちらの方法も実行できない場合、3 つ目の方法として、Windows コマンド ラインから `vsjitdebugger.exe -p` *ProcessId* を実行することによって、プロセスにアタッチできます。 プロセス ID は tlist.exe を使用して確認できます。 tlist.exe を入手するには、「  [WDK と WinDbg のダウンロード](http://go.microsoft.com/fwlink/?LinkId=168279)」で Windows 対応のデバッグ ツールをダウンロードし、インストールします。

## <a name="BKMK_Scenarios"></a> 一般的なデバッグ シナリオ

使用する必要があるかどうかを識別するのに役立つ**プロセスにアタッチ**、アタッチするには、どのようなプロセスといくつかの一般的なデバッグ シナリオを次に示します (一覧は完全ではありません)。 詳細な手順については、使用可能なリンクを提供します。

(Windows ストア アプリ) のようなアプリの種類によって、プロセス名に直接接続せず、使用、**インストール済みアプリ パッケージのデバッグ**メニュー オプションを使用 (テーブルを参照してください)。

> [!NOTE]
> Visual Studio で基本的なデバッグ方法の詳細については、次を参照してください。[デバッガーの概要](../debugger/getting-started-with-the-debugger.md)します。

|シナリオ|メソッドをデバッグします。|プロセス名|メモとリンク|
|-|-|-|-|
|ローカル コンピューター上のマネージまたはネイティブ アプリをデバッグします。|使用がプロセスにアタッチまたは[標準デバッグ](../debugger/getting-started-with-the-debugger.md)|*appname*.exe|ダイアログ ボックスにすばやくアクセスするには、使用**CTRL + ALT + P**し、プロセス名の最初の文字を入力します。|
|デバッガーなしのアプリを起動した後、ローカル コンピューター上の ASP.NET アプリをデバッグします。|使用がプロセスにアタッチします。|iiexpress.exe|これは、アプリをロードすると便利な可能性がありますより高速など (たとえば) プロファイリングを行う場合。 |
|ASP.NET 4 のリモート デバッグまたは IIS サーバー上の 4.5|リモート ツールを使用して、プロセスにアタッチします。|w3wp.exe|参照してください[Remote Debugging ASP.NET on リモート IIS コンピューター](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md)|
|ASP.NET Core、IIS サーバー上のリモート デバッグ|リモート ツールを使用して、プロセスにアタッチします。|dnx.exe|アプリの展開を参照してください。 [Publish to IIS](https://docs.asp.net/en/latest/publishing/iis.html)します。 デバッグについては、次を参照してください[Remote Debugging ASP.NET on リモート IIS コンピューター。](../debugger/remote-debugging-aspnet-on-a-remote-iis-7-5-computer.md)|
|サーバー プロセスでその他のサポートされているアプリの種類をデバッグします。|(リモート サーバーの場合)、リモート ツールを使用して、プロセスにアタッチします。|iexplore.exe または他のプロセス|必要に応じて、タスク マネージャーを使用して、プロセスを識別できるようにします。 参照してください[リモート デバッグ](../debugger/remote-debugging.md)と以降のセクションでは、このトピックの「|
|Windows デスクトップ アプリのリモート デバッグ|リモート ツールと、f5 キー|N/A| 参照してください[リモート デバッグ](../debugger/remote-debugging.md)|
|Windows ユニバーサル (UWP) や OneCore、HoloLens、IoT アプリのリモート デバッグします。|インストールされているアプリ パッケージをデバッグします。|N/A|使用**デバッグ/その他のターゲットをデバッグ]/[インストール済みアプリ パッケージをデバッグ**の代わりに**プロセスにアタッチします。**|
|Visual Studio から起動していない、Windows ユニバーサル (UWP) や OneCore、HoloLens、IoT アプリをデバッグします。|インストールされているアプリ パッケージをデバッグします。|N/A|使用**デバッグ/その他のターゲットをデバッグ]/[インストール済みアプリ パッケージをデバッグ**の代わりに**プロセスにアタッチします。**|
  
> [!WARNING]
>  JavaScript で記述された Windows ユニバーサル アプリにアタッチするには、まずそのアプリに対してデバッグを有効にする必要があります。 Windows デベロッパー センター内の「 [Attach the debugger](../debugger/start-a-debugging-session-for-store-apps-in-visual-studio-javascript.md#BKMK_Attach_the_debugger) 」をご覧ください。  
  
> [!NOTE]
>  C++ で記述されたコードにデバッガーをアタッチするには、コードが `DebuggableAttribute`を生成する必要があります。 [/ASSEMBLYDEBUG](http://msdn.microsoft.com/library/94443af3-470c-41d7-83a0-7434563d7982) リンカー オプションを使ってリンクすると、これを自動的にコードに追加できます。

## <a name="what-debugger-features-can-i-use"></a>どのようなデバッガー機能を使用できますか。

Visual Studio デバッガー (ブレークポイントにヒット) などの完全な機能を使用する実行可能ファイルのローカル ソースとシンボルする必要があります正確に一致プロセスにアタッチ、するときに (つまり、デバッガーが、正しいを読み込むことにある必要があります[シンボル (.pbd) ファイル](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)). 既定では、デバッグ ビルドが必要です。

リモートのデバッグ シナリオには、Visual Studio で開いているソース コード (または、ソース コードのコピー) が必要です。 リモート コンピューター上でコンパイル済みのアプリ バイナリをローカル コンピューター上と同じビルドからあります。

いくつかのローカル デバッグ シナリオでデバッグできます Visual Studio で、ソースへのアクセスなしで、適切なシンボル ファイルがアプリに存在する場合 (既定では、これが必要、デバッグ ビルド)。 詳細については、次を参照してください。[指定シンボルとソース ファイル](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)します。
  
##  <a name="BKMK_Troubleshoot_attach_errors"></a> トラブルシューティング: アタッチ エラー  
 実行中のプロセスにデバッガーがアタッチすると、このプロセスは、1 種類以上のコードを含むことができます。 デバッガーをアタッチできるコードの種類は **[コードの種類の選択]** ダイアログ ボックスで表示されて選択されています。  
  
 デバッガーは、ある種類のコードに正常にアタッチできても、別の種類にはアタッチできないことがあります。 この問題は、リモート コンピューターで動作しているプロセスにアタッチしようとする場合に発生することがあります。 リモート コンピューターには、一部の種類のコードにしか対応しないリモート デバッグ コンポーネントがインストールされている場合があるためです。 また、ダイレクト データベース デバッグのために複数のプロセスにアタッチしようとした場合にも発生することがあります。 SQL デバッグ機能は、単一プロセスへのアタッチのみをサポートします。  
  
 デバッガーが一部の種類のコードにしかアタッチできない場合は、アタッチできなかった種類を識別するメッセージが表示されます。  
  
 デバッガーが少なくとも 1 種類のコードに正常にアタッチできる場合は、プロセスのデバッグを開始できます。 正常にアタッチされたコードの種類のみをデバッグできます。 上記のメッセージの例は、種類がスクリプトのコードにアタッチできなかったことを示しています。 この場合、プロセス内でスクリプト コードをデバッグできません。 プロセス内のスクリプト コードはそのまま実行されますが、スクリプトでのブレークポイントの設定、データの表示、またはその他のデバッグ操作は実行できません。  
  
 デバッガーがコードの種類へのアタッチに失敗した理由についてより詳しい情報が必要な場合は、該当するコードの種類のみに再アタッチを試行できます。  
  
 **コードの種類をアタッチが失敗した理由に関する特定の情報を取得するには**  
  
1. プロセスからデタッチします。 **[デバッグ]** メニューの **[すべてデタッチ]** をクリックします。  
  
2. コードの種類を 1 つだけ選択して、プロセスに再度アタッチします。  
  
   1. **[プロセスにアタッチ]** ダイアログ ボックスの **[選択可能なプロセス]** ボックスの一覧で、プロセスを選択します。  
  
   2. **[選択]** をクリックします。  
  
   3. **[コードの種類の選択]** ダイアログ ボックスの **[次のコードの種類をデバッグする]** をクリックし、アタッチに失敗したコードの種類を選択します。 他のコードをすべてオフにします。  
  
   4. **[OK]** をクリックします。 **[コードの種類の選択]** ダイアログ ボックスが閉じます。  
  
   5. **[プロセスにアタッチ]** ダイアログ ボックスで、 **[アタッチ]** をクリックします。  
  
      このとき、アタッチは完全に失敗し、詳細なエラー メッセージが表示されます。  
  
## <a name="see-also"></a>関連項目  
 [複数のプロセスをデバッグします。](../debugger/debug-multiple-processes.md)   
 [ジャストイン タイムのデバッグ](../debugger/just-in-time-debugging-in-visual-studio.md)   
 [Remote Debugging](../debugger/remote-debugging.md)



