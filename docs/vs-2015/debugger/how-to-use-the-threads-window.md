---
title: '方法: [スレッド] ウィンドウを使用する |Microsoft Docs'
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-debug
ms.topic: conceptual
f1_keywords:
- vs.debug.threads
dev_langs:
- FSharp
- VB
- CSharp
- C++
helpviewer_keywords:
- threading [Visual Studio], debugging
- Thread.Name property
- debugger, Threads window
- SetThreadName function
- Threads window
- '@TIB'
- debugging [Visual Studio], threads
ms.assetid: adfbe002-3d7b-42a9-b42a-5ac0903dfc25
caps.latest.revision: 48
author: MikeJo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: da41524fcb231ea399dbbd2a2904afd935e5c4f8
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/02/2020
ms.locfileid: "67824257"
---
# <a name="how-to-use-the-threads-window"></a>方法 : [スレッド] ウィンドウを使用する
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

[ **スレッド** ] ウィンドウでは、デバッグ中のアプリケーション内のスレッドを調べて操作できます。  
  
 [ **スレッド** ] ウィンドウには、各行がアプリケーションのスレッドを表すテーブルが含まれています。 既定では、このテーブルにはアプリケーション内のすべてのスレッドが表示されますが、目的のスレッドのみを表示するように一覧にフィルターをかけることができます。 各列には、さまざまな種類の情報が表示されます。 一部の列は非表示にすることもできます。 すべての列を表示する場合、次の情報が左から右へ表示されます。  
  
- フラグ列。特に注意する必要のあるスレッドをマークすることができます。 スレッドにフラグを付ける方法については、「 [方法: スレッドにフラグを](../debugger/how-to-flag-and-unflag-threads.md)付ける」と「フラグを解除する」を参照してください。  
  
- アクティブ スレッド列。黄色の矢印によってアクティブ スレッドであることが示されます。 矢印のアウトラインは、実行がデバッガーに割り込んだスレッドを示します。  
  
- **Id**列。各スレッドの識別番号が含まれています。  
  
- [ **マネージ id** ] 列。マネージスレッドのマネージ識別番号が含まれています。  
  
- [ **カテゴリ** ] 列。スレッドをユーザーインターフェイススレッド、リモートプロシージャコールハンドラー、またはワーカースレッドとして分類します。 アプリケーションのメイン スレッドは特別なカテゴリによって示されます。  
  
- **Name**列。各スレッドが名前で識別されるか、またはとして識別され \<No Name> ます。  
  
- [ **場所** ] 列。スレッドが実行されている場所を示します。 この場所を展開して、スレッドの呼び出し履歴全体を表示できます。  
  
- **Priority**列。システムが各スレッドに割り当てた優先度または優先順位が含まれています。  
  
- **Affinity Mask**列。通常は非表示になっている高度な列です。 この列には、各スレッドのプロセッサ関係マスクが表示されます。 マルチプロセッサ システムでは、関係マスクによって、スレッドを実行できるプロセッサが決まります。  
  
- [ **中断カウント** ] 列。中断カウントが含まれています。 このカウントによって、スレッドを実行できるかどうかが決まります。 中断カウントの詳細については、このトピックの「スレッドの凍結と凍結解除」を参照してください。  
  
- [ **プロセス名** ] 列。各スレッドが属するプロセスが含まれます。 この列は、複数のプロセスをデバッグするときに便利ですが、通常は非表示です。  
  
### <a name="to-display-the-threads-window-in-break-mode-or-run-mode"></a>中断モードまたは実行モードで [スレッド] ウィンドウを表示するには  
  
- [ **デバッグ** ] メニューの [ **ウィンドウ**] をポイントし、[ **スレッド**] をクリックします。  
  
### <a name="to-display-or-hide-a-column"></a>列の表示と非表示を切り替えるには  
  
- [ **スレッド** ] ウィンドウの上部にあるツールバーで、[ **列**] をクリックし、表示または非表示にする列の名前をオンまたはオフにします。  
  
### <a name="to-switch-the-active-thread"></a>アクティブ スレッドを切り替えるには  
  
- 次のいずれかの操作を実行します。  
  
  - 任意のスレッドをダブルクリックします。  

  - スレッドを右クリックし、[ **スレッドに切り替え] を**クリックします。  

    新しいアクティブ スレッドの横に黄色の矢印が表示されます。 矢印の灰色のアウトラインは、実行がデバッガーに割り込んだスレッドを示します。  
  
## <a name="grouping-and-sorting-threads"></a>スレッドのグループ化と並べ替え  
 スレッドをグループ化すると、グループごとに、見出しがテーブルに表示されます。 見出しには、"ワーカー スレッド" や "フラグが解除されたスレッド" などのグループの説明、およびツリー コントロールが表示されます。 各グループのメンバー スレッドは、そのグループの見出しの下に表示されます。 グループのメンバー スレッドを非表示にするには、ツリー コントロールを使用して、グループを折りたたみます。  
  
 グループ化は並べ替えよりも優先されるので、たとえば、カテゴリ別にスレッドをグループ化してから、各カテゴリ内で ID によってグループを並べ替えることができます。  
  
#### <a name="to-sort-threads"></a>スレッドを並べ替えるには  
  
1. [ **スレッド** ] ウィンドウの上部にあるツールバーで、任意の列の上部にあるボタンをクリックします。  
  
     スレッドがその列の値で並べ替えられます。  
  
2. 並べ替え順序を逆にするには、同じボタンをもう一度クリックします。  
  
     一覧の一番上に表示されていたスレッドが一番下に表示されます。  
  
#### <a name="to-group-threads"></a>スレッドをグループ化するには  
  
- [ **スレッド** ] ウィンドウのツールバーで、[ **グループ化** ] ボックスをクリックし、スレッドをグループ化する条件をクリックします。  
  
#### <a name="to-sort-threads-within-groups"></a>グループ内でスレッドを並べ替えるには  
  
1. [ **スレッド** ] ウィンドウの上部にあるツールバーで、[ **グループ化** ] ボックスをクリックし、スレッドをグループ化する条件をクリックします。  
  
2. [ **スレッド** ] ウィンドウで、任意の列の上部にあるボタンをクリックします。  
  
     スレッドがその列の値で並べ替えられます。  
  
#### <a name="to-expand-or-collapse-all-groups"></a>すべてのグループの展開または折りたたみを行うには  
  
- [ **スレッド** ] ウィンドウの上部にあるツールバーで、[ **グループの展開** ] または [グループの **折りたたみ**] をクリックします。  
  
## <a name="searching-for-specific-threads"></a>特定のスレッドの検索  
 [!INCLUDE[vs_dev11_long](../includes/vs-dev11-long-md.md)] では、指定した文字列に一致するスレッドを検索できます。 [ **スレッド** ] ウィンドウでスレッドを検索すると、任意の列の検索文字列に一致するすべてのスレッドがウィンドウに表示されます。 この情報には、[ **場所** 列の呼び出し履歴の一番上に表示されるスレッドの場所が含まれます。 ただし、既定では、呼び出し履歴全体は検索されません。  
  
#### <a name="to-search-for-specific-threads"></a>特定のスレッドを検索するには  
  
- **[スレッド]** ウィンドウの上部にあるツール バーで、 **[検索]** ボックスに移動し、次のどちらかの操作を実行します。  
  
  - 検索文字列を入力し、Enter キーを押します。  

    \- または  

  - **検索**ボックスの横にあるドロップダウンリストをクリックし、前の検索で検索する文字列を選択します。  
  
- (省略可能) 呼び出し履歴全体を検索の対象にするには、 **[呼び出し履歴の検索]** をクリックします。  
  
## <a name="freezing-and-thawing-threads"></a>スレッドの凍結と凍結解除  
 スレッドを凍結すると、利用できるリソースがあっても、そのスレッドの実行は開始されません。  
  
 ネイティブコードでは、Windows の関数、 `SuspendThread` `ResumeThread` または MFC 関数の [Cwinthread:: SuspendThread](https://msdn.microsoft.com/library/57189c7e-fd71-42e5-bc4b-3de7cd373d28) と [cwinthread:: ResumeThread](https://msdn.microsoft.com/library/d6f97a2f-5c9f-4ee1-b978-d74938784db5)を呼び出すことによって、スレッドを中断または再開できます。 またはを呼び出した場合は、 `SuspendThread` `ResumeThread` [**スレッド**] ウィンドウに表示される*中断回数*を変更します。 ただし、ネイティブ スレッドを凍結または凍結解除しても、中断カウントは変わりません。 ネイティブ コードでは、凍結が解除され、中断カウントがゼロになるまで、スレッドは実行されません。  
  
 マネージド コードでは、スレッドの凍結または凍結解除によって中断カウントが変わります。 マネージド コードでは、凍結されたスレッドの中断カウントは 1 になります。 ネイティブ コードでは、スレッドが `SuspendThread` 呼び出しによって中断されている場合を除き、凍結されたスレッドの中断カウントは 0 です。  
  
> [!NOTE]
> ネイティブ コードからマネージド コードへの呼び出しをデバッグする場合、マネージド コードは呼び出し元のネイティブ コードと同じ物理スレッドで実行されます。 ネイティブ スレッドを中断または凍結すると、マネージド コードも凍結されます。  
  
#### <a name="to-freeze-or-thaw-execution-of-a-thread"></a>スレッドの実行を凍結または凍結解除するには  
  
- [ **スレッド** ] ウィンドウの上部にあるツールバーで、[ **スレッドの凍結** ] または [スレッドの **凍結**解除] をクリックします。  
  
     この操作は、 **[スレッド]** ウィンドウで選択されているスレッドのみに影響します。  
  
## <a name="displaying-flagged-threads"></a>フラグが設定されたスレッドの表示  
 **[スレッド]** ウィンドウでスレッドをアイコンでマークすることによって、特に注目するスレッドにフラグを設定できます。 詳細については、「 [方法: スレッドにフラグを](../debugger/how-to-flag-and-unflag-threads.md)付ける」と「フラグを解除する」を参照してください。 [スレッド] ウィンドウでは、すべてのスレッドを表示するか、フラグが設定されたスレッドのみ表示するかを選択できます。  
  
#### <a name="to-display-only-flagged-threads"></a>フラグが設定されたスレッドのみ表示するには  
  
- [ **スレッド** ] ウィンドウの左上隅にある [フラグ] ボタンをクリックします。  
  
## <a name="displaying-thread-call-stacks-and-switching-between-frames"></a>スレッドの呼び出し履歴の表示とフレームの切り替え  
 マルチスレッド プログラムでは、各スレッドに専用の呼び出し履歴があります。 **[スレッド]** ウィンドウには、これらの呼び出し履歴を表示する便利な手段が用意されています。  
  
#### <a name="to-view-the-call-stack-of-a-thread"></a>スレッドの呼び出し履歴を表示するには  
  
- [ **場所** ] 列で、スレッドの場所の横にある下向きの三角形をクリックします。  
  
     場所が展開されて、そのスレッドの呼び出し履歴が表示されます。  
  
#### <a name="to-view-or-collapse-the-call-stacks-of-all-threads"></a>すべてのスレッドの呼び出し履歴の表示と非表示を切り替えるには  
  
- [ **スレッド** ] ウィンドウの上部にあるツールバーで、[ **呼び出し履歴の展開** ] または [ **呼び出し履歴の折りたたみ**] をクリックします。  
  
## <a name="see-also"></a>参照  
 [マルチスレッドアプリケーションのデバッグ](../debugger/debug-multithreaded-applications-in-visual-studio.md)   
 [チュートリアル : マルチスレッド アプリケーションのデバッグ](../debugger/walkthrough-debugging-a-multithreaded-application.md)
