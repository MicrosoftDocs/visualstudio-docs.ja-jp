---
title: '方法: [スレッド] ウィンドウを使用して、|Microsoft Docs'
ms.custom: ''
ms.date: 2018-06-30
ms.prod: visual-studio-dev14
ms.reviewer: ''
ms.suite: ''
ms.technology:
- vs-ide-debug
ms.tgt_pltfrm: ''
ms.topic: article
f1_keywords:
- vs.debug.threads
dev_langs:
- FSharp
- VB
- CSharp
- C++
helpviewer_keywords:
- threading [Visual Studio], debugging
- Thread.Name property
- debugger, Threads window
- SetThreadName function
- Threads window
- '@TIB'
- debugging [Visual Studio], threads
ms.assetid: adfbe002-3d7b-42a9-b42a-5ac0903dfc25
caps.latest.revision: 48
author: mikejo5000
ms.author: mikejo
manager: ghogen
ms.openlocfilehash: b5004f437b55709bf6db0a59fc17b42894cc17e8
ms.sourcegitcommit: 55f7ce2d5d2e458e35c45787f1935b237ee5c9f8
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/22/2018
ms.locfileid: "47538163"
---
# <a name="how-to-use-the-threads-window"></a>方法 : [スレッド] ウィンドウを使用する
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

このトピックの最新バージョンをご覧[スレッド ウィンドウを使用してマルチ スレッド アプリのデバッグ](https://docs.microsoft.com/visualstudio/debugger/how-to-use-the-threads-window)します。  
  
**スレッド**ウィンドウを確認してデバッグしているアプリケーションのスレッドを使用します。  
  
 **スレッド**ウィンドウには、各行が、アプリケーション内のスレッドを表すテーブルが含まれています。 既定では、このテーブルにはアプリケーション内のすべてのスレッドが表示されますが、目的のスレッドのみを表示するように一覧にフィルターをかけることができます。 各列には、さまざまな種類の情報が表示されます。 一部の列は非表示にすることもできます。 すべての列を表示する場合、次の情報が左から右へ表示されます。  
  
-   フラグ列。特に注意する必要のあるスレッドをマークすることができます。 スレッドにフラグを設定する方法については、次を参照してください。[方法: フラグとスレッドのフラグを解除](../debugger/how-to-flag-and-unflag-threads.md)します。  
  
-   アクティブ スレッド列。黄色の矢印によってアクティブ スレッドであることが示されます。 矢印のアウトラインは、実行がデバッガーに割り込んだスレッドを示します。  
  
-   **ID**列は、各スレッドの id 番号が含まれています。  
  
-   **マネージ ID**列は、マネージ スレッドのマネージ識別番号が含まれています。  
  
-   **カテゴリ**列は、ユーザー インターフェイス スレッド、リモート プロシージャ コール ハンドラー、またはワーカー スレッドのスレッドを分類します。 アプリケーションのメイン スレッドは特別なカテゴリによって示されます。  
  
-   **名前**列は、名前で、1 つがある場合、各スレッドを識別する\<No Name >。  
  
-   **場所**列で、スレッドが実行されているが表示されます。 この場所を展開して、スレッドの呼び出し履歴全体を表示できます。  
  
-   **優先度**列は、優先度またはシステムが各スレッドに割り当てられている優先順位が含まれています。  
  
-   **Affinity Mask**列は、非表示には、通常は高度な列です。 この列には、各スレッドのプロセッサ関係マスクが表示されます。 マルチプロセッサ システムでは、関係マスクによって、スレッドを実行できるプロセッサが決まります。  
  
-   **中断回数**列は、中断カウントが含まれています。 このカウントによって、スレッドを実行できるかどうかが決まります。 中断カウントの詳細については、このトピックの「スレッドの凍結と凍結解除」を参照してください。  
  
-   **プロセス名**列は、各スレッドが所属するプロセスが含まれています。 この列は、複数のプロセスをデバッグするときに便利ですが、通常は非表示です。  
  
### <a name="to-display-the-threads-window-in-break-mode-or-run-mode"></a>中断モードまたは実行モードで [スレッド] ウィンドウを表示するには  
  
-   **デバッグ**メニューで、 **Windows**、 をクリックし、**スレッド**します。  
  
### <a name="to-display-or-hide-a-column"></a>列の表示と非表示を切り替えるには  
  
-   上部にあるツールバーで、**スレッド**ウィンドウで、をクリックして**列**を選択または表示/非表示にする列の名前をオフにします。  
  
### <a name="to-switch-the-active-thread"></a>アクティブ スレッドを切り替えるには  
  
-   次のいずれかの操作を実行します。  
  
    -   任意のスレッドをダブルクリックします。  
  
    -   スレッドを右クリックし、をクリックして**スレッドに切り替える**します。  
  
         新しいアクティブ スレッドの横に黄色の矢印が表示されます。 矢印の灰色のアウトラインは、実行がデバッガーに割り込んだスレッドを示します。  
  
## <a name="grouping-and-sorting-threads"></a>スレッドのグループ化と並べ替え  
 スレッドをグループ化すると、グループごとに、見出しがテーブルに表示されます。 見出しには、"ワーカー スレッド" や "フラグが解除されたスレッド" などのグループの説明、およびツリー コントロールが表示されます。 各グループのメンバー スレッドは、そのグループの見出しの下に表示されます。 グループのメンバー スレッドを非表示にするには、ツリー コントロールを使用して、グループを折りたたみます。  
  
 グループ化は並べ替えよりも優先されるので、たとえば、カテゴリ別にスレッドをグループ化してから、各カテゴリ内で ID によってグループを並べ替えることができます。  
  
#### <a name="to-sort-threads"></a>スレッドを並べ替えるには  
  
1.  上部のツールバーで、**スレッド**ウィンドウで、任意の列の上部にあるボタンをクリックします。  
  
     スレッドがその列の値で並べ替えられます。  
  
2.  並べ替え順序を逆にするには、同じボタンをもう一度クリックします。  
  
     一覧の一番上に表示されていたスレッドが一番下に表示されます。  
  
#### <a name="to-group-threads"></a>スレッドをグループ化するには  
  
-   **スレッド**ウィンドウのツールバーでをクリックして、 **Group by**し、スレッドのグループ化する条件をクリックします。  
  
#### <a name="to-sort-threads-within-groups"></a>グループ内でスレッドを並べ替えるには  
  
1.  上部にあるツールバーで、**スレッド**ウィンドウで、をクリックして、 **Group by**し、スレッドのグループ化する条件をクリックします。  
  
2.  **スレッド**ウィンドウで、任意の列の上部にあるボタンをクリックします。  
  
     スレッドがその列の値で並べ替えられます。  
  
#### <a name="to-expand-or-collapse-all-groups"></a>すべてのグループの展開または折りたたみを行うには  
  
-   上部のツールバーで、**スレッド**ウィンドウで、をクリックして**展開グループ**または**グループの折りたたみ**。  
  
## <a name="searching-for-specific-threads"></a>特定のスレッドの検索  
 [!INCLUDE[vs_dev11_long](../includes/vs-dev11-long-md.md)] では、指定した文字列に一致するスレッドを検索できます。 内のスレッドを検索するときに、**スレッド**ウィンドウで、ウィンドウの任意の列で検索文字列に一致するすべてのスレッドに表示されます。 情報にはコール スタックの上部に表示されるスレッドの場所が含まれている、**場所**列。 既定では、ただし、完全なコール スタックは検索されません。  
  
#### <a name="to-search-for-specific-threads"></a>特定のスレッドを検索するには  
  
-   上部のツールバーで、**スレッド**ウィンドウに移動して、**検索**ボックスと いずれか。  
  
    -   検索文字列を入力し、Enter キーを押します。  
  
         \- または -  
  
    -   次のドロップダウン リストをクリックして、**検索**ボックスし、前回の検索からの検索文字列を選択します。  
  
-   (省略可能)完全なコール スタックを検索に含めるには、選択**呼び出し履歴の検索**します。  
  
## <a name="freezing-and-thawing-threads"></a>スレッドの凍結と凍結解除  
 スレッドを凍結すると、利用できるリソースがあっても、そのスレッドの実行は開始されません。  
  
 ネイティブ コードで中断または Windows 関数を呼び出すことによってスレッドを再開して`SuspendThread`と`ResumeThread`または MFC 関数[CWinThread::SuspendThread](http://msdn.microsoft.com/library/57189c7e-fd71-42e5-bc4b-3de7cd373d28)と[cwinthread::resumethread](http://msdn.microsoft.com/library/d6f97a2f-5c9f-4ee1-b978-d74938784db5). 呼び出す場合`SuspendThread`または`ResumeThread`、変更する、*中断カウント*に表示される、**スレッド**ウィンドウ。 ただし、ネイティブ スレッドを凍結または凍結解除しても、中断カウントは変わりません。 ネイティブ コードでは、凍結が解除され、中断カウントがゼロになるまで、スレッドは実行されません。  
  
 マネージド コードでは、スレッドの凍結または凍結解除によって中断カウントが変わります。 マネージド コードでは、凍結されたスレッドの中断カウントは 1 になります。 ネイティブ コードでは、スレッドが `SuspendThread` 呼び出しによって中断されている場合を除き、凍結されたスレッドの中断カウントは 0 です。  
  
> [!NOTE]
>  ネイティブ コードからマネージド コードへの呼び出しをデバッグする場合、マネージド コードは呼び出し元のネイティブ コードと同じ物理スレッドで実行されます。 ネイティブ スレッドを中断または凍結すると、マネージド コードも凍結されます。  
  
#### <a name="to-freeze-or-thaw-execution-of-a-thread"></a>スレッドの実行を凍結または凍結解除するには  
  
-   上部のツールバーで、**スレッド**ウィンドウで、をクリックして**スレッドの凍結**または**スレッドの凍結解除**します。  
  
     このアクションで選択されているスレッドのみに影響、**スレッド**ウィンドウ。  
  
## <a name="displaying-flagged-threads"></a>フラグが設定されたスレッドの表示  
 アイコンでマークすることによって、特に注目するスレッドのフラグを設定することができます、**スレッド**ウィンドウ。 詳細については、次を参照してください。[方法: フラグとスレッドのフラグを解除](../debugger/how-to-flag-and-unflag-threads.md)します。 [スレッド] ウィンドウでは、すべてのスレッドを表示するか、フラグが設定されたスレッドのみ表示するかを選択できます。  
  
#### <a name="to-display-only-flagged-threads"></a>フラグが設定されたスレッドのみ表示するには  
  
-   左上隅にあるフラグ ボタンを選択、**スレッド**ウィンドウ。  
  
## <a name="displaying-thread-call-stacks-and-switching-between-frames"></a>スレッドの呼び出し履歴の表示とフレームの切り替え  
 マルチスレッド プログラムでは、各スレッドに専用の呼び出し履歴があります。 **スレッド**ウィンドウがこれらの呼び出し履歴を表示する便利な手段を提供します。  
  
#### <a name="to-view-the-call-stack-of-a-thread"></a>スレッドの呼び出し履歴を表示するには  
  
-   **場所**列で、スレッドの場所の横にある下向きの三角形をクリックします。  
  
     場所が展開されて、そのスレッドの呼び出し履歴が表示されます。  
  
#### <a name="to-view-or-collapse-the-call-stacks-of-all-threads"></a>すべてのスレッドの呼び出し履歴の表示と非表示を切り替えるには  
  
-   上部のツールバーで、**スレッド**ウィンドウで、をクリックして**呼び出し履歴の**または**呼び出し履歴の折りたたみ**します。  
  
## <a name="see-also"></a>関連項目  
 [マルチ スレッド アプリケーションをデバッグします。](../debugger/debug-multithreaded-applications-in-visual-studio.md)   
 [チュートリアル : マルチスレッド アプリケーションのデバッグ](../debugger/walkthrough-debugging-a-multithreaded-application.md)



