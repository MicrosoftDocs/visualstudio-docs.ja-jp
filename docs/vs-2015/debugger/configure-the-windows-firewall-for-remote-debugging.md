---
title: リモートデバッグのための Windows ファイアウォールの構成 |Microsoft Docs
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-debug
ms.topic: conceptual
ms.assetid: 66e3230a-d195-4473-bbce-8ca198516014
caps.latest.revision: 6
author: MikeJo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: f232446ed699bd7cc034e4b6d6148b665830cf2d
ms.sourcegitcommit: b885f26e015d03eafe7c885040644a52bb071fae
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/30/2020
ms.locfileid: "85535526"
---
# <a name="configure-the-windows-firewall-for-remote-debugging"></a>Windows ファイアウォールをリモート デバッグ用に構成する
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

このトピックでは、次のオペレーティング システムが稼働するコンピューターでリモート デバッグを有効にするようにファイアウォールを構成する方法を説明します。  
  
- Windows 7  
  
- Windows 8/8.1  
  
- Windows 10  
  
- Windows Server 2008 (R2)  
  
- Windows Server 2012  
  
- Windows Server 2012 R2  
  
  デバッグを実行するネットワークがファイアウォールで保護されていない場合は、この構成は不要です。 それ以外の場合は、Visual Studio をホストするコンピューターと、デバッグするリモート コンピューターの両方で、ファイアウォール構成を変更する必要があります。  
  
  **IPSec** ネットワークで IPSec を使用して通信を行う必要がある場合は、Visual Studio ホスト コンピューターとリモート コンピューターの両方で追加のポートを開く必要があります。  
  
  **Web サーバー** リモート Web サーバーをデバッグする場合は、リモート コンピューターで追加のポートを開く必要があります。  
  
  両方のコンピューターで同じオペレーティング システムを実行する必要がないことにご注意ください。 たとえば Visual Studio コンピューターで Windows 10 を実行し、リモート コンピューターで Windows Server 2012 R2 を実行することができます。  
  
## <a name="to-configure-windows-firewall-on-the-visual-studio-computer"></a>Visual Studio コンピューターで Windows ファイアウォールを構成するには  
 オペレーティング システムによって、Windows ファイアウォールの構成手順は多少異なります。 Windows 7 または Windows Server 2008 では **プログラム** という用語が使用されますが、Windows 8/8.1、Windows 10、Windows Server 2012 では **アプリ** という用語が使用されます。  次の手順では **アプリ**という用語を使用します。  
  
1. [Windows ファイアウォール] ページを開きます。 ( **[スタート]** メニューの検索ボックスに「 **Windows ファイアウォール**」と入力します)。  
  
2. **[Windows ファイアウォールを介したアプリまたは機能を許可]** をクリックします。  
  
3. **[許可されたアプリおよび機能]** の一覧で **[Visual Studio リモート デバッガー探索]** を見つけます。 一覧にこの項目が表示されている場合は、この項目が選択されていることと、1 つ以上のネットワークの種類も選択されていることを確認します。  
  
4. **[Visual Studio リモート デバッガー探索]** が一覧に表示されていない場合は **[別のアプリの許可]** をクリックします。 それでも [**アプリの追加**] ウィンドウに表示されない場合は、[**参照**] をクリックして** \<Visual Studio installation directory> \Common7\IDE\Remote Debugger**に移動します。 アプリケーションの該当するフォルダー (x86、x64、Appx) を見つけ、 **msvsmon.exe**を選びます。 **[追加]** をクリックします。  
  
5. **[許可されたアプリおよび機能]** の一覧で **[Visual Studio リモート デバッグ モニター]** を選びます。 リモート デバッグ モニターの通信に使用する 1 つ以上のネットワークの種類 (**[ドメイン]、[ホーム/社内 (プライベート)]、[パブリック]**) をオンにします。 選択する種類には、Visual Studio コンピューターが接続しているネットワークが含まれている必要があります。  
  
## <a name="to-open-a-port-on-the-visual-studio-computer-to-enable-discovery"></a>検出を有効にするため Visual Studio コンピューターでポートを開くには  
 リモート デバッガーを実行するコンピューターを検出できるようにするため、UDP ポート 3702 での着信を許可する必要があります。 追加するには、「ファイアウォールでポートを構成する方法」をご覧ください。  
  
## <a name="to-configure-the-windows-firewall-of-the-remote-computer-for-remote-debugging"></a>リモート デバッグ用にリモート コンピューターで Windows ファイアウォールを構成するには  
 リモート デバッグ コンポーネントをリモート コンピューターにインストールするか、または共有ディレクトリから実行することができます。 いずれの場合でも、リモート コンピューターのファイアウォールを構成する必要があります。 リモート デバッグ コンポーネントは次の場所にあります。  
  
 **\<Visual Studio installation directory>\Common7\IDE\Remote デバッガー**  
  
 オペレーティング システムによって、Windows ファイアウォールの構成手順は多少異なります。 Windows 7 または Windows Server 2008 では **プログラム** という用語が使用されますが、Windows 8/8.1、Windows 10、Windows Server 2012 では **アプリ** という用語が使用されます。  次の手順では **アプリ**という用語を使用します。  
  
1. [Windows ファイアウォール] ページを開きます。 ( **[スタート]** メニューの検索ボックスに「 **Windows ファイアウォール**」と入力します。)  
  
2. **[Windows ファイアウォールを介したアプリまたは機能を許可]** をクリックします。  
  
3. **[許可されたアプリおよび機能]** の一覧で **[Visual Studio リモート デバッグ モニター]** を探します。 一覧にこの項目が表示されている場合は、この項目が選択されていることと、1 つ以上のネットワークの種類も選択されていることを確認します。  
  
4. **[Visual Studio リモート デバッグ モニター]** が一覧にない場合は **[別のアプリの許可]** をクリックします。 それでも [**アプリの追加] ウィンドウ**に表示されない場合は、[**参照**] をクリックして** \<Visual Studio installation directory> \Common7\IDE\Remote Debugger**に移動します。 アプリケーションの該当するフォルダー (x86、x64、Appx) を見つけ、 **msvsmon.exe**を選びます。 **[追加]** をクリックします。  
  
5. **[許可されたアプリ]** の一覧で **[Visual Studio リモート デバッグ モニター]** を選びます。 リモート デバッグ モニターの通信に使用する 1 つ以上のネットワークの種類 (**[ドメイン]、[ホーム/社内 (プライベート)]、[パブリック]**) をオンにします。 選択する種類には、Visual Studio コンピューターが接続しているネットワークが含まれている必要があります。  
  
## <a name="ports-on-the-remote-computer-that-enable-remote-debugging"></a>リモート デバッグを有効にするリモート コンピューター上のポート  
  
|**ポート**|**着信/発信**|**プロトコル**|**説明**|  
|-|-|-|-|
|3702|送信|UDP|リモート デバッガー探索に必要|  
|4020||TCP|VS 2015 が対象。 Visual Studio のバージョンごとにポート番号が 2 ずつインクリメントします。 詳しくは、「Visual Studio リモート デバッガーのポートの割り当て」をご覧ください。|  
|4021||TCP|VS 2015 が対象。 Visual Studio のバージョンごとにポート番号が 2 ずつインクリメントします。 詳しくは、「Visual Studio リモート デバッガーのポートの割り当て」をご覧ください。|  
  
## <a name="ports-on-the-remote-computer-that-enable-remote-debugging-with-managed-or-native-compatibility-mode"></a>マネージドまたはネイティブ互換モードでのリモート デバッグを有効にするリモート コンピューター上のポート  
  
|**ポート**|**着信/発信**|**プロトコル**|**説明**|  
|-|-|-|-|  
|135、139、445|発信|TCP|必須です。|  
|137、138|送信|UDP|必須です。|  
|500、4500|送信|UDP|ドメイン ポリシーで、ネットワーク通信を IPSec 経由で実行する必要がある場合は、必須。|  
|80|発信|TCP|Web サーバーのデバッグに必要。|  
  
## <a name="how-to-configure-ports-in-windows-firewall"></a>Windows ファイアウォールでのポートの構成方法  
  
1. **[スタート]** メニューで **[セキュリティが強化された Windows ファイアウォール]** を見つけます。  
  
2. **[受信の規則]** または **[送信の規則]** をクリックし、 **[操作]** リストで **[新しい規則]** をクリックします。  
  
3. [**規則の種類**] ページで、[**ポート**] を選択し、[**次へ**] をクリックします。  
  
4. **[プロトコルおよびポート]** ページで、ポート プロトコル (TCP または UDP) を選びます。 **[特定のローカル ポート]** を選び、プロトコルのために有効にするポート番号を 1 つ以上入力します 複数の番号はコンマで区切って入力します。 続けて、 **[次へ]** をクリックします。  
  
5. **[操作]** ページで **[接続を許可する]** を選び、 **[次へ]** をクリックします。  
  
6. **[プロファイル]** ページで、ポートに対して有効にする 1 つまたは複数のネットワークの種類を選びます。 選ぶ種類には、リモート コンピューターが接続しているネットワークが含まれている必要があります。 続けて、 **[次へ]** をクリックします。  
  
7. **[名前]** ページで規則の名前を入力し、 **[完了]** をクリックします。  
  
8. [**受信の規則**] または [**送信の規則**] の一覧に新しい規則が表示されます。  
  
## <a name="see-also"></a>関連項目  
 [Remote Debugging](../debugger/remote-debugging.md)
