---
title: デバッガーでのコード間の移動 |Microsoft Docs
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-debug
ms.topic: conceptual
f1_keywords:
- vs.debug.execution
dev_langs:
- FSharp
- VB
- CSharp
- C++
- JScript
helpviewer_keywords:
- stepping
- debugging [Visual Studio], execution control
- execution, controlling in debugger
ms.assetid: 759072ba-4aaa-447e-8e51-0dd1456fe896
caps.latest.revision: 47
author: MikeJo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: f79ece781db19f2483ef1dd6cb0a81ff7cf78e06
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/02/2020
ms.locfileid: "88608940"
---
# <a name="navigating-through-code-with-the-debugger"></a>デバッガーでのコード間の移動
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

デバッガーでコード間を移動するためのコマンドとショートカットについて理解を深めてください。これにより、アプリの問題をすばやく見つけて解決することができます。 デバッガーでコード内を移動しながら、 [アプリの状態](https://msdn.microsoft.com/library/mt243867.aspx#BKMK_Inspect_Variables) を確認したり、実行フローの詳細を確認したりすることができます。  
  
## <a name="start-debugging"></a>デバッグを開始する  
 多くの場合、 **F5 キー** (デバッグ開始デバッグ) を使用してデバッグセッション**を開始し**  /  **Start Debugging**ます。 このコマンドを実行すると、デバッガーがアタッチされた状態でアプリが起動します。  
  
 緑色の矢印もデバッガーを起動します ( **F5**と同じ)。  
  
 ![DBG&#95;の基礎&#95;デバッグ&#95;開始](../debugger/media/dbg-basics-start-debugging.png "DBG_Basics_Start_Debugging")  
  
 デバッガーがアタッチされた状態でアプリを起動するには、 **F11** キー ([コードにステップイン](#BKMK_Step_into__over__or_out_of_the_code))、  **F10** キー ([ステップオーバーコード](#BKMK_Step_over_Step_out))、または [ **カーソル行の前まで実行**] を使用する方法があります。  これらのオプションの詳細については、このトピックの他のセクションを参照してください。  
  
 デバッグすると、黄色い線は次に実行されるコードを示します。  
  
 ![DBG&#95;&#95;モードの&#95;の基本](../debugger/media/dbg-basics-break-mode.png "DBG_Basics_Break_Mode")  
  
 デバッグ中に、 **F5**、 **F11** などのコマンドを切り替えることができます。また、このトピックで説明されている他の機能 (ブレークポイントなど) を使用して、見たいコードにすばやくアクセスできます。  
  
 [ローカル] ウィンドウでの変数値の表示やウォッチウィンドウでの式の評価など、ほとんどのデバッガー機能は、デバッガーが一時停止しているとき ( *中断モード*とも呼ばれます) にのみ使用できます。 デバッガーが一時停止されると、アプリの状態は中断されますが、関数、変数、およびオブジェクトはメモリに残ります。 中断モードでは、要素の位置と状態を調べて、違反やバグを探すことができます。 一部のプロジェクトの種類では、中断モードでアプリの調整を行うこともできます。  
  
## <a name="step-into-code-line-by-line"></a><a name="BKMK_Step_into__over__or_out_of_the_code"></a> コードにステップイン (行単位)  
 デバッグ中にコードの各行 (各ステートメント) で停止するには、 **F11**キーを押します**Debug**(または  /  、メニューの [**ステップイン] を**デバッグします)。  
  
> [!TIP]
> 各コード行を実行すると、変数の上にマウスポインターを移動して値を表示したり、[ [ローカル](../debugger/autos-and-locals-windows.md) ] ウィンドウと [ [ウォッチ](../debugger/autos-and-locals-windows.md) ] ウィンドウを使用して値の変更を観察したりできます。  
  
 ここでは、 **ステップイン**の動作の詳細について説明します。  
  
- 入れ子になった関数呼び出しの場合は、 **[ステップ イン]** をクリックすると、一番内側にある入れ子になった関数にステップ インします。 **のような呼び出しに** [ステップ イン] `Func1(Func2())`を使用すると、デバッガーは関数 `Func2`にステップ インします。  
  
- デバッガーは実際、物理的な行ではなくコード ステートメントをステップ実行します。 たとえば、 `if` 句は 1 行で記述できます。  
  
  ```csharp  
  int x = 42;  
  string s = "Not answered";  
  if( int x == 42) s = "Answered!";  
  ```  
  
  ```vb  
  Dim x As Integer = 42  
  Dim s As String = "Not answered"  
  If x = 42 Then s = "Answered!"  
  ```  
  
   この行にステップ インすると、デバッガーは条件を 1 つのステップとして、結果を別のステップとして扱います (この例では条件は true)。  
  
  関数にステップインしているときに、呼び出し履歴を視覚的にトレースするには、「 [デバッグ中の呼び出し履歴のメソッドのマップ](../debugger/map-methods-on-the-call-stack-while-debugging-in-visual-studio.md)」を参照してください。  
  
## <a name="step-through-code-skipping-functions"></a><a name="BKMK_Step_over_Step_out"></a> コードをステップ実行し、関数をスキップする  
 デバッガーでコードを実行する場合、多くの場合、特定の関数の動作を確認する必要はありません (これは気にしていないか、適切にテストされたライブラリコードと同様に機能していることがわかっています)。 これらのコマンドを使用してコードをスキップします (もちろん、これらの関数は引き続き実行されますが、デバッガーはそれらをスキップします)。  
  
|キーボード コマンド|メニュー コマンド|説明|  
|----------------------|------------------|-----------------|  
|**F10**|**[ステップ オーバー]**|現在の行に関数呼び出しが含まれている場合、 **ステップオーバー** はコードを実行し、呼び出された関数が返された後、コードの最初の行で実行を中断します。|  
|**Shift + F11**|**ステップ アウト**|**ステップアウト** は、現在の関数から制御が戻ったときに、コードの実行を続行し、実行を中断します (デバッガーは現在の関数をスキップします)。|  
  
> [!TIP]
> アプリでエントリポイントを検索する必要がある場合は、 **F10** キーまたは **F11**キーを使用して開始します。 これらのコマンドは、アプリの状態を調べる場合や、実行フローの詳細を確認する場合に便利です。  
  
## <a name="run-to-a-specific-location-or-function"></a><a name="BKMK_Break_into_code_by_using_breakpoints_or_Break_All"></a> 特定の場所または関数まで実行する  
 多くの場合、コードのデバッグ方法として推奨されるのは、検査するコードが正確にわかっている場合や、デバッグを開始する場所が少なくともわかっている場合です。  
  
- **コードにブレークポイントを設定する**  
  
     コードに単純なブレークポイントを設定するには、Visual Studio エディターでソース ファイルを開きます。 実行を中断するコード行でカーソルを設定し、コードウィンドウを右クリックしてコンテキストメニューを表示し、[ **ブレークポイント]/[ブレークポイントの挿入** ] を選択します (または、 **F9**キーを押します)。 デバッガーは、行が実行される直前に実行を中断します。  
  
     ![ブレークポイントを設定する](../debugger/media/dbg-basics-setbreakpoint.png "DBG_Basics_SetBreakpoint")  
  
     Visual Studio でのブレークポイントには、条件付きブレークポイントやトレースポイントなど、さまざまな追加の機能が用意されています。 「 [ブレークポイントの使用」を](../debugger/using-breakpoints.md)参照してください。  
  
- **カーソル位置まで実行する**  
  
     カーソル位置まで実行するには、ソース ウィンドウで実行可能なコード行にカーソルを置きます。 エディターのコンテキストメニュー (エディター内で右クリック) で、[ **カーソル行の前まで実行**] を選択します。 これは、一時的なブレークポイントの設定に似ています。  
  
- **コードを手動で中断する**  
  
     実行中のアプリで次に実行されるコード行で実行を中断するには、 **[デバッグ]**、 **[すべて中断]** の順にクリックします (キーボード: **Ctrl+Alt+Break**)。  
  
     対応付けられたソースまたはシンボル (.pdb) ファイルがないため、コードの実行が中断された場合は、デバッガーによって **[ソース ファイルが見つかりません]** または **[シンボルが見つかりません]** ページが表示され、該当するファイルを見つけるために役立ちます。 「 [シンボル (.pdb) とソースファイルの指定](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)」を参照してください。 それらのサポート ファイルにアクセスできない場合は、[逆アセンブル] ウィンドウでアセンブリ命令をデバッグできます。  
  
- **呼び出し履歴の関数まで実行する**  
  
     [ **呼び出し履歴** ] ウィンドウ (デバッグ中に使用可能) で関数を選択し、右クリックして、[ **カーソル行の前まで実行**] を選択します。 呼び出し履歴を視覚的にトレースするには、[デバッグを行うときの呼び出し履歴に対するメソッドのマップ](../debugger/map-methods-on-the-call-stack-while-debugging-in-visual-studio.md)に関するページを参照してください。  
  
- **名前で指定した関数まで実行する**  
  
     指定された関数に到達するまで、アプリケーションを実行するようにデバッガーに指示できます。 関数は名前で指定することも、呼び出し履歴から選択することもできます。  
  
     名前で関数を指定するには、 **[デバッグ]**、 **[ブレークポイントの作成]**、 **[関数でブレーク]** の順にクリックし、関数の名前などの識別情報を入力します。  
  
     ![[ブレークポイントの作成] ダイアログ ボックス](../debugger/media/dbg-execution-newbreakpoint.png "DBG_Execution_NewBreakpoint")  
  
     関数がオーバーロードされるか、複数の名前空間にある場合は、 **[ブレークポイントの選択]** ダイアログ ボックスで目的の関数を選択できます。  
  
     ![[ブレークポイントの選択] ダイアログボックス](../debugger/media/dbg-execution-overloadedbreakpoints.png "DBG_Execution_OverloadedBreakpoints")  
  
## <a name="move-the-pointer-to-change-the-execution-flow"></a><a name="BKMK_Set_the_next_statement_to_execute"></a> ポインターを移動して実行フローを変更する  
 デバッガーが一時停止されている間、命令ポインターを移動して、次に実行されるコードのステートメントを設定できます。 ソース ウィンドウまたは [逆アセンブル] ウィンドウのマージンに表示される黄色の矢印は、次に実行されるステートメントの位置を示します。 この矢印を移動すると、コードの一部をスキップしたり、前に実行した行に戻ったりできます。 既知のバグを含むコードのセクションをスキップするなどの場合に利用できます。  
  
 ![Example2](../debugger/media/dbg-basics-example2.png "DBG_Basics_Example2")  
  
 次に実行されるステートメントを設定するには、次のいずれかの手順を使用します。  
  
- ソース ウィンドウで、同じソース ファイル内の次に実行されるステートメントを設定する位置に黄色の矢印をドラッグします。  
  
- ソースウィンドウで、次に実行する行にカーソルを設定し、右クリックして、[次の **ステートメントの設定**] を選択します。  
  
- [逆アセンブル] ウィンドウで、次に実行するアセンブリ命令のカーソルを設定し、を右クリックして、[ **次のステートメントの設定**] をクリックします。  
  
> [!CAUTION]
> 次に実行するステートメントを設定すると、プログラム カウンターは新しい位置に直接ジャンプします。 このコマンドは慎重に使用する必要があります。  
> 
> - 前の実行ポイントから新しい実行ポイントまでの間の命令は実行されません。  
>   - 実行ポイントを後方に移動すると、その間の命令が実行されます。  
>   - 次に実行するステートメントを別の関数やスコープに移動すると、一般に呼び出し履歴が破損し、実行時エラーや例外が発生する原因になります。 次に実行するステートメントを別のスコープに移動しようとすると、デバッガーの警告ダイアログ ボックスが表示され、操作をキャンセルできます。 Visual Basic では、次に実行するステートメントを別のスコープや関数に移動できません。  
>   - ネイティブ C++ でランタイム チェックを有効にしている場合、次に実行されるステートメントを設定すると、実行がメソッドの最後に到達したときに例外がスローされる可能性があります。  
>   - エディット コンティニュが有効になっている場合、エディット コンティニュが即座にマップし直すことができない編集が行われると、 **[次のステートメントの設定]** でエラーが発生します。 これは、たとえば、catch ブロック内でコードを編集している場合に発生します。 このエラーが発生すると、その操作がサポートされていないことを知らせるエラー メッセージが表示されます。  
> 
> [!NOTE]
> マネージド コードでは、次に実行するステートメントは、以下の場合に移動できません。  
> 
> - 次のステートメントが現在のステートメントとは別のメソッドに含まれている場合。  
>   - デバッグが、Just-In-Time デバッグを使用して開始された場合。  
>   - 呼び出し履歴のアンワインドが行われている場合。  
>   - System.StackOverflowException 例外または System.Threading.ThreadAbortException 例外がスローされた場合。  
  
 アプリケーションの実行中は、次のステートメントを設定できません。 次に実行するステートメントの設定は、デバッガーの中断モード時に行う必要があります。  
  
## <a name="step-into-non-user-code"></a>非ユーザーコードにステップインする  
 既定では、デバッガーはデバッグ中にアプリコードだけを表示しようとします。これは、 *マイコードのみ*と呼ばれるデバッガー設定によって決まります。 (さまざまなプロジェクトの種類および言語について、この動作がどのように動作するかを確認するには、「 [マイコードのみ](../debugger/just-my-code.md) 」を参照してください)。ただし、デバッグ中に、フレームワークコード、サードパーティライブラリコード、またはオペレーティングシステム (システム呼び出し) の呼び出しを調べることが必要になる場合があります。  
  
 マイコードのみを無効にするには、[**ツール**  /  **] [オプション]**  /  [**デバッグ**] に移動し、[**マイコードのみを有効に**する] チェックボックスをオフにします。  
  
 マイコードのみが無効になっている場合、デバッガーはユーザーコード以外のコードにステップインでき、デバッガーウィンドウに非ユーザーコードが表示されます。  
  
> [!NOTE]
> "マイ コードのみ" デバッグは、デバイス プロジェクトではサポートされません。  
  
 **システム コールにステップ インする**  
  
 システムコードのデバッグシンボルを読み込んでいてマイコードのみが有効になっていない場合は、他の呼び出しと同様にシステムコールにステップインできます。  
  
 Microsoft シンボルファイルにアクセスするには、「シンボル[(.pdb) とソースファイルの指定](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)」トピックの「[シンボルサーバーを使用して、ローカルコンピューター上にないシンボルファイルを検索する](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md#BKMK_Use_symbol_servers_to_find_symbol_files_not_on_your_local_machine)」を参照してください。  
  
 デバッグ中に特定のシステム コンポーネントのシンボルを読み込むには:  
  
1. [モジュール] ウィンドウを開きます (キーボード: **Ctrl+Alt+U**)。  
  
2. シンボルを読み込むモジュールを選択します。  
  
     **[シンボルの状態]** 列により、シンボルが読み込まれたモジュールを確認できます。  
  
3. コンテキスト メニューの **[シンボルの読み込み]** をクリックします。  
  
## <a name="step-into-properties-and-operators-in-managed-code"></a><a name="BKMK_Step_into_properties_and_operators_in_managed_code"></a> マネージド コード内のプロパティと演算子にステップ インする  
 デバッガーは既定ではマネージド コード内のプロパティと演算子をステップ オーバーします。 ほとんどの場合、これにより正しくデバッグを実行できます。 プロパティまたは演算子へのステップ インを有効にするには、 **[デバッグ]**  /  **[オプション]** を選択します。 [**デバッグ**の  /  **全般**] ページで、[**プロパティと演算子をステップオーバーする (マネージのみ)** ] チェックボックスをオフにします。
