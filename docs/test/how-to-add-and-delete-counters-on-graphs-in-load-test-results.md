---
title: ロード テスト結果のグラフにカウンターを追加および削除する
ms.date: 10/19/2016
ms.topic: how-to
helpviewer_keywords:
- load test results graphs, adding counters
- load test results graph
- load test, results graph
- load test results, graphs
ms.assetid: 81536233-1962-40d9-9511-0b4633814d90
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: 2b2cefc56d299c9ec917aea555aec1cd9ca53887
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/02/2020
ms.locfileid: "85288469"
---
# <a name="how-to-add-and-delete-counters-on-graphs-in-load-test-results"></a>方法: ロード テスト結果のグラフにカウンターを追加および削除する

**[カウンター]** パネルを使用して、グラフにパフォーマンス カウンターを追加できます。

![グラフに追加されたカウンター](../test/media/ltest_selectcounter.png)

[!INCLUDE [web-load-test-deprecated](includes/web-load-test-deprecated.md)]

**パフォーマンス カウンターのサンプリング間隔に関する考慮事項**

ロード テストの長さに基づいて、ロード テストの実行設定の **[サンプル速度]** プロパティの値を選択します。 既定値 (5 秒) のようにサンプル速度が小さいと、ロード テスト結果のデータベースに必要な容量が増えます。 長いロード テストでは、サンプル速度を増加すると、収集するデータ量を減らすことができます。 詳細については、「[方法: サンプル速度を指定する](../test/how-to-specify-the-sample-rate-for-a-load-test.md)」をご覧ください。

以下は、サンプル速度のガイドラインです。

|ロード テストの継続時間|推奨サンプル速度|
|-|-----------------------------|
|\< 1 時間|5 秒|
|1 ～ 8 時間|15 秒|
|8 ～ 24 時間|30 秒|
|> 24 時間|60 秒|

**タイミングの詳細の指定とパーセンタイル データの収集に関する考慮事項**

ロード テスト エディターの実行設定には、**タイミングの詳細ストレージ**というプロパティがあります。 **[タイミングの詳細ストレージ]** プロパティを有効にすると、ロード テスト中に個々のテスト、トランザクション、およびページの実行にかかる時間が、ロード テストの結果リポジトリに格納されます。 これにより、90 パーセンタイル データや 95 パーセンタイル データが、**ロード テスト アナライザー**のテスト テーブル、トランザクション テーブル、およびページ テーブルに表示されます。

**[タイミングの詳細ストレージ]** プロパティを **[StatisticsOnly]** および **[AllIndividualDetails]** という実行設定プロパティで有効にするには、2 つの選択肢があります。 どちらのオプションの場合にも、すべてのテスト、ページ、およびトランザクションの時間が測定され、それぞれのタイミング データからパーセンタイル データが計算されます。 違いは、 **[StatisticsOnly]** オプションではパーセンタイル データが計算された直後に、個々のタイミング データがリポジトリから削除されることです。 タイミング詳細を使用すると、結果リポジトリに必要な容量が減少しますが、 上級ユーザーは SQL ツールを使用して、他の方法でタイミング詳細データを処理することもできます。 この場合は、 **[AllIndividualDetails]** オプションを使用して、その処理にタイミング詳細データを使用できるようにする必要があります。 さらに、このプロパティを **[AllIndividualDetails]** に設定した場合は、ロード テストの実行完了後に**ロード テスト アナライザー**で**仮想ユーザー アクティビティ** チャートを使用して仮想ユーザーのアクティビティを分析できます。 詳細については、「[詳細ビューでの仮想ユーザー アクティビティの分析](../test/analyze-load-test-virtual-user-activity-in-the-details-view.md)」をご覧ください。

ロード テストの結果リポジトリでタイミングの詳細データを格納するために必要なディスク容量が、長時間実行されるロード テストで特に大きくなります。 また、ロード テストの終わりにこのデータをロード テストの結果リポジトリに格納するのに時間がかかります。これは、ロード テストの実行が完了するまでデータがロード テスト エージェントに格納されるためです。 ロード テストが完了すると、データはリポジトリに格納されます。 既定では、 **[タイミングの詳細ストレージ]** プロパティは有効になっています。 これがテスト環境で問題になる場合は、 **[タイミングの詳細ストレージ]** を **[なし]** に設定します。

詳細については、「[方法: [タイミングの詳細ストレージ] プロパティを指定する](../test/how-to-specify-the-timing-details-storage-property-for-a-load-test.md)」をご覧ください。

## <a name="to-display-a-particular-performance-counter-on-a-load-test-graph"></a>特定のパフォーマンス カウンターをロード テストのグラフに表示するには

1. ロード テストの終了後、またはテスト結果の読み込み後に、ロード テスト アナライザーのツール バーの **[グラフ]** を選択します。

     **[カウンター]** パネルはグラフ ビューに表示されます。

    > [!NOTE]
    > **[カウンター]** パネルが表示されない場合、ツール バーの **[カウンター パネルの表示]** を選択します。

2. **[カウンター]** パネルで、グラフに表示するパフォーマンス カウンターが表示されるまで、階層のノードを展開します。

     たとえば、テストを実行中のコンピューターの使用可能メモリを表示するには、 **[コンピューター]** 、該当するコンピューターを示すノード、 **[メモリ]** の順に展開します。 **[利用可能な MB]** カウンターが表示されます。

3. パフォーマンス カウンターを表示するグラフを選択します。

4. **[カウンター]** パネルのパフォーマンス カウンターを右クリックし、 **[グラフにカウンターを表示]** を選択します。

    > [!TIP]
    > グラフでのパフォーマンス カウンターのデータの表示を一時的に停止するには、凡例内のパフォーマンス カウンターのチェック ボックスをオフにします。 このようにすると、グラフで傾向線を表示せずに、最小、最大、および平均の統計を分析できます。 これは、問題の分析時にグラフ上でいくつかのパフォーマンス カウンターのプロットが重なっている場合に便利です。 詳細については、「[グラフ ビューの凡例を使用したロード テストの分析](../test/use-the-graphs-view-legend-to-analyze-load-tests.md)」を参照してください。

5. グラフからパフォーマンス カウンター データを削除するには、凡例の **[カウンター]** 列のパフォーマンス カウンターを右クリックし、 **[削除]** を選択します。

     \- - または -

     グラフでデータ線を右クリックし、 **[削除]** を選択します。

     \- - または -

     凡例の **[カウンター]** 列のパフォーマンス カウンター、またはグラフのデータ行を選択し、**Delete** キーを押します。

    > [!NOTE]
    > また、グラフではなく凡例にパフォーマンス カウンターを配置することもできます。その場合は、 **[凡例にカウンターを表示]** コマンドを使用します。

## <a name="see-also"></a>参照

- [グラフ ビューでのロード テスト結果の分析](../test/analyze-load-test-results-in-the-graphs-view.md)
- [方法: カスタム グラフを作成する](../test/how-to-create-custom-graphs-in-load-test-results.md)
