---
title: DevOps でラボ環境を使用する
ms.date: 05/02/2017
ms.topic: how-to
helpviewer_keywords:
- lab environment, test lab
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
author: mikejo5000
ms.openlocfilehash: 1a5958b03b9797882b3df37f4ba99c75ff832d22
ms.sourcegitcommit: 754133c68ad841f7d7962e0b7a575e133289d8a8
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/09/2020
ms.locfileid: "91928109"
---
# <a name="use-a-lab-environment-for-your-devops"></a>DevOps でラボ環境を使用する

ラボ環境は、アプリケーションの開発およびテストに使用できる仮想マシンと物理マシンのコレクションです。 ラボ環境には、ワークステーション、Web サーバー、データベース サーバーなど、多層アプリケーションのテストに必要な複数のロールを含めることができます。 さらに、ラボ環境でビルド、配置、テストのワークフローを使用して、アプリケーションでの自動テストのビルド、配置、および実行のプロセスを自動化できます。

* **テスト計画を使用して自動テストを実行する** - *テスト計画*と呼ばれる自動テストのコレクションを実行し、進行状況を確認できます。

* **ビルド、配置、テストのワークフローを使用する**- ビルド、配置、テストのワークフローを使用して、多層アプリケーションを自動的にテストできます。 代表的な例としては、ビルドを開始し、ビルド ファイルをラボ環境内の適切なコンピューター上に配置して、自動テストを実行するというワークフローがあります。 また、特定の間隔で実行するようワークフローをスケジュールできます。

* **手動のテスト中でも、すべてのコンピューターから診断データを収集する** - 複数のコンピューターから同時に診断データを収集できます。 たとえば 1 回のテスト実行で、IntelliTrace、テストの影響、および Web サーバー、データベース サーバー、クライアントの他の形式のデータを収集できます。

次に、一般的なラボ環境のトポロジの例を示します。

| トポロジ | [説明] |
|---|---|
|![サーバーのみのトポロジ](../media/topology_backend.png)| このラボ環境は*サーバー トポロジ*を備えています。これは、サーバー アプリケーションで手動テストを実行するためによく使用されます。また、これにより、テスト担当者は自身のクライアント コンピューターを使用して環境内のバグを検証することができます。 バックエンド トポロジでは、ラボ環境にはサーバーのみが含まれています。 このタイプのトポロジを使用するば場合、一般的には、環境に含まれていないクライアント コンピューターを使用してラボ環境内のサーバーに接続します。|
|![クラウドのラボ環境](../media/topology_cloud.png)| このラボ環境は、_サーバー トポロジ_と同様に機能します。ローカルで物理または仮想マシンを実行する必要がないため、設定に費やす時間を減らせ、メンテナンスが簡単になり、コストを抑えことができます。 Microsoft Azure などのクラウド環境には、複数の Web サイトや仮想マシンをカスタム ネットワークで早く簡単に構成できます。|
|![クライアント サーバーのラボ環境](../media/topology_clientserver.png)| このラボ環境は、*クライアント/サーバー トポロジ*を備えています。これはサーバーとクライアントのコンポーネントを備えたアプリケーションをテストするために、よく使用されます。 クライアント/サーバー トポロジでは、アプリケーションのテストに使用されるクライアントとサーバーのすべてのコンピューターはラボ環境内にあります。 このトポロジを使用すると、テストに影響を与える各コンピューターからテスト データを収集することができます。|

:::row:::
    :::column:::
        ![ビデオのムービー カメラ アイコン](../../install/media/video-icon.png)
    :::column-end:::
    :::column:::
        テスト用のラボ環境の管理に関する[ビデオを視聴します](https://channel9.msdn.com/Series/Visual-Studio-2012-Premium-and-Ultimate-Overview/Visual-Studio-Ultimate-2012-Managing-lab-environments-for-testing)。
    :::column-end:::
:::row-end:::

## <a name="use-the-cloud-with-azure-pipelines-or-team-foundation-server-build-and-release"></a>Azure Pipelines や Team Foundation Server ビルドとリリースをクラウドと共に使用する

Team Foundation Server (TFS) と Azure Test Plans の[ビルドとリリース](/azure/devops/pipelines/index?view=vsts&preserve-view=true)機能を使用して、自動テストと、ビルド、配置、テストの自動化を実行できます。 いくつかの利点を次に示します。

* ビルド コントローラーまたはテスト コントローラーが不要です。
* テスト エージェントはビルドまたはリリースの一部としてタスクでインストールされます。
* 配置の手順を簡単にカスタマイズできます。 1 つのスクリプトの使用のみに限定されなくなります。 この製品および Visual Studio Marketplace で使用可能な多数のタスクも利用できます。
* テスト スイートを維持する必要がありません。 バイナリから直接テストを実行できます。
* 各ビルドまたはリリース内で実行されたテストのより充実したインライン レポートを得ることができます。
* 各環境に現在配置され、テストされている資産 (リリース、ビルド、作業項目、コミット) を追跡できます。
* 自動化をカスタマイズして拡張し、複数のテスト環境や運用環境にも簡単に展開できるようになります。
* 自動化は、チェックインやコミットがあった場合、または特定の時刻に毎日行われるようスケジュールできます。

詳細については、[ビルドとリリース管理の使用](use-build-or-rm-instead-of-lab-management.md)に関する記事を参照してください。

::: moniker range="vs-2017"
## <a name="use-the-visual-studio-lab-management-features-of-microsoft-test-manager"></a>Microsoft Test Manager の Visual Studio Lab Management 機能を使用する

Visual Studio Enterprise Edition を使用するとき、Microsoft Test Manager の Visual Studio Lab Management 機能を使用してラボ環境を作成および管理できます。

Lab Management は、環境内のすべてのコンピューターにテスト エージェントを自動的にインストールします。

Lab Management を System Center Virtual Machine Manager (SCVMM) と共に使用すると、ラボ環境を使用したときに次のような利点も得られます。

* **コンピューターの構成を迅速に再現する** - 一般的な稼動環境を再作成するために構成されている仮想マシンのコレクションを格納することができます。 格納済み環境の新しいコピーで、各テスト実行を行うことができます。

* **バグの正確な状況を再現する** - テスト実行が失敗した場合、ラボ環境の状態のコピーを格納し、ビルドの結果または作業項目からアクセスすることができます。

* **ラボ環境の複数のコピーを同時に実行する** - ラボ環境の複数のコピーを同時に実行することができます。

### <a name="standard-environments-and-scvmm-environments"></a>標準の環境および SCVMM 環境

Visual Studio Lab Management で作成できるラボ環境には、**標準環境**と **SCVMM 環境**の 2 つのタイプがあります。 ただし、それぞれのタイプの環境の機能は異なります。

**標準環境:** 標準環境には、仮想マシンと物理マシンを混在させることができます。 また、サードパーティの仮想フレームワークで管理されている標準環境に、仮想マシンを追加することもできます。 標準環境では、SCVMM サーバーなどの追加のサーバー リソースは必要ありません。

**SCVMM 環境:** SCVMM 環境には、SCVMM (System Center Virtual Machine Manager) で管理されている仮想マシンのみ含めることができるため、SCVMM 環境内の仮想マシンは、Hyper-V の仮想フレームワークでのみ実行できます。 ただし SCVMM 環境には、標準環境では使用できない、次の自動機能および管理機能が用意されています。

- **環境スナップショット:** 環境スナップショットには、ラボ環境の状態が含まれているため、クリーンな環境へすぐに復元したり、変更した環境の状態を保存したりできます。 また、ビルド、配置、テストのワークフローを使用して、環境スナップショットの保存および復元のプロセスを自動化することもできます。

- **格納された環境:** SCVMM 環境のコピーを格納して、環境の複数のコピーを配置することができます。

- **ネットワークの分離:** ネットワークの分離により、1 つの SCVMM 環境の同一のコピーを、コンピューター名が競合することなく複数同時に実行することができます。

- **仮想マシンのテンプレート:** 仮想マシンのテンプレートは、名前とその他の識別子を削除した仮想マシン テンプレートです。 VM テンプレートが SCVMM 環境に配置されると、Microsoft Test Manager は新しい識別子を生成します。 これにより、同じ環境、または複数の環境内に仮想マシンの複数のコピーを配置し、それらの仮想マシンを同時に実行することができます。

- **格納された仮想マシン:** プロジェクト ライブラリに格納され、一意の識別子を持っている仮想マシン。

> [!NOTE]
> Lab Management では、SCVMM 2016 はサポートしていません。

SCVMM の詳細については、「[Virtual Machine Manager](/azure/devops/pipelines/?view=vsts&preserve-view=true)」を参照してください。

標準環境および SCVMM 環境は、多数の同じ機能をサポートしています。 ただし、考慮すべき重要な違いがいくつかあります。 以下の表では、標準環境と SCVMM 環境で使用できる機能について比較しています。

|機能|SCVMM 環境|標準環境|
|-|------------------------|-|
|**テスト**|||
|手動テストの実行|サポートされています|サポートされています|
|コード化された UI およびその他の自動テストの実行|サポートされています|サポートされています|
|診断アダプターを使用してリッチ バグをファイルする|サポートされています|サポートされています|
|**ビルドの配置**|||
|自動化されているビルド、配置、テストのワークフロー|サポートされています|サポートされています|
|**環境の作成と管理**|||
|仮想マシンの他に物理マシンを使用する|サポートされていません|サポートされています|
|サードパーティの仮想マシンを使用する|サポートされていません|サポートされています|
|ラボ環境内のコンピューターにテスト エージェントを自動的にインストールする|サポートされています|サポートされています|
|環境スナップショットを使用してラボ環境の状態を保存および配置する|サポートされています|サポートされていません|
|VM テンプレートからラボ環境を作成する|サポートされています|サポートされていません|
|環境の開始/停止/スナップショット作成を実行する|サポートされています|サポートされていません|
|環境ビューアーを使用して環境に接続する|サポートされています|サポートされています|
|ネットワークの分離を使用して環境の複数のコピーを同時に実行する|サポートされています|サポートされていません|

### <a name="lab-management-concepts"></a>ラボ管理の概念

ここから先へ進む前に、次の概念についても理解しておく必要があります。

|期間|[説明]|
|-|-----------------|
|ラボ センター|ラボ環境を作成および管理する Microsoft Test Manager の領域。|
|Azure DevOps プロジェクト ラボ|セットアップされたラボ環境のコレクションで、これらの環境に対して仮想マシンを接続して実行することができます。|
|Azure DevOps プロジェクト ライブラリ|格納された仮想マシン、テンプレート、および格納されたラボ環境のアーカイブで、プロジェクトのホスト グループにインポートされています。 SCVMM 環境でライブラリ内のアイテムを使用できますが、これらのアイテムを標準環境へ直接追加することはできません。 ライブラリ内のアイテムは実行できません。代わりに、新しい環境へアイテムを配置して使用します。|
|配置されている環境|プロジェクト ラボに配置されているラボ環境。この環境に接続してコンピューターを実行することができます。|

Lab Management の詳細については、以下を参照してください。

* [ラボを計画する](/previous-versions/ff756575(v=vs.140))
* [ラボを管理する](/previous-versions/dd936084(v=vs.140))
* [SCVMM 環境用の設定を行う](/previous-versions/dd380687(v=vs.140))
* [アクセス許可を管理する](/previous-versions/dd380760(v=vs.140))
* [構成を変更する](/previous-versions/ee704508(v=vs.140))
* [トラブルシューティング](/previous-versions/ee853230(v=vs.140))

環境の設定については、以下を参照してください。

* [ビルドとリリース クラウド環境](use-build-or-rm-instead-of-lab-management.md)
* [標準ラボ環境](/previous-versions/ee390842(v=vs.140))
* [SCVMM (仮想) 環境](/previous-versions/ee943322(v=vs.140))
* [ネットワーク分離環境の作成および使用](/previous-versions/ee518924(v=vs.140))
::: moniker-end

## <a name="see-also"></a>参照

* [テスト エージェントをインストールして構成する](../../test/lab-management/install-configure-test-agents.md)
* [Visual Studio Lab Management Guide (Visual Studio ラボ管理ガイド)](/archive/blogs/visualstudioalmrangers/library-of-tooling-and-guidance-solutions-aka-msvsarsolutions)
* [Microsoft DevOps ブログ](https://devblogs.microsoft.com/devops/)