---
title: テストの設定を使用してネットワーク エミュレーションを構成する
ms.date: 10/03/2016
ms.topic: conceptual
helpviewer_keywords:
- test settings, network emulation
ms.assetid: ff275cfb-5df9-4710-9a91-9caabaaad34f
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.openlocfilehash: 350640a4db6a81d19801aedb03d0d490895f97ef
ms.sourcegitcommit: cc841df335d1d22d281871fe41e74238d2fc52a6
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/18/2020
ms.locfileid: "75589215"
---
# <a name="how-to-configure-network-emulation-using-test-settings-in-visual-studio"></a>方法: Visual Studio でテストの設定を使用してネットワーク エミュレーションを構成する

Visual Studio から、さまざまなネットワーク環境でアプリケーションをテストする診断データ アダプターを構成できます。 テストを実行するときに、人為的なネットワーク負荷やボトルネックをテストするように構成することもできます。

> [!WARNING]
> テストを実行する実際のネットワークが、エミュレートしているネットワークよりも低速である場合、テストはより低いネットワーク速度で実行されます。 エミュレーションでは、ネットワーク環境を低速にできますが、高速にすることはできません。

[!INCLUDE [web-load-test-deprecated](includes/web-load-test-deprecated.md)]

次の手順では、ネットワーク エミュレーションを構成エディターから構成する方法を説明します。 これらの手順は、Microsoft Test Manager および Visual Studio の両方の構成エディターに当てはまります。

> [!NOTE]
> ネットワーク エミュレーション診断データ アダプターは、Visual Studio のテスト設定のみに適用できます。 Microsoft Test Manager のテスト設定には使用されません。

ネットワーク エミュレーションを使用するには、管理者特権を持つアカウントを使用する必要があります。 手動テストを実行するローカル ロールに対してネットワーク エミュレーションを選択した場合は、管理者特権で Microsoft Test Manager を起動する必要があります。 それ以外のロールに対してネットワーク エミュレーションを選択した場合は、そのロールのコンピューター上にあるテスト エージェントによって使用されるユーザー アカウントが Administrators グループのメンバーであることを確認する必要があります。 テスト エージェントのアカウントの設定方法の詳細については、[テスト エージェントのインストールと構成](../test/lab-management/install-configure-test-agents.md)に関するページを参照してください。

> [!NOTE]
> テスト エージェントの既定のアカウントであるネットワーク サービス アカウントは、Administrators グループのメンバーではありません。

**トゥルー ネットワーク エミュレーション**

Visual Studio は、すべてのテストの種類にソフトウェア ベースのトゥルー ネットワーク エミュレーションを使用します。 これには、ロード テストも含まれます。 トゥルー ネットワーク エミュレーションは、ネットワーク パケットを直接操作することでネットワークの状態をシミュレートします。 トゥルー ネットワーク エミュレーターは、イーサネットなどの信頼できる物理リンクを使用して、ワイヤード ネットワークとワイヤレス ネットワークの両方の動作をエミュレートできます。 次のネットワーク属性がトゥルー ネットワーク エミュレーションに組み込まれます。

- ネットワーク上のラウンド トリップ時間 (待機時間)

- 有効な帯域幅の量

- キュー動作

- パケット損失

- パケットの並べ替え

- エラー反映

トゥルー ネットワーク エミュレーションでは、IP アドレスや TCP、UDP、ICMP などのプロトコルに基づいてネットワーク パケットを柔軟にフィルター処理することもできます。

ネットワーク ベースの開発者およびテスト担当者は、トゥルー ネットワーク エミュレーションを使用して、目的のテスト環境のエミュレート、パフォーマンスの評価、変更の影響の予測、またはテクノロジの最適化に関する決定を行うことができます。 ハードウェア テスト ベッドと比較して、トゥルー ネットワーク エミュレーションは、よりコストが少なく柔軟性に富んだソリューションです。

## <a name="configure-network-emulation-for-your-test-settings"></a>テストの設定を使用したネットワーク エミュレーションの構成

この手順を実行する前に、Visual Studio からテストの設定を開き、 **[データと診断]** ページを選択する必要があります。

### <a name="to-configure-network-emulation-for-your-test-settings"></a>テストの設定を使用してネットワーク エミュレーションを構成するには

1. 特定のネットワークのエミュレートに使用するロールを選択します。

    > [!NOTE]
    > ネットワーク エミュレーション アダプターは、クライアント ロールとサーバー ロールのどちらか一方でのみ構成する必要があります。 両方のロールでこのアダプターを使用する必要はありません。 このアダプターは 2 つのロール間での通信に影響するネットワーク ノイズをエミュレートするので、両方のロールで使用する必要はありません。 必要な場合を除き、ネットワーク エミュレーション アダプターにはクライアント ロールを選択して、サーバー ロールで余分なオーバーヘッドが発生しないようにします。

2. **[ネットワーク エミュレーション]** をクリックし、 **[構成]** をクリックします。

     ネットワーク エミュレーションを構成するダイアログ ボックスが表示されます。

3. **[使用するネットワーク プロファイルの選択]** の横にある矢印をクリックし、テストを実行するときにエミュレートするネットワークの種類 (**ケーブル/DSL 768 Kbps** など) を選択します。

    > [!WARNING]
    > テストを実行する実際のネットワークが、エミュレートしているネットワークよりも低速である場合、テストはより低いネットワーク速度で実行されます。 エミュレーションでは、ネットワーク環境を低速にできますが、高速にすることはできません。

4. ネットワーク エミュレーション診断データ アダプターをテストの設定に含め、それをローカル コンピューター上で使用する場合は、ネットワーク エミュレーション ドライバーをコンピューターのネットワーク アダプターのいずれかにバインドする必要があります。 ネットワーク エミュレーション診断データ アダプターが正常に動作するためには、ネットワーク エミュレーション ドライバーが必要です。 ネットワーク エミュレーション ドライバーは、次の 2 つの方法でインストールされ、アダプターにバインドされます。

    - **Microsoft Visual Studio Test Agent と共にインストールされるネットワーク エミュレーション ドライバー:** Microsoft Visual Studio Test Agent は、リモート コンピューターとローカル コンピューターの両方で使用できます。 Visual Studio Test Agent のインストール プロセスに、ネットワーク エミュレーション ドライバーをネットワーク カードにバインドする構成手順が含まれています。 詳細については、[テスト エージェントのインストールと構成](../test/lab-management/install-configure-test-agents.md)に関するページを参照してください。

    - **Microsoft Visual Studio Test Professional と共にインストールされるネットワーク エミュレーション ドライバー:** ネットワーク エミュレーションを初めて使用するときに、ネットワーク エミュレーション ドライバーをネットワーク カードにバインドするよう求められます。

    > [!TIP]
    > Visual Studio Test Agent をインストールせずに、ローカル コンピューターのコマンド ラインからネットワーク エミュレーション ドライバーをインストールすることもできます。この場合、**VSTestConfig NETWORKEMULATION /install** コマンドを使用します。

## <a name="see-also"></a>参照

- [テスト設定を使用して診断情報を収集する](../test/collect-diagnostic-information-using-test-settings.md)
- [手動テストの実行 (Azure Test Plans)](/azure/devops/test/run-manual-tests?view=vsts)
