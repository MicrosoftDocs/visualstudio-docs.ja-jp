---
title: '[データ ソース] ウィンドウにカスタム コントロールを追加する'
description: Visual Studio で [データ ソース] ウィンドウにカスタム コントロールを追加します。 バインド可能なコントロールの一覧をカスタマイズします。 関連付けられたコントロールを追加します。
ms.date: 11/04/2016
ms.topic: how-to
f1_keywords:
- vs.datasource.howtoaddcustomcontrol
helpviewer_keywords:
- Data Sources Window, adding controls
- controls [Visual Studio], adding to Data Sources Window
- DefaultBindingPropertyAttribute class, using
- LookupBindingPropertiesAttribute class, using
- ComplexBindingPropertiesAttribute class, using
- Data Sources Window, selecting controls
ms.assetid: 8c43e7d2-ba94-4d9b-96de-3aa971955afd
author: ghogen
ms.author: ghogen
manager: jmartens
ms.openlocfilehash: 5591dc9c3422918fa8f9c605105ea10c8fbc447d
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/08/2021
ms.locfileid: "99867426"
---
# <a name="add-custom-controls-to-the-data-sources-window"></a>[データ ソース] ウィンドウにカスタム コントロールを追加する

[データ ソース] ウィンドウからデザイン サーフェイスに項目をドラッグしてデータ バインド コントロールを作成するときには、作成するコントロールの種類を選択できます。 ウィンドウの各項目には、選択できるコントロールが表示されるドロップダウン リストがあります。 各項目に関連付けられるコントロールのセットは、項目のデータ型によって決まります。 作成しようとしているコントロールが一覧に表示されない場合は、このトピックの手順に従って一覧にコントロールを追加できます。

[データ ソース] ウィンドウで項目のために作成するデータ バインド コントロールを選択することの詳細については、「[[データ ソース] ウィンドウからドラッグしたときに作成されるコントロールを設定する](../data-tools/set-the-control-to-be-created-when-dragging-from-the-data-sources-window.md)」を参照してください。

## <a name="customize-the-bindable-controls-list"></a>バインド可能なコントロールの一覧をカスタマイズする

[データ ソース] ウィンドウの、特定のデータ型の項目に対して使用できるコントロールの一覧でコントロールを追加または削除するには、以下の手順を実行します。

### <a name="to-select-the-controls-to-be-listed-for-a-data-type"></a>データ型に対して一覧表示されるコントロールを選択するには

1. WPF デザイナーまたは Windows フォーム デザイナーが開いていることを確認します。

2. **[データ ソース]** ウィンドウで、ウィンドウに追加したデータ ソースの一部である項目をクリックしてから、その項目のドロップダウン メニューをクリックします。

   > [!TIP]
   > [データ ソース] ウィンドウが開いていない場合は、 **[表示]**  >  **[その他のウィンドウ]**  >  **[データ ソース]** と選択して開きます。

3. ドロップダウン メニューの **[カスタマイズ]** をクリックします。 次のいずれかのダイアログ ボックスが開きます。

    - **[Windows フォーム デザイナー]** が開いている場合は、 **[オプション]** ダイアログ ボックスの **[データ UI カスタマイズ]** ページが開きます。 詳細については、[[データ UI カスタマイズ] オプション ダイアログ ボックス](../ide/reference/options-windows-forms-designer-data-ui-customization.md)に関するページを参照してください。

    - **[WPF デザイナー]** が開いている場合は、 **[コントロールのバインドのカスタマイズ]** ダイアログ ボックスが開きます。

4. ダイアログ ボックスで、 **[データ型]** ドロップダウン リストからデータ型を選択します。

    - テーブルまたはオブジェクト用のコントロールの一覧をカスタマイズするには、 **[一覧]** を選択します。

    - テーブルの列またはオブジェクトのプロパティ用のコントロールの一覧をカスタマイズするには、基になっているデータ ストアの列またはプロパティのデータ型を選択します。

    - ユーザー定義の形状を持つデータ オブジェクトを表示するコントロールの一覧をカスタマイズするには、 **[その他]** を選択します。 たとえばアプリケーションに、特定のオブジェクトに関して、複数のプロパティからのデータを表示するカスタム コントロールがある場合は、 **[その他]** を選択します。

5. **[関連付けられたコントロール]** ボックスで、選択したデータ型で使用できるようにするコントロールをそれぞれ選択するか、一覧から削除するすべてのコントロールの選択を解除します。

    > [!NOTE]
    > 選択したいコントロールが **[関連付けられたコントロール]** ボックスに表示されない場合は、そのコントロールを一覧に追加する必要があります。 詳細については、「[関連付けられるコントロールを追加する](#add-associated-controls)」を参照してください。

6. **[OK]** をクリックします。

7. **[データ ソース]** ウィンドウで、1 つ以上のコントロールに関連付けたばかりのデータ型の項目をクリックしてから、その項目のドロップダウン メニューをクリックします。

     **[関連付けられたコントロール]** ボックスで選択したコントロールが、その項目のドロップダウン メニューに表示されるようになっています。

## <a name="add-associated-controls"></a>関連付けられるコントロールを追加する

コントロールをデータ型に関連付けしたくても、コントロールが **[関連付けられたコントロール]** ボックスに表示されない場合は、そのコントロールを一覧に追加する必要があります。 コントロールは、現在のソリューション内、または参照されるアセンブリ内にある必要があります。 また、 **[ツールボックス]** で選択可能で、コントロールのデータ バインディング動作を指定する属性がある必要があります。

関連付けられたコントロールの一覧にコントロールを追加するには、次の操作を行います。

1. **[ツールボックス]** を右クリックして **[項目の選択]** を選択し、必要なコントロールを **[ツールボックス]** ボックスに追加します。

     コントロールには次のいずれかの属性が必要です。

    |属性|説明|
    |---------------|-----------------|
    |<xref:System.ComponentModel.DefaultBindingPropertyAttribute>|<xref:System.Windows.Forms.TextBox> など、単一列 (またはプロパティ) のデータを表示する単純なコントロールには、この属性を実装します。|
    |<xref:System.ComponentModel.ComplexBindingPropertiesAttribute>|<xref:System.Windows.Forms.DataGridView> など、データの一覧 (またはテーブル) を表示するコントロールには、この属性を実装します。|
    |<xref:System.ComponentModel.LookupBindingPropertiesAttribute>|<xref:System.Windows.Forms.ComboBox> など、データの一覧 (またはテーブル) を表示するだけでなく、単一の列またはプロパティを表示する必要もあるコントロールには、この属性を実装します。|

2. Windows フォームの場合は、 **[オプション]** ダイアログ ボックスで **[データ UI カスタマイズ]** ページを開きます。 または、WPF の場合は、 **[コントロールのバインドのカスタマイズ]** ダイアログ ボックスを開きます。 詳細については、[データ型に対してバインドできるコントロールの一覧をカスタマイズする](#customize-the-bindable-controls-list)ことに関するページを参照してください。

3. これで **[関連付けられたコントロール]** ボックスに、 **[ツールボックス]** で追加したばかりのコントロールが表示されるはずです。

    > [!NOTE]
    > 関連付けられたコントロールの一覧に追加できるのは、現在のソリューション内、または参照されるアセンブリ内にあるコントロールだけです。 (コントロールには、前の表のいずれかのデータ バインディング属性を実装する必要もあります)。[データソース] ウィンドウにないカスタム コントロールにデータをバインドするには、目的のコントロールを **[ツールボックス]** からデザイン サーフェイスにドラッグしてから、バインド先の項目を **[データ ソース]** ウィンドウからコントロール上にドラッグします。

## <a name="see-also"></a>関連項目

- [Visual Studio でのデータへのコントロールのバインド](../data-tools/bind-controls-to-data-in-visual-studio.md)
- [[データ UI カスタマイズ] オプション ダイアログ ボックス](../ide/reference/options-windows-forms-designer-data-ui-customization.md)
