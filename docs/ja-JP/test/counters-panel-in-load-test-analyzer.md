---
title: Visual Studio でロード テストを分析するためのカウンター パネル
ms.date: 10/19/2016
ms.topic: conceptual
helpviewer_keywords:
- load tests, counters panel
ms.assetid: e1a388d7-5d33-4631-931a-5653ac4aefdc
author: gewarren
ms.author: gewarren
manager: douge
ms.prod: visual-studio-dev15
ms.technology: vs-ide-test
ms.openlocfilehash: dd276a70a99344b837dad5cb12a0d87365535f39
ms.sourcegitcommit: e13e61ddea6032a8282abe16131d9e136a927984
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/26/2018
---
# <a name="use-the-counters-panel-in-graphs-view-and-tables-view"></a>グラフ ビューおよびテーブル ビューでのカウンター パネルの使用

[カウンター] パネルは、ロード テストの実行中、またはロード テストの結果を分析する際に、ロード テスト アナライザーのグラフ ビューおよびテーブル ビューで表示されます。 詳細については、[グラフ ビューでのロード テスト結果の分析](../test/analyze-load-test-results-in-the-graphs-view.md)と、[テーブル ビューでのロード テスト結果とエラーの分析](../test/analyze-load-test-results-and-errors-in-the-tables-view.md)に関するページ、「[How to: Access Load Test Results for Analysis](../test/how-to-access-load-test-results-for-analysis.md)」 (方法: ロード テストの結果にアクセスして分析する) を参照してください。

カウンター パネルには、ロード テスト中に収集されたすべてのパフォーマンス カウンターが階層表示されます。 ロード テスト アナライザー ツール バーの **[カウンター パネルの表示]** をクリックすると、[カウンター] パネルの表示と非表示を切り替えることができます。

カウンターはツリー構造に編成されています。この中のリーフ ノードは、グラフ化できるパフォーマンス カウンターのインスタンスです。

カウンター パネルには、以下の機能が用意されています。

-   しきい値違反の情報の通知。

-   グラフ化するカウンターの選択。

-   ロード テストの実行中に収集されたすべてのパフォーマンス カウンターのツリー構造のビュー。以下の主要な分岐があります。

    -   **全体:** 各テスト エージェントとロード テスト全体についてパフォーマンス カウンターのデータ概要が含まれています。

    -   **シナリオ名**: パフォーマンス カウンターのツリーでロード テストのシナリオ名のラベルが付いた分岐には、特定のロード テスト シナリオに関連付けられたロード テスト カウンターのすべてのインスタンスが含まれています。 ほとんどのロード テスト カウンターはシナリオの分岐内に入れ子になっています。

         シナリオの分岐には Web パフォーマンス テストのノードが含まれています。 Web パフォーマンス テストのノードには、ページ、要求、トランザクションの各ノードが含まれています。 この構造のリーフ ノードは、グラフに追加できるパフォーマンス カウンターです。

    -   **コンピューター:** ロード テスト以外のカウンターのインスタンスすべてが含まれ、コンピューターごとに分類されています。 コンピューターの分岐には、現在選択されているテスト設定の役割セクションで指定されたロード テスト コントローラーに関連付けられている各コンピューターのノードが含まれています。 詳細については、「[テスト コントローラーとテスト エージェント](configure-test-agents-and-controllers-for-load-tests.md)」を参照してください。

         各コンピューター ノードには、そのコンピューターから収集されたパフォーマンス カウンター カテゴリのセットが含まれます。 カテゴリにはカウンターが含まれ、カウンターにはパフォーマンス カウンターのインスタンス名が含まれています。

    -   **エラー:** ロード テスト中に検出されたすべてのエラーが含まれています。 エラー ノードには、いくつかのサブカテゴリ エラー ノードが含まれています。 サブカテゴリは、例外や HTTP エラーなどのさまざまなエラーの種類に固有です。

### <a name="scenario-name-node-in-counters-panel"></a>カウンター パネルのシナリオ名ノード

|||
|-|-|
|![カウンター パネルのシナリオ名ノード](../test/media/ltest__namenode.png)|1.ロード テストの Scenario1 に関連付けられているすべてのパフォーマンス カウンターは、このノードの下に表示されます。<br />2.シナリオのすべてのテストはシナリオ ノードの下にあります。 ラベルはテスト名を示します。<br />3.テスト ノードの下のリーフ ノードはロード テストのテスト ケース カウンターで、カウンターのインスタンス名がテスト名になります。<br />4.Web パフォーマンス テスト分岐に関連付けられたロード テスト ページ カウンターのすべてのインスタンス。 このノードには、ロード テストの Scenario1 の IBuyBrowse Web パフォーマンス テストのページ ログイン GET (レポート名) に関連付けられた、すべてのロード テスト ページ カウンター インスタンスが含まれています。<br />5.ページ ノードの下のリーフ ノードはロード テスト ページ カウンターです。<br />6.Web パフォーマンス テストに関連付けられたロード テスト要求カウンターのすべてのインスタンスは、Web パフォーマンス テスト分岐内に含まれています。 このノードには、ロード テストの Scenario1 の IBuyBrowse Web パフォーマンス テストの要求ログイン GET (レポート名) に関連付けられた、すべての要求カウンター インスタンスが含まれています。<br />7.要求ノードの下のリーフ ノードはロード テスト要求カウンターです。<br />8.Web パフォーマンス テストに関連付けられたロード テスト トランザクション カウンターのすべてのインスタンスは、Web パフォーマンス テスト分岐内に含まれています。 このノードには、ロード テストの Scenraio1 の IBuyBrowse Web パフォーマンス テストのトランザクション (Transaction1) に関連付けられた、すべてのトランザクション カウンター インスタンスが含まれています。<br />9.トランザクション ノードの下のリーフ ノードはロード テスト トランザクション カウンターです。<br />10.単体テスト ノード。|

## <a name="tasks"></a>[タスク]

|[タスク]|関連するトピック|
|-----------|-----------------------|
|**グラフ ビューでパフォーマンス カウンターをグラフに追加する:** カウンター パネルで、パフォーマンス カウンターをグラフに追加することにより、さまざまなデータをロード テスト グラフに追加できます。|-   [方法: グラフにカウンターを追加および削除する](../test/how-to-add-and-delete-counters-on-graphs-in-load-test-results.md)|
|**ロード テストで指定したしきい値の違反を分析する:** カウンター パネルには、詳しい分析用にテーブルとグラフに追加できるしきい値違反を表すアイコンが表示されます。|-   [方法: カウンター パネルを使用して、しきい値違反を分析する](../test/analyze-threshold-rule-violations-in-load-tests.md)|
|**ロード テストの実行中に検出されたエラーを分析する:** カウンター パネルには、エラー カテゴリとサブカテゴリ (HTTP エラーなど) が含まれるエラー ノードがあります。これを使用して、詳しい分析のためにエラーをグラフに追加できます。|-   [方法: カウンター パネルを使用してエラーを分析する](../test/how-to-analyze-errors-using-the-counters-panel.md)|

## <a name="performance-counter-sampling-interval-considerations"></a>パフォーマンス カウンターのサンプリング間隔に関する考慮事項

ロード テストの長さに基づいて、ロード テストの実行設定の **[サンプル速度]** プロパティの値を選択します。 既定値 (5 秒) のようにサンプル速度が小さいと、ロード テスト結果のデータベースに必要な容量が増えます。 長いロード テストでは、サンプル速度を増加すると、収集するデータ量を減らすことができます。 詳細については、[サンプル速度を指定する方法](../test/how-to-specify-the-sample-rate-for-a-load-test.md)に関するページを参照してください。

以下は、サンプル速度のガイドラインです。

|ロード テストの継続時間|推奨サンプル速度|
|------------------------|-----------------------------|
|\< 1 時間|5 秒|
|1 ～ 8 時間|15 秒|
|8 ～ 24 時間|30 秒|
|> 24 時間|60 秒|

## <a name="considerations-for-including-timing-details-to-collect-percentile-data"></a>タイミングの詳細の指定とパーセンタイル データの収集に関する考慮事項

ロード テスト エディターの実行設定には、**タイミングの詳細ストレージ**というプロパティがあります。 **[タイミングの詳細ストレージ]** プロパティを有効にすると、ロード テスト中に個々のテスト、トランザクション、およびページの実行にかかる時間が、ロード テストの結果リポジトリに格納されます。 これにより、90 パーセンタイル データや 95 パーセンタイル データが、ロード テスト アナライザーのテスト テーブル、トランザクション テーブル、およびページ テーブルに表示されます。

**[タイミングの詳細ストレージ]** プロパティを **[StatisticsOnly]** および **[AllIndividualDetails]** という実行設定プロパティで有効にするには、2 つの選択肢があります。 どちらのオプションの場合にも、すべてのテスト、ページ、およびトランザクションの時間が測定され、それぞれのタイミング データからパーセンタイル データが計算されます。 違いは、**[StatisticsOnly]** オプションではパーセンタイル データが計算された直後に、個々のタイミング データがリポジトリから削除されることです。 タイミング詳細を使用すると、結果リポジトリに必要な容量が減少しますが、 上級ユーザーは SQL ツールを使用して、他の方法でタイミング詳細データを処理することもできます。 この場合は、**[AllIndividualDetails]** オプションを使用して、その処理にタイミング詳細データを使用できるようにする必要があります。 さらに、このプロパティを **[AllIndividualDetails]** に設定した場合は、ロード テストの実行完了後にロード テスト アナライザーで仮想ユーザー アクティビティ チャートを使用して仮想ユーザーのアクティビティを分析できます。 詳細については、[詳細ビューでの仮想ユーザー アクティビティの分析](../test/analyze-load-test-virtual-user-activity-in-the-details-view.md)に関するページを参照してください。

ロード テストの結果リポジトリでタイミングの詳細データを格納するために必要なディスク容量が、長時間実行されるロード テストで特に大きくなります。 また、ロード テストの終わりにこのデータをロード テストの結果リポジトリに格納するのに時間がかかります。これは、ロード テストの実行が完了するまでデータがロード テスト エージェントに格納されるためです。 ロード テストが完了すると、データはリポジトリに格納されます。 既定では、**[タイミングの詳細ストレージ]** プロパティは有効になっています。 これがテスト環境で問題になる場合は、**[タイミングの詳細ストレージ]** を **[なし]** に設定します。

詳細については、[[タイミングの詳細ストレージ] プロパティを指定する方法](../test/how-to-specify-the-timing-details-storage-property-for-a-load-test.md)に関するページを参照してください。

## <a name="see-also"></a>関連項目

- [ロード テストの結果の分析](../test/analyze-load-test-results-using-the-load-test-analyzer.md)