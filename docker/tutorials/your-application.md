---
title: 'Docker チュートリアル - パート 1: ToDo リスト サンプル アプリをビルドして実行する'
description: Node.js で実行される ToDo リスト サンプル アプリの概要。
ms.date: 08/04/2020
author: nebuk89
ms.author: ghogen
manager: jmartens
ms.technology: vs-azure
ms.topic: conceptual
ms.workload:
- azure
ms.openlocfilehash: f5f5fdd51e4aa13df66470534303f7fba19e44ab
ms.sourcegitcommit: ae6d47b09a439cd0e13180f5e89510e3e347fd47
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/08/2021
ms.locfileid: "99841667"
---
# <a name="build-and-run-the-todo-sample-app"></a>ToDo サンプル アプリをビルドして実行する

このチュートリアルの残りの部分では、Node.js で実行されているシンプルな ToDo リスト マネージャーを操作します。 Node.js を使い慣れていなくても、心配しないでください。 JavaScript の実際の経験は必要ありません。

この時点で、開発チームの規模は非常に小さく、MVP (実用最小限の製品) を証明するアプリを構築しているだけです。 大規模なチームや複数の開発者などに対してそれがどのように機能するかを考えなくても、それがどのように機能するのか、それで何ができるかを示す必要があります。

![ToDo リスト マネージャーのスクリーンショット](media/todo-list-sample.png)

## <a name="get-the-app"></a>アプリの入手

アプリケーションを実行するには、事前にアプリケーションのソース コードをご利用のコンピューターに取り込んでおく必要があります。 実際のプロジェクトでは、通常、リポジトリをクローンします。 ただし、このチュートリアルでは、アプリケーションを含む ZIP ファイルを作成しました。

1. Docker for Windows または Docker Community Edition がローカル コンピューターにインストールされていることを確認します。 [Docker for Windows のインストール ドキュメント](https://docs.docker.com/docker-for-windows/install/)を参照してください。 インストール プロセスにより、サンプルを含む ZIP ファイルが localhost アドレスで使用できるようになります。

1. [ZIP をダウンロードします](http://localhost/assets/app.zip)。 ZIP ファイルを開き、内容を確実に抽出します。

1. 抽出したら、任意のコード エディターを使用してプロジェクトを開きます。 エディターを必要としている場合は、[Visual Studio Code](https://code.visualstudio.com/) を使用できます。 `package.json` と 2 つのサブディレクトリ (`src` と `spec`) が表示されます。

    ![Visual Studio Code を開きアプリを読み込んだ状態のスクリーンショット](media/ide-screenshot.png)

## <a name="building-the-apps-container-image"></a>アプリのコンテナー イメージをビルドする

アプリケーションをビルドするには、`Dockerfile` を使用する必要があります。 Dockerfile は、単に命令から成るテキストベースのスクリプトであり、コンテナー イメージの作成に使用されます。 以前に Dockerfiles を作成したことがある場合、次の Dockerfiles にいくつかの欠陥があることにお気づきかもしれません。 しかし、心配しないでください。 それらについて説明します。

1. `Dockerfile` という名前のファイルを、次の内容を含むファイル `package.json` と同じフォルダー内に作成します。

    ```dockerfile
    FROM node:12-alpine
    WORKDIR /app
    COPY . .
    RUN yarn install --production
    CMD ["node", "/app/src/index.js"]
    ```

    ファイル `Dockerfile` に `.txt` のようなファイル拡張子が付いていないことを確認してください。 エディターによっては、このファイル拡張子が自動的に追加されることがあります。その場合は、次の手順でエラーが発生します。

1. それをまだ行っていない場合は、ターミナルを開き、`Dockerfile` が置かれている `app` ディレクトリにアクセスします。 次に、`docker build` コマンドを使用してコンテナー イメージを作成します。

    ```bash
    docker build -t getting-started .
    ```

    または、Dockerfile を右クリックして **[Build Image...]\(イメージのビルド...\)** を選択した後、プロンプトでタグを指定することもできます。

    このコマンドでは、新しいコンテナー イメージを作成するのに Dockerfile が使用されました。 "レイヤー" が多数ダウンロードされていることに気付いたかもしれません。 これは、`node:12-alpine` イメージから開始するようにビルダーに指示したからです。 しかし、ご利用のコンピューター上にそのイメージはなかったため、ダウンロードする必要がありました。

    イメージがダウンロードされた後、アプリケーションにコピーし、`yarn` を使用してアプリケーションの依存関係をインストールしました。 `CMD` ディレクティブでは、このイメージからコンテナーを起動する際に実行される既定のコマンドが指定されます。

    最後に、`-t` フラグによって、ご利用のイメージにタグが付けられます。 これは単に、人間が判読できる最終的なイメージの名前と考えてください。 イメージには `getting-started` という名前を付けたので、コンテナーを実行するときにそのイメージを参照することができます。

    `docker build` コマンドの最後にある `.` は、現在のディレクトリ内の `Dockerfile` を検索するように Docker に指示するものです。

## <a name="starting-an-app-container"></a>アプリ コンテナーを開始する

これでイメージの用意ができたのでアプリケーションを実行してみましょう。 そのためには、`docker run` コマンドを使用します (前に出てきたのを覚えてますか?)。

1. `docker run` コマンドを使用してコンテナーを開始し、先ほど作成したイメージの名前を指定します。

    ```bash
    docker run -dp 3000:3000 getting-started
    ```

    `-d` および `-p` フラグを覚えていますか? 新しいコンテナーを "デタッチ" モード (バックグラウンド) で実行し、ホストのポート 3000 とコンテナーのポート 3000 の間のマッピングを作成します。 ポート マッピングがなければ、アプリケーションにアクセスすることはできません。

1. 数秒後に、Web ブラウザーを開いて [http://localhost:3000](http://localhost:3000) にアクセスします。
    アプリが表示されるはずです。

    ![空の ToDo リスト](media/todo-list-empty.png)

1. 先に進み、項目を 1 つまたは 2 つ追加して、期待どおりに動作することを確認します。 項目に完了のマークを付け、項目を削除することができます。 フロントエンドからバックエンドに項目が正常に格納されます。 非常に簡単ではありませんか。

この時点で、実行中の ToDo リスト マネージャーにはいくつかの項目が存在します。すべてご自分で作成したものです。 次に、いくつかの変更を加えてみて、コンテナーの管理方法について学習しましょう。

VS Code 拡張機能を簡単に見てみると、現在ご自分の 2 つのコンテナーが実行中であることがわかるはずです (このチュートリアルの、および自分で新たに起動したアプリのコンテナー)。

![チュートリアルおよびアプリのコンテナーが実行されている Docker 拡張機能](media/vs-two-containers.png)

## <a name="recap"></a>まとめ

この短いセクションでは、コンテナー イメージのビルド方法についてごく基本的なことを学習し、そのために Dockerfile を作成しました。 イメージをビルドしてから、コンテナーが起動し、実行中のアプリを確認しました。

次に、アプリに変更を加え、実行中のアプリケーションを新しいイメージで更新する方法について学習します。 その過程で、他のいくつかの便利なコマンドについても学習します。

## <a name="next-steps"></a>次の手順

チュートリアルを続行します。

> [!div class="nextstepaction"]
> [アプリの更新](update-your-app.md)
